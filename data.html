<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Bearbejdning dag 1 | Visualisering af biologiske datasæt - 2022</title>
  <meta name="description" content="Course materials for Analysering og visualisering af biologiske datasæt 2022" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Bearbejdning dag 1 | Visualisering af biologiske datasæt - 2022" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Course materials for Analysering og visualisering af biologiske datasæt 2022" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Bearbejdning dag 1 | Visualisering af biologiske datasæt - 2022" />
  
  <meta name="twitter:description" content="Course materials for Analysering og visualisering af biologiske datasæt 2022" />
  

<meta name="author" content="Sarah Rennie" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="visual2.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/vembedr-0.1.5/css/vembedr.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Visualisering kursus</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Grundlæggende R<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#inledning-til-kapitel"><i class="fa fa-check"></i><b>1.1</b> Inledning til kapitel<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#rstudio"><i class="fa fa-check"></i><b>1.2</b> RStudio<span></span></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#de-forskellige-vinduer-i-rstudio"><i class="fa fa-check"></i><b>1.2.1</b> De forskellige vinduer i RStudio<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#working-directory"><i class="fa fa-check"></i><b>1.3</b> Working directory<span></span></a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#r-pakker"><i class="fa fa-check"></i><b>1.4</b> R pakker<span></span></a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#hvor-kommer-vores-data-fra"><i class="fa fa-check"></i><b>1.5</b> Hvor kommer vores data fra?<span></span></a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#indbyggede-datasæt"><i class="fa fa-check"></i><b>1.5.1</b> Indbyggede datasæt<span></span></a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#importering-af-data-fra-.txt-fil"><i class="fa fa-check"></i><b>1.5.2</b> Importering af data fra .txt fil<span></span></a></li>
<li class="chapter" data-level="1.5.3" data-path="index.html"><a href="index.html#importering-af-data-fra-excel"><i class="fa fa-check"></i><b>1.5.3</b> Importering af data fra Excel<span></span></a></li>
<li class="chapter" data-level="1.5.4" data-path="index.html"><a href="index.html#kaggle"><i class="fa fa-check"></i><b>1.5.4</b> Kaggle<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#beregninger-i-r"><i class="fa fa-check"></i><b>1.6</b> Beregninger i R<span></span></a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="index.html"><a href="index.html#vectorer"><i class="fa fa-check"></i><b>1.6.1</b> Vectorer<span></span></a></li>
<li class="chapter" data-level="1.6.2" data-path="index.html"><a href="index.html#datatyper"><i class="fa fa-check"></i><b>1.6.2</b> datatyper<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#dataframes"><i class="fa fa-check"></i><b>1.7</b> Dataframes<span></span></a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="index.html#delmægder-af-dataframes"><i class="fa fa-check"></i><b>1.7.1</b> Delmægder af dataframes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#descriptive-statistics"><i class="fa fa-check"></i><b>1.8</b> Descriptive statistics<span></span></a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="index.html"><a href="index.html#simulere-data-fra-den-normale-fordeling"><i class="fa fa-check"></i><b>1.8.1</b> Simulere data fra den normale fordeling<span></span></a></li>
<li class="chapter" data-level="1.8.2" data-path="index.html"><a href="index.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>1.8.2</b> Measures of central tendency<span></span></a></li>
<li class="chapter" data-level="1.8.3" data-path="index.html"><a href="index.html#tapply"><i class="fa fa-check"></i><b>1.8.3</b> <code>tapply()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="index.html"><a href="index.html#statistike-tester"><i class="fa fa-check"></i><b>1.9</b> Statistike tester<span></span></a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="index.html"><a href="index.html#korrelation"><i class="fa fa-check"></i><b>1.9.1</b> Korrelation<span></span></a></li>
<li class="chapter" data-level="1.9.2" data-path="index.html"><a href="index.html#test-for-uafhængighed-chi-sq-test"><i class="fa fa-check"></i><b>1.9.2</b> Test for uafhængighed (chi-sq test)<span></span></a></li>
<li class="chapter" data-level="1.9.3" data-path="index.html"><a href="index.html#sample-t-test"><i class="fa fa-check"></i><b>1.9.3</b> 1 sample t-test<span></span></a></li>
<li class="chapter" data-level="1.9.4" data-path="index.html"><a href="index.html#sample-t-test-1"><i class="fa fa-check"></i><b>1.9.4</b> 2-sample t-test<span></span></a></li>
<li class="chapter" data-level="1.9.5" data-path="index.html"><a href="index.html#paired-t-test"><i class="fa fa-check"></i><b>1.9.5</b> Paired t-test<span></span></a></li>
<li class="chapter" data-level="1.9.6" data-path="index.html"><a href="index.html#anova-variansanalyse"><i class="fa fa-check"></i><b>1.9.6</b> ANOVA (variansanalyse)<span></span></a></li>
<li class="chapter" data-level="1.9.7" data-path="index.html"><a href="index.html#lineær-regression"><i class="fa fa-check"></i><b>1.9.7</b> Lineær regression<span></span></a></li>
<li class="chapter" data-level="1.9.8" data-path="index.html"><a href="index.html#r-squared-coefficient-of-determination"><i class="fa fa-check"></i><b>1.9.8</b> R-squared coefficient of determination<span></span></a></li>
<li class="chapter" data-level="1.9.9" data-path="index.html"><a href="index.html#antagelser---lineær-regression"><i class="fa fa-check"></i><b>1.9.9</b> Antagelser - lineær regression<span></span></a></li>
<li class="chapter" data-level="1.9.10" data-path="index.html"><a href="index.html#multiple-lineær-regression"><i class="fa fa-check"></i><b>1.9.10</b> Multiple lineær regression<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="index.html"><a href="index.html#problemstillinger"><i class="fa fa-check"></i><b>1.10</b> Problemstillinger<span></span></a>
<ul>
<li class="chapter" data-level="1.10.1" data-path="index.html"><a href="index.html#quiz---basics"><i class="fa fa-check"></i><b>1.10.1</b> Quiz - Basics<span></span></a></li>
<li class="chapter" data-level="1.10.2" data-path="index.html"><a href="index.html#grundlæggende-r"><i class="fa fa-check"></i><b>1.10.2</b> Grundlæggende R<span></span></a></li>
<li class="chapter" data-level="1.10.3" data-path="index.html"><a href="index.html#kort-analyse-med-reaktionstider"><i class="fa fa-check"></i><b>1.10.3</b> Kort analyse med reaktionstider<span></span></a></li>
<li class="chapter" data-level="1.10.4" data-path="index.html"><a href="index.html#ekstra-øvelser-med-statistik-tests"><i class="fa fa-check"></i><b>1.10.4</b> Ekstra øvelser med statistik tests<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>2</b> Introduktion til R Markdown<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="rmarkdown.html"><a href="rmarkdown.html#hvad-er-r-markdown"><i class="fa fa-check"></i><b>2.1</b> Hvad er R Markdown?<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="rmarkdown.html"><a href="rmarkdown.html#installere-r-markdown"><i class="fa fa-check"></i><b>2.2</b> Installere R Markdown<span></span></a></li>
<li class="chapter" data-level="2.3" data-path="rmarkdown.html"><a href="rmarkdown.html#videodemonstrationer"><i class="fa fa-check"></i><b>2.3</b> Videodemonstrationer<span></span></a></li>
<li class="chapter" data-level="2.4" data-path="rmarkdown.html"><a href="rmarkdown.html#oprette-et-nyt-dokument-i-r-markdown"><i class="fa fa-check"></i><b>2.4</b> Oprette et nyt dokument i R Markdown<span></span></a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="rmarkdown.html"><a href="rmarkdown.html#yaml"><i class="fa fa-check"></i><b>2.4.1</b> YAML<span></span></a></li>
<li class="chapter" data-level="2.4.2" data-path="rmarkdown.html"><a href="rmarkdown.html#globale-options"><i class="fa fa-check"></i><b>2.4.2</b> Globale options<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="rmarkdown.html"><a href="rmarkdown.html#skrive-baseret-tekst"><i class="fa fa-check"></i><b>2.5</b> Skrive baseret tekst<span></span></a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="rmarkdown.html"><a href="rmarkdown.html#headers"><i class="fa fa-check"></i><b>2.5.1</b> Headers<span></span></a></li>
<li class="chapter" data-level="2.5.2" data-path="rmarkdown.html"><a href="rmarkdown.html#liste"><i class="fa fa-check"></i><b>2.5.2</b> liste<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="rmarkdown.html"><a href="rmarkdown.html#knitte-kode"><i class="fa fa-check"></i><b>2.6</b> Knitte kode<span></span></a></li>
<li class="chapter" data-level="2.7" data-path="rmarkdown.html"><a href="rmarkdown.html#kode-chunks"><i class="fa fa-check"></i><b>2.7</b> Kode chunks<span></span></a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="rmarkdown.html"><a href="rmarkdown.html#et-godt-råd-når-man-arbejder-med-chunks"><i class="fa fa-check"></i><b>2.7.1</b> Et godt råd når man arbejder med chunks<span></span></a></li>
<li class="chapter" data-level="2.7.2" data-path="rmarkdown.html"><a href="rmarkdown.html#chunk-indstillinger"><i class="fa fa-check"></i><b>2.7.2</b> Chunk indstillinger<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="rmarkdown.html"><a href="rmarkdown.html#r-beregninger-indenfor-teksten-i-dokument-inline-code"><i class="fa fa-check"></i><b>2.8</b> R beregninger indenfor teksten i dokument (‘inline code’)<span></span></a></li>
<li class="chapter" data-level="2.9" data-path="rmarkdown.html"><a href="rmarkdown.html#working-directory-1"><i class="fa fa-check"></i><b>2.9</b> Working directory<span></span></a></li>
<li class="chapter" data-level="2.10" data-path="rmarkdown.html"><a href="rmarkdown.html#matematik"><i class="fa fa-check"></i><b>2.10</b> Matematik<span></span></a></li>
<li class="chapter" data-level="2.11" data-path="rmarkdown.html"><a href="rmarkdown.html#problemstillinger-1"><i class="fa fa-check"></i><b>2.11</b> Problemstillinger<span></span></a></li>
<li class="chapter" data-level="2.12" data-path="rmarkdown.html"><a href="rmarkdown.html#færdig-for-i-dag-og-næste-gang"><i class="fa fa-check"></i><b>2.12</b> Færdig for i dag og næste gang<span></span></a></li>
<li class="chapter" data-level="2.13" data-path="rmarkdown.html"><a href="rmarkdown.html#ekstra-links"><i class="fa fa-check"></i><b>2.13</b> Ekstra links<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="visual1.html"><a href="visual1.html"><i class="fa fa-check"></i><b>3</b> Visualisering - ggplot2 dag 1<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="visual1.html"><a href="visual1.html#inledning-og-videoer"><i class="fa fa-check"></i><b>3.1</b> Inledning og videoer<span></span></a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="visual1.html"><a href="visual1.html#læringsmålene-for-dag-1"><i class="fa fa-check"></i><b>3.1.1</b> Læringsmålene for dag 1<span></span></a></li>
<li class="chapter" data-level="3.1.2" data-path="visual1.html"><a href="visual1.html#hvad-er-ggplot2"><i class="fa fa-check"></i><b>3.1.2</b> Hvad er <strong>ggplot2</strong>?<span></span></a></li>
<li class="chapter" data-level="3.1.3" data-path="visual1.html"><a href="visual1.html#brugen-af-materialerne"><i class="fa fa-check"></i><b>3.1.3</b> Brugen af materialerne<span></span></a></li>
<li class="chapter" data-level="3.1.4" data-path="visual1.html"><a href="visual1.html#video-ressourcer"><i class="fa fa-check"></i><b>3.1.4</b> Video ressourcer<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="visual1.html"><a href="visual1.html#transition-fra-base-r-til-ggplot2"><i class="fa fa-check"></i><b>3.2</b> Transition fra base R til ggplot2<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="visual1.html"><a href="visual1.html#vores-første-ggplot"><i class="fa fa-check"></i><b>3.3</b> Vores første ggplot<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="visual1.html"><a href="visual1.html#lidt-om-ggplot2"><i class="fa fa-check"></i><b>3.4</b> Lidt om ggplot2<span></span></a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="visual1.html"><a href="visual1.html#syntax"><i class="fa fa-check"></i><b>3.4.1</b> Syntax<span></span></a></li>
<li class="chapter" data-level="3.4.2" data-path="visual1.html"><a href="visual1.html#hvad-betyder-egentlig-grammar-of-graphics"><i class="fa fa-check"></i><b>3.4.2</b> Hvad betyder egentlig grammar of graphics?<span></span></a></li>
<li class="chapter" data-level="3.4.3" data-path="visual1.html"><a href="visual1.html#globale-versus-lokale-æstetik"><i class="fa fa-check"></i><b>3.4.3</b> Globale versus lokale æstetik<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="visual1.html"><a href="visual1.html#specificere-etiketter-og-titel"><i class="fa fa-check"></i><b>3.5</b> Specificere etiketter og titel<span></span></a></li>
<li class="chapter" data-level="3.6" data-path="visual1.html"><a href="visual1.html#ændre-farver"><i class="fa fa-check"></i><b>3.6</b> Ændre farver<span></span></a></li>
<li class="chapter" data-level="3.7" data-path="visual1.html"><a href="visual1.html#ændre-tema"><i class="fa fa-check"></i><b>3.7</b> Ændre tema<span></span></a></li>
<li class="chapter" data-level="3.8" data-path="visual1.html"><a href="visual1.html#forskellige-geoms"><i class="fa fa-check"></i><b>3.8</b> Forskellige geoms<span></span></a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="visual1.html"><a href="visual1.html#boxplot-geom_box"><i class="fa fa-check"></i><b>3.8.1</b> Boxplot (<code>geom_box</code>)<span></span></a></li>
<li class="chapter" data-level="3.8.2" data-path="visual1.html"><a href="visual1.html#barplot-geom_bar"><i class="fa fa-check"></i><b>3.8.2</b> Barplot (<code>geom_bar</code>)<span></span></a></li>
<li class="chapter" data-level="3.8.3" data-path="visual1.html"><a href="visual1.html#histogram-geom_histogram"><i class="fa fa-check"></i><b>3.8.3</b> Histogram (<code>geom_histogram</code>)<span></span></a></li>
<li class="chapter" data-level="3.8.4" data-path="visual1.html"><a href="visual1.html#density-geom_density"><i class="fa fa-check"></i><b>3.8.4</b> Density (<code>geom_density</code>)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="visual1.html"><a href="visual1.html#troubleshooting"><i class="fa fa-check"></i><b>3.9</b> Troubleshooting<span></span></a></li>
<li class="chapter" data-level="3.10" data-path="visual1.html"><a href="visual1.html#problemstillinger-2"><i class="fa fa-check"></i><b>3.10</b> Problemstillinger<span></span></a></li>
<li class="chapter" data-level="3.11" data-path="visual1.html"><a href="visual1.html#næste-gang"><i class="fa fa-check"></i><b>3.11</b> Næste gang<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="visual2.html"><a href="visual2.html"><i class="fa fa-check"></i><b>4</b> Visualisering - ggplot2 dag 2<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="visual2.html"><a href="visual2.html#indledning-og-videoer"><i class="fa fa-check"></i><b>4.1</b> Indledning og videoer<span></span></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="visual2.html"><a href="visual2.html#læringsmålene"><i class="fa fa-check"></i><b>4.1.1</b> Læringsmålene<span></span></a></li>
<li class="chapter" data-level="4.1.2" data-path="visual2.html"><a href="visual2.html#video-ressourcer-1"><i class="fa fa-check"></i><b>4.1.2</b> Video ressourcer<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="visual2.html"><a href="visual2.html#koordinat-systemer"><i class="fa fa-check"></i><b>4.2</b> Koordinat systemer<span></span></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="visual2.html"><a href="visual2.html#zoom-på-plottet-coord_cartesian"><i class="fa fa-check"></i><b>4.2.1</b> Zoom på plottet (<code>coord_cartesian()</code>)<span></span></a></li>
<li class="chapter" data-level="4.2.2" data-path="visual2.html"><a href="visual2.html#transformering-af-akserne---log-sqrt-osv-scale_x_continuous."><i class="fa fa-check"></i><b>4.2.2</b> Transformering af akserne - log, sqrt osv (<code>scale_x_continuous</code>).<span></span></a></li>
<li class="chapter" data-level="4.2.3" data-path="visual2.html"><a href="visual2.html#flip-coordinates-coord_flip"><i class="fa fa-check"></i><b>4.2.3</b> Flip coordinates (<code>coord_flip</code>)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="visual2.html"><a href="visual2.html#mere-om-farver-og-punkt-former"><i class="fa fa-check"></i><b>4.3</b> Mere om farver og punkt former<span></span></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="visual2.html"><a href="visual2.html#automatisk-farver"><i class="fa fa-check"></i><b>4.3.1</b> Automatisk farver<span></span></a></li>
<li class="chapter" data-level="4.3.2" data-path="visual2.html"><a href="visual2.html#farver-manuelt"><i class="fa fa-check"></i><b>4.3.2</b> Farver manuelt<span></span></a></li>
<li class="chapter" data-level="4.3.3" data-path="visual2.html"><a href="visual2.html#punkt-former"><i class="fa fa-check"></i><b>4.3.3</b> Punkt former<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="visual2.html"><a href="visual2.html#annotations"><i class="fa fa-check"></i><b>4.4</b> Annotations<span></span></a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="visual2.html"><a href="visual2.html#tilføje-labeller-direkte-på-plottet."><i class="fa fa-check"></i><b>4.4.1</b> Tilføje labeller direkte på plottet.<span></span></a></li>
<li class="chapter" data-level="4.4.2" data-path="visual2.html"><a href="visual2.html#pakken-ggrepel-for-at-tilføje-tekst-labeller"><i class="fa fa-check"></i><b>4.4.2</b> Pakken <code>ggrepel</code> for at tilføje tekst labeller<span></span></a></li>
<li class="chapter" data-level="4.4.3" data-path="visual2.html"><a href="visual2.html#tilføje-rektangler-i-regioner-af-interesse-annotate"><i class="fa fa-check"></i><b>4.4.3</b> Tilføje rektangler i regioner af interesse (<code>annotate</code>)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="visual2.html"><a href="visual2.html#opdele-plots-facet_gridfacet_wrap"><i class="fa fa-check"></i><b>4.5</b> Opdele plots (<code>facet_grid</code>/<code>facet_wrap</code>)<span></span></a></li>
<li class="chapter" data-level="4.6" data-path="visual2.html"><a href="visual2.html#problemstillinger-3"><i class="fa fa-check"></i><b>4.6</b> Problemstillinger<span></span></a></li>
<li class="chapter" data-level="4.7" data-path="visual2.html"><a href="visual2.html#workshop-opgave-obs-fredag"><i class="fa fa-check"></i><b>4.7</b> Workshop opgave (OBS Fredag)<span></span></a></li>
<li class="chapter" data-level="4.8" data-path="visual2.html"><a href="visual2.html#ekstra-notat-gemme-dit-plot"><i class="fa fa-check"></i><b>4.8</b> Ekstra notat: gemme dit plot<span></span></a></li>
<li class="chapter" data-level="4.9" data-path="visual2.html"><a href="visual2.html#ekstra-links-1"><i class="fa fa-check"></i><b>4.9</b> Ekstra links<span></span></a></li>
<li class="chapter" data-level="4.10" data-path="visual2.html"><a href="visual2.html#slut-for-ugen"><i class="fa fa-check"></i><b>4.10</b> Slut for ugen<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>5</b> Bearbejdning dag 1<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="data.html"><a href="data.html#inledning-og-læringsmålene"><i class="fa fa-check"></i><b>5.1</b> Inledning og læringsmålene<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="data.html"><a href="data.html#video-ressourcer-2"><i class="fa fa-check"></i><b>5.2</b> Video ressourcer<span></span></a></li>
<li class="chapter" data-level="5.3" data-path="data.html"><a href="data.html#hvad-er-tidyverse"><i class="fa fa-check"></i><b>5.3</b> Hvad er Tidyverse?<span></span></a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data.html"><a href="data.html#princippen-med-tidy-data"><i class="fa fa-check"></i><b>5.3.1</b> Princippen med ‘tidy data’<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data.html"><a href="data.html#lidt-om-tibbles"><i class="fa fa-check"></i><b>5.4</b> Lidt om <code>tibbles</code><span></span></a></li>
<li class="chapter" data-level="5.5" data-path="data.html"><a href="data.html#transition-fra-base-til-tidyverse"><i class="fa fa-check"></i><b>5.5</b> Transition fra base til tidyverse<span></span></a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="data.html"><a href="data.html#om-titanic-datasæt"><i class="fa fa-check"></i><b>5.5.1</b> Om <strong>Titanic</strong> datasæt<span></span></a></li>
<li class="chapter" data-level="5.5.2" data-path="data.html"><a href="data.html#titanic-oprydning"><i class="fa fa-check"></i><b>5.5.2</b> Titanic: oprydning<span></span></a></li>
<li class="chapter" data-level="5.5.3" data-path="data.html"><a href="data.html#pipe"><i class="fa fa-check"></i><b>5.5.3</b> Pipe<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="data.html"><a href="data.html#bearbejdning-af-data-dplyr"><i class="fa fa-check"></i><b>5.6</b> Bearbejdning af data: <code>dplyr</code><span></span></a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="data.html"><a href="data.html#dplyr-verbs-select"><i class="fa fa-check"></i><b>5.6.1</b> dplyr verbs: <code>select()</code><span></span></a></li>
<li class="chapter" data-level="5.6.2" data-path="data.html"><a href="data.html#dplyr-verbs-filter"><i class="fa fa-check"></i><b>5.6.2</b> dplyr verbs: <code>filter()</code><span></span></a></li>
<li class="chapter" data-level="5.6.3" data-path="data.html"><a href="data.html#comparitiver-reference"><i class="fa fa-check"></i><b>5.6.3</b> Comparitiver reference<span></span></a></li>
<li class="chapter" data-level="5.6.4" data-path="data.html"><a href="data.html#kombinere-filter-og-select"><i class="fa fa-check"></i><b>5.6.4</b> Kombinere <code>filter()</code> og <code>select()</code><span></span></a></li>
<li class="chapter" data-level="5.6.5" data-path="data.html"><a href="data.html#dplyr-verbs-mutate"><i class="fa fa-check"></i><b>5.6.5</b> dplyr verbs: <code>mutate()</code><span></span></a></li>
<li class="chapter" data-level="5.6.6" data-path="data.html"><a href="data.html#rename"><i class="fa fa-check"></i><b>5.6.6</b> <code>rename()</code><span></span></a></li>
<li class="chapter" data-level="5.6.7" data-path="data.html"><a href="data.html#dplyr-verbs-recode"><i class="fa fa-check"></i><b>5.6.7</b> dplyr verbs: <code>recode()</code><span></span></a></li>
<li class="chapter" data-level="5.6.8" data-path="data.html"><a href="data.html#dplyr-verbs-arrange"><i class="fa fa-check"></i><b>5.6.8</b> dplyr verbs: <code>arrange()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="data.html"><a href="data.html#visualisering-bruge-som-input-i-ggplot2"><i class="fa fa-check"></i><b>5.7</b> Visualisering: bruge som input i ggplot2<span></span></a></li>
<li class="chapter" data-level="5.8" data-path="data.html"><a href="data.html#problemstillinger-4"><i class="fa fa-check"></i><b>5.8</b> Problemstillinger<span></span></a></li>
<li class="chapter" data-level="5.9" data-path="data.html"><a href="data.html#kommentarer"><i class="fa fa-check"></i><b>5.9</b> Kommentarer<span></span></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Visualisering af biologiske datasæt - 2022</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Bearbejdning dag 1<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><img src="plots/hex-tidyverse.png" width="15%" /></p>
<div id="inledning-og-læringsmålene" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Inledning og læringsmålene<a href="data.html#inledning-og-læringsmålene" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>I skal være i stand til at:</p>
<ul>
<li>Beskrive generelle hvad R-pakken <code>Tidyverse</code> kan benyttes til.</li>
<li>Beskrive en tibble og genkende når et datasæt er betragtet som “tidy.”</li>
<li>Benytte nogle vigtige <code>Tidyverse</code>-verbs til at bearbejde data (<code>filter()</code>,<code>select()</code>, <code>mutate()</code>, <code>rename()</code>, <code>arrange()</code>, <code>recode()</code>).</li>
<li>Bruge <code>%&gt;%</code> til at forbinde <code>Tidyverse</code>-verber sammen og at overføre data til et plot.</li>
</ul>
</div>
<div id="video-ressourcer-2" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Video ressourcer<a href="data.html#video-ressourcer-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Video 1 - introduktion til uge, hvad er den <code>tidyverse</code>-pakke? Hvad er en tibble?</li>
</ul>
<p>Link her hvis det ikke virker nedenunder: <a href="https://player.vimeo.com/video/547107062" class="uri">https://player.vimeo.com/video/547107062</a></p>
<div class="vembedr">
<div>
<iframe class="vimeo-embed" src="https://player.vimeo.com/video/547107062" width="533" height="300" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
<ul>
<li>Video 2 - rydder op den titanic datasæt med <code>select()</code> og <code>drop_na()</code></li>
</ul>
<p>Link her hvis det ikke virker nedenunder: <a href="https://player.vimeo.com/video/546910795" class="uri">https://player.vimeo.com/video/546910795</a></p>
<div class="vembedr">
<div>
<iframe class="vimeo-embed" src="https://player.vimeo.com/video/546910795" width="533" height="300" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
<ul>
<li>Video 3 - introduktion til <code>%&gt;%</code></li>
</ul>
<p>Link her hvis det ikke virker nedenunder: <a href="https://player.vimeo.com/video/546910781" class="uri">https://player.vimeo.com/video/546910781</a></p>
<div class="vembedr">
<div>
<iframe class="vimeo-embed" src="https://player.vimeo.com/video/546910781" width="533" height="300" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
<ul>
<li>Video 4 - <code>tidyverse</code> verber: <code>select</code> og <code>filter</code></li>
</ul>
<p>Link her hvis det ikke virker nedenunder: <a href="https://player.vimeo.com/video/546910758" class="uri">https://player.vimeo.com/video/546910758</a></p>
<div class="vembedr">
<div>
<iframe class="vimeo-embed" src="https://player.vimeo.com/video/546910758" width="533" height="300" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
<ul>
<li>Video 5 - <code>tidyverse</code> verber: <code>mutate</code> og <code>arrange</code></li>
</ul>
<p>Link her hvis det ikke virker nedenunder: <a href="https://player.vimeo.com/video/546910712" class="uri">https://player.vimeo.com/video/546910712</a></p>
<div class="vembedr">
<div>
<iframe class="vimeo-embed" src="https://player.vimeo.com/video/546910712" width="533" height="300" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
</div>
<div id="hvad-er-tidyverse" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Hvad er Tidyverse?<a href="data.html#hvad-er-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Tidyverse</strong> er en samling af pakker i R, som man bruger til at bearbejde datasæt. Formålet er ikke nødvendigvis at erstatte funktionaliteten af base-pakken, men til at bygge på den. Som vi kommer til at se i detaljer, <strong>tidyverse</strong> deler faktisk meget af den samme tankegang bag <strong>ggplot2</strong> - men i stedet for at bruge <code>+</code> til at bygge komponenter op i et plot, bruger man <code>%&gt;%</code> (udtales ‘pipe’) til at tilknytte de forskellige funktioner til hinanden.</p>
<div class="figure">
<img src="plots/tidyverse2_packages.png" style="width:45.0%" alt="" />
<p class="caption">Most common tidyverse packages</p>
</div>
<p>Lad os starte med at indlæse pakken <strong>tidyverse</strong>. Vær opmærksom på, at har du ikke pakken på din computer, kan det tage lidt tid at installere - det er pga. de mange pakke der <strong>tidyverse</strong> er afhængig af, der enten skal også installeres eller opdateres.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="data.html#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;tidyverse)</span></span>
<span id="cb186-2"><a href="data.html#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>Du kan se, at det faktisk er ikke kun én, men otte pakke som er blevet indlæst. Man kan godt indlæse alle pakke individuelt ved at bruge fk. <code>library(dplyr)</code>, men det er meget bekvemt at indlæse alle på samme tid med brugen af <code>library(tidyverse)</code>. Her er nogle beskrivelser af de pakker:</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>pakke</th>
<th>korte beskrivelse</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>readr</code></td>
<td>indlæse data</td>
</tr>
<tr class="even">
<td><code>ggplot2</code></td>
<td>plot data</td>
</tr>
<tr class="odd">
<td><code>tibble</code></td>
<td>lave “tibbles” - <strong><em>tidyverse</em></strong>’s svar på datarammer (data.frame).</td>
</tr>
<tr class="even">
<td><code>tidyr</code></td>
<td>skifte imellem data forms (fk. ‘long’ &gt; ‘wide’ format, eller omvendt)</td>
</tr>
<tr class="odd">
<td><code>purrr</code></td>
<td>functional programming, gentalelse</td>
</tr>
<tr class="even">
<td><code>dplyr</code></td>
<td>manipulere tibbles - beholde delmængder, skabe nye variabler, beregne oversigtsstatistikker osv.</td>
</tr>
<tr class="odd">
<td><code>stringr</code></td>
<td>manipulere strings (ikke brugt i dette kursus)</td>
</tr>
<tr class="even">
<td><code>forcats</code></td>
<td>FOR CATegorical data (factors); håndtere faktor variabler</td>
</tr>
</tbody>
</table>
<p>Man kan også indlæse alle pakke individuelt ved at bruge fk. <code>library(dplyr)</code>, men det er meget bekvemt bare at indlæse alle på samme tid med brugen af <code>library(tidyverse)</code>.</p>
<div id="princippen-med-tidy-data" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Princippen med ‘tidy data’<a href="data.html#princippen-med-tidy-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Idéen bag <strong>tidyverse</strong> er, at hvis alle datasæt følger præcis den samme struktur, så er det ligefrem at bearbejde med vores data, til præcis som vi gerne vil have det. Datasæt som har den struktur hedder “tidy data.” For at betragte et datasæt som “tidy,” må det opfylde tre kriterie:</p>
<ul>
<li>Hver variabel i datasættet har sin egen kolonne</li>
<li>Hver observation i datasættet har sin egen række</li>
<li>Hver værdi i datasættet få sin egen cell</li>
</ul>
<p>Iris er et godt eksempel af <strong>tidy data</strong>:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="data.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb187-2"><a href="data.html#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris)</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
## 4          4.6         3.1          1.5         0.2  setosa
## 5          5.0         3.6          1.4         0.2  setosa
## 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<p>Hver variabel (<code>Sepal.Length</code>, <code>Sepal.Width</code>, <code>Petal.Length</code>, <code>Petal.Width</code> og <code>Species</code>) har sin egen kolon, og hver observation (e.g. 1,2,3, osv.) har sin egen række. Derudover har hver cell sin egen data værdi og det er dermed meget klart at læse og forstå dataframen ved øjnene.</p>
<div class="figure">
<img src="plots/tidy-1.png" style="width:100.0%" alt="" />
<p class="caption">Principper af tidy data</p>
</div>
<p>Det er tilfældet, at de fleste af datasæt i dette kursus hører til “tidy data,” især i disse notater, hvor vi benytter en del af indbygget datasæt. Nogle gange kan det dog være, at vi er nødt til at gøre noget, til at lave et datasæt om til en “tidy datasæt.” R-pakker <strong>dplyr</strong> og <strong>tidyr</strong> er velegnet til at hjælpe med at transformere et datasæt til en, der er “tidy,” og bagefter kan man forsætte i den sædvanlige måde med at analyse datasættet. Bemærk dog, at bar fordi et datasæt er “tidy,” betyder det ikke nødvendigvis, at det er klart til at analysere, for der kan godt være, at man har bruge for at filtrere eller rydde op i det. Pakken <strong>dplyr</strong> indeholder mange funktioner til at håndtere</p>
</div>
</div>
<div id="lidt-om-tibbles" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Lidt om <code>tibbles</code><a href="data.html#lidt-om-tibbles" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En <code>tibble</code> er det <code>tidyverse</code> svar på en <code>data.frame</code> fra base-R. De ligner hinanden meget og derfor skal man ikke tænk for meget over forskellen, men der er nogle opdateret aspekter i en <code>tibble</code> - for eksempel bruger en <code>tibble</code> ikke <code>row.names</code>, og når man visualiserer en <code>tibble</code> i R Markdown, få man lidt ekstra oplysninger, såsom dimensioner og data typer. Bemærk, at de fleste <code>tidyverse</code> funktioner fungerer lige så godt uanset om man har en <code>tibble</code> eller en <code>data.frame</code>. Bemærk, at jeg vedligeholder ordet ‘dataframe’ indenfor almindelig tekst.</p>
<p>Man kan lave sin egen <code>tibble</code> på samme måde som en <code>data.frame</code>.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="data.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">x=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="at">y=</span><span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##       x y    
##   &lt;int&gt; &lt;chr&gt;
## 1     1 a    
## 2     2 b    
## 3     3 c</code></pre>
<p>Man kan også lave en <code>tribble</code>, som er den samme som en <code>tibble</code> men har en lidt anderledes måde at indsætte data på. For eksempel er følgende tilsvarende til den overstående tibble:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="data.html#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tribble</span>(<span class="sc">~</span>x, <span class="sc">~</span>y,</span>
<span id="cb191-2"><a href="data.html#cb191-2" aria-hidden="true" tabindex="-1"></a>       <span class="dv">1</span>, <span class="st">&quot;a&quot;</span>,</span>
<span id="cb191-3"><a href="data.html#cb191-3" aria-hidden="true" tabindex="-1"></a>       <span class="dv">2</span>, <span class="st">&quot;b&quot;</span>,</span>
<span id="cb191-4"><a href="data.html#cb191-4" aria-hidden="true" tabindex="-1"></a>       <span class="dv">3</span>, <span class="st">&quot;c&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##       x y    
##   &lt;dbl&gt; &lt;chr&gt;
## 1     1 a    
## 2     2 b    
## 3     3 c</code></pre>
<p>Den fleste <code>tidyverse</code> kode fungerer lige så godt uanset om man har en <code>tibble</code> eller en <code>data.frame</code>.</p>
<p>Man kan lave en <code>data.frame</code> om til en <code>tibble</code> som i følgende:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="data.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>(iris)</span></code></pre></div>
<pre><code>## # A tibble: 150 × 5
##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
##  1          5.1         3.5          1.4         0.2 setosa 
##  2          4.9         3            1.4         0.2 setosa 
##  3          4.7         3.2          1.3         0.2 setosa 
##  4          4.6         3.1          1.5         0.2 setosa 
##  5          5           3.6          1.4         0.2 setosa 
##  6          5.4         3.9          1.7         0.4 setosa 
##  7          4.6         3.4          1.4         0.3 setosa 
##  8          5           3.4          1.5         0.2 setosa 
##  9          4.4         2.9          1.4         0.2 setosa 
## 10          4.9         3.1          1.5         0.1 setosa 
## # … with 140 more rows</code></pre>
</div>
<div id="transition-fra-base-til-tidyverse" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Transition fra base til tidyverse<a href="data.html#transition-fra-base-til-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Jeg introducerer <strong>tidyverse</strong> gennem et meget berømt datasæt som hedder <strong>titanic</strong> - det er ikke biologiske data men er stadigvæk ret interessant, og sjovt at manipulere på.</p>
<p><strong>titanic</strong> er brugt som en del af en åben konkurrence på hjemmesiden Kaggle, hvor mindst 31.000 personer indtil videre har arbejdet på at lave den bedste model til at forudsige, hvem der overlever katastrofen - linket er her, hvor du kan også læse om baggrunden til datasættet <a href="https://www.kaggle.com/c/titanic" class="uri">https://www.kaggle.com/c/titanic</a>.</p>
<div id="om-titanic-datasæt" class="section level3 hasAnchor" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Om <strong>Titanic</strong> datasæt<a href="data.html#om-titanic-datasæt" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Man kan downloade datasættet, der hedder <code>titanic_train</code>, direkte fra Kaggle, men der er faktisk en R-pakke, der hedder <code>titanic</code> som gøre det mere bekvemt:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="data.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;titanic&quot;) #hvis ikke allerede installerede</span></span>
<span id="cb195-2"><a href="data.html#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(titanic)</span></code></pre></div>
<p>Her er beskrivelsen for pakken:</p>
<p><em><strong>titanic</strong> is an R package containing data sets providing information on the fate of passengers on the fatal maiden voyage of the ocean liner “Titanic,” summarized according to economic status (class), sex, age and survival. These data sets are often used as an introduction to machine learning on Kaggle.</em></p>
<p>Vi vil gerne bruge <code>titanic_train</code> fordi det er datasættet, der bliver brugt på Kaggle til at træne maskinelærings modeller (som bliver testet på <code>titanic_test</code> for at evaluere, hvor god modellen er). Til at gøre tingene nemmere, lad os bare omdøb <code>titanic_train</code> til <code>titanic</code> og anvende <code>glimpse</code>, der er fra pakken <code>dplyr</code>, på datasættet.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="data.html#cb196-1" aria-hidden="true" tabindex="-1"></a>titanic <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(titanic_train)</span>
<span id="cb196-2"><a href="data.html#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(titanic)</span></code></pre></div>
<pre><code>## Rows: 891
## Columns: 12
## $ PassengerId &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,…
## $ Survived    &lt;int&gt; 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1…
## $ Pclass      &lt;int&gt; 3, 1, 3, 1, 3, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3, 2, 3, 3…
## $ Name        &lt;chr&gt; &quot;Braund, Mr. Owen Harris&quot;, &quot;Cumings, Mrs. John Bradley (Fl…
## $ Sex         &lt;chr&gt; &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;mal…
## $ Age         &lt;dbl&gt; 22, 38, 26, 35, 35, NA, 54, 2, 27, 14, 4, 58, 20, 39, 14, …
## $ SibSp       &lt;int&gt; 1, 1, 0, 1, 0, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4, 0, 1, 0…
## $ Parch       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1, 0, 0, 0…
## $ Ticket      &lt;chr&gt; &quot;A/5 21171&quot;, &quot;PC 17599&quot;, &quot;STON/O2. 3101282&quot;, &quot;113803&quot;, &quot;37…
## $ Fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 8.4583, 51.8625,…
## $ Cabin       &lt;chr&gt; &quot;&quot;, &quot;C85&quot;, &quot;&quot;, &quot;C123&quot;, &quot;&quot;, &quot;&quot;, &quot;E46&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;G6&quot;, &quot;C…
## $ Embarked    &lt;chr&gt; &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;Q&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;…</code></pre>
<p>Jeg har også kopieret de variable beskrivelser her:</p>
<ul>
<li>PassengerId: unique index for each passenger</li>
<li>Survived: Whether or not the passenger survived. 0 = No, 1 = Yes.</li>
<li>Pclass: Ticket class: 1 = 1st Class, 2 = 2nd Class, 3 = 3rd Class.</li>
<li>Name: A character string containing the name of each passenger.</li>
<li>Sex: Character strings for passenger sex (“male”/ “female”).</li>
<li>Age: Age in years.</li>
<li>SibSp: The number of siblings/spouses aboard the titanic with the passenger</li>
<li>Parch: The number of parents/children aboard the titanic with the passenger</li>
<li>Ticket: Another character string containing the ticket ID of the passenger.</li>
<li>Fare: The price paid for tickets in pounds Sterling (Keep in mind that unskilled workers made around 1 pound a week - these were expensive tickets!)</li>
<li>Cabin: The cabin number of the passengers (character).</li>
<li>Embarked: Where passengers boarded the titanic. C = Cherbourg, Q = Queenstown, S = Southampton).</li>
</ul>
</div>
<div id="titanic-oprydning" class="section level3 hasAnchor" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Titanic: oprydning<a href="data.html#titanic-oprydning" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Der er faktisk nogle rengøring i datasættet vi skal tage os af, før vi kan komme videre med analysen. Vi kan se fra <code>glimpse(titanic)</code> ovenpå at der er 891 observationer. De fleste (687) passagerer har faktisk ingenting for variabel <code>Cabin</code>:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="data.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(titanic<span class="sc">$</span>Cabin<span class="sc">==</span><span class="st">&quot;&quot;</span>) <span class="co">#ingenting for variabelen &#39;cabin&#39;</span></span></code></pre></div>
<pre><code>## [1] 687</code></pre>
<p>Andre har mere end én cabin. Det ser ikke særlig <strong>tidy</strong> ud, og man kan hellere ikke forestille sig at få meget insigt fra variablen, så vi vælger at fjerne hele kolon med funktionen <code>select()</code>:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="data.html#cb200-1" aria-hidden="true" tabindex="-1"></a>titanic_no_cabin <span class="ot">&lt;-</span> <span class="fu">select</span>(titanic, <span class="sc">-</span>Cabin) </span></code></pre></div>
<p><code>select()</code> er en af de kerne funktioner i <strong>tidyverse</strong> - her angiver vi, hvilke kolonner vi gerne vil beholde eller fjerne fra datasættet. I dette tilfælde har vi specificeret <code>-Cabin</code>, som betyder, at vi <em>ikke</em> vil have variablen <code>Cabin</code> med, men gerne vil beholde resten af kolonnerne. Prøv selv at køre <code>select(titanic, Cabin)</code> i stedet for - så får vi kun <code>Cabin</code> og fjerner resten af vores variabler.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="data.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(titanic_no_cabin)</span></code></pre></div>
<pre><code>## Rows: 891
## Columns: 11
## $ PassengerId &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,…
## $ Survived    &lt;int&gt; 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1, 0, 1…
## $ Pclass      &lt;int&gt; 3, 1, 3, 1, 3, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3, 2, 3, 3…
## $ Name        &lt;chr&gt; &quot;Braund, Mr. Owen Harris&quot;, &quot;Cumings, Mrs. John Bradley (Fl…
## $ Sex         &lt;chr&gt; &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;mal…
## $ Age         &lt;dbl&gt; 22, 38, 26, 35, 35, NA, 54, 2, 27, 14, 4, 58, 20, 39, 14, …
## $ SibSp       &lt;int&gt; 1, 1, 0, 1, 0, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4, 0, 1, 0…
## $ Parch       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1, 0, 0, 0…
## $ Ticket      &lt;chr&gt; &quot;A/5 21171&quot;, &quot;PC 17599&quot;, &quot;STON/O2. 3101282&quot;, &quot;113803&quot;, &quot;37…
## $ Fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 8.4583, 51.8625,…
## $ Embarked    &lt;chr&gt; &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;Q&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;…</code></pre>
<p>Næste tjekker vi efter <code>NA</code> i datasættet. <code>NA</code> er hvordan R betegner manglende værdier. Man kan se i følgende, mens de fleste variabler ikke har <code>NA</code> værdier, har variablen <code>Age</code> 177 <code>NA</code>.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="data.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(titanic_no_cabin))</span></code></pre></div>
<pre><code>## PassengerId    Survived      Pclass        Name         Sex         Age 
##           0           0           0           0           0         177 
##       SibSp       Parch      Ticket        Fare    Embarked 
##           0           0           0           0           0</code></pre>
<p>I dette tilfælde vælger jeg at fjerne alle passagerer som har <code>NA</code> i stedet for deres alder. Til dette formål bruger jeg funktionen <code>drop_na</code>, som fjerner alle observationer, der har <code>NA</code> i mindst èn variabel.</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="data.html#cb205-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(titanic_no_cabin)</span>
<span id="cb205-2"><a href="data.html#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(titanic_clean))</span></code></pre></div>
<pre><code>## PassengerId    Survived      Pclass        Name         Sex         Age 
##           0           0           0           0           0           0 
##       SibSp       Parch      Ticket        Fare    Embarked 
##           0           0           0           0           0</code></pre>
<p>Nu kan vi tjekke igen, hvor mange observationer og variabel vi har tilbage.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="data.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(titanic_clean)</span></code></pre></div>
<pre><code>## Rows: 714
## Columns: 11
## $ PassengerId &lt;int&gt; 1, 2, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19…
## $ Survived    &lt;int&gt; 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1…
## $ Pclass      &lt;int&gt; 3, 1, 3, 1, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3, 3, 2, 2, 3…
## $ Name        &lt;chr&gt; &quot;Braund, Mr. Owen Harris&quot;, &quot;Cumings, Mrs. John Bradley (Fl…
## $ Sex         &lt;chr&gt; &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;mal…
## $ Age         &lt;dbl&gt; 22, 38, 26, 35, 35, 54, 2, 27, 14, 4, 58, 20, 39, 14, 55, …
## $ SibSp       &lt;int&gt; 1, 1, 0, 1, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4, 1, 0, 0, 0…
## $ Parch       &lt;int&gt; 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1, 0, 0, 0, 0…
## $ Ticket      &lt;chr&gt; &quot;A/5 21171&quot;, &quot;PC 17599&quot;, &quot;STON/O2. 3101282&quot;, &quot;113803&quot;, &quot;37…
## $ Fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 51.8625, 21.0750…
## $ Embarked    &lt;chr&gt; &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;…</code></pre>
<p>Vi har beholdt 714 observationer og 11 variabler, og datasættet opfylder kriteren for at være <strong>tidy</strong>.</p>
</div>
<div id="pipe" class="section level3 hasAnchor" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> Pipe<a href="data.html#pipe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Man kan faktisk gøre den samme som i ovenstående ved at bruge pipe <code>%&gt;%</code>:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="data.html#cb209-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="ot">&lt;-</span> titanic <span class="sc">%&gt;%</span> <span class="co"># we take the titanic dataset</span></span>
<span id="cb209-2"><a href="data.html#cb209-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Cabin) <span class="sc">%&gt;%</span> <span class="co"># select the bits we want</span></span>
<span id="cb209-3"><a href="data.html#cb209-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drop_na</span>() <span class="co"># then remove the NAs</span></span></code></pre></div>
<p>Man bruger pipe <code>%&gt;%</code> til at kombinere adskillige tidyverse funktioner i den samme kommando - linjen slutter med <code>%&gt;%</code>, der fortæller, at vi skal bruge resultatet fra den linje som inputtet i den næste linje. Logikken er således, at vi starter med en dataframe, gør dernæst én ting ad gangen, og så slutter med en ny dataframe (som vi kan gemme med <code>&lt;-</code>).</p>
<p>Bemærk, at processen ligner den, man bruger i <strong>ggplot2</strong>, men forskellen er at man bruger <code>%&gt;%</code> i stedet for <code>+</code> i denne ramme. Bemærk også her, at ligesom i <strong>ggplot2</strong>, skriver jeg koden over flere linjer. Det er ikke et krav men det gøre det nemmere at læse og forstå koden.</p>
<p>For at illustrerer logikken, kan man se, at følgende to linjer er tilsvarende:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="data.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="co">#take x and apply some function f</span></span>
<span id="cb210-2"><a href="data.html#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(x)    <span class="co">#traditional approach</span></span>
<span id="cb210-3"><a href="data.html#cb210-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> f <span class="co">#tidyverse approach</span></span></code></pre></div>
<p>I begge tilfælde starter vi med <code>x</code>, og så anvender vi funktionen <code>f</code> med <code>x</code> som argument - en kæmpe fordel med den tidyverse løsning er, at når man har flere funktioner, slipper man for at anvende mange parenteser, og rækkefølgen man skriver funktionerne læses fra venstre til højre og ikke omvendt, se for eksempel følgende:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="data.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co">#take x, apply f, then apply g, then apply h</span></span>
<span id="cb211-2"><a href="data.html#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">h</span>(<span class="fu">g</span>(<span class="fu">f</span>(x)))          <span class="co">#traditional approach</span></span>
<span id="cb211-3"><a href="data.html#cb211-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> f <span class="sc">%&gt;%</span> g <span class="sc">%&gt;%</span> h <span class="co">#tidyverse approach</span></span></code></pre></div>
<p>På sammen måde i vores titanic oprydning kan man både pakke funktionen <code>select()</code> ind i funktionen <code>drop_na()</code>, eller bruge den <strong>tidyverse</strong> løsning, ligesom i nedenstående - de to giver det tilsvarende resultat: første bruger vi <code>select()</code> til at fjerne kolonnen <code>Cabin</code>, og så bruger vi <code>drop_na()</code> til at fjerne alle række med mindste én <code>NA</code> .</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="data.html#cb212-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(<span class="fu">select</span>(titanic,<span class="sc">-</span>Cabin))</span>
<span id="cb212-2"><a href="data.html#cb212-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-3"><a href="data.html#cb212-3" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="ot">&lt;-</span> titanic <span class="sc">%&gt;%</span> </span>
<span id="cb212-4"><a href="data.html#cb212-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Cabin) <span class="sc">%&gt;%</span></span>
<span id="cb212-5"><a href="data.html#cb212-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drop_na</span>() </span></code></pre></div>
</div>
</div>
<div id="bearbejdning-af-data-dplyr" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Bearbejdning af data: <code>dplyr</code><a href="data.html#bearbejdning-af-data-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Pakken <code>dplyr</code> er nok den meste brugbare pakke til at bearbejde dataframes. Jeg gennemgår nogle af de meste almindelige muligheder med pakken, og der er også en “cheatsheet” som du kan downloade som reference: <a href="https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf" class="uri">https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf</a>. Jeg tager afsæt i følgende funktioner, og dækker flere gennem de forskellige øvelese og øvrige emner.</p>
<table>
<thead>
<tr class="header">
<th>dplyr verbs</th>
<th>beskrivelse</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>select()</code></td>
<td>udvælge kolonner (<em>variabler</em>)</td>
</tr>
<tr class="even">
<td><code>filter()</code></td>
<td>udvælge rækker (<em>observationer</em>)</td>
</tr>
<tr class="odd">
<td><code>arrange()</code></td>
<td>sortere rækker</td>
</tr>
<tr class="even">
<td><code>mutate()</code></td>
<td>tilføje eller ændre eksisterende kolonner</td>
</tr>
<tr class="odd">
<td><code>rename()</code></td>
<td>ændre variabler navne</td>
</tr>
<tr class="even">
<td><code>recode()</code></td>
<td>ændre selve data</td>
</tr>
<tr class="odd">
<td><code>group_by()</code></td>
<td>dele datasættet op efter en variabel</td>
</tr>
<tr class="even">
<td><code>summarise()</code></td>
<td>aggregere rækker, findes ofte tilknyttet til <code>group_by()</code></td>
</tr>
</tbody>
</table>
<p>Bemærk, at alle disse funktioner tager udgangspunkt i en dataframe, og man får altid en ny dataframe som outputtet. Ved at kunne bruge disse funktioner og kombinere dem (ved hjælp af <code>%&gt;%</code>), har man godt styr på bearbejdningen af datarammer.</p>
<div id="dplyr-verbs-select" class="section level3 hasAnchor" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> dplyr verbs: <code>select()</code><a href="data.html#dplyr-verbs-select" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Som vi lige har set i ovenstående, med <code>select()</code> udvælger man bestemte <strong>variabler</strong>. Vi kan vælger at beholde, fjerne eller andre rækkefølgen af variablerne i dataframe. Som eksempel, her beholder vi kun variablerne <code>Name</code> og <code>Age</code>:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="data.html#cb213-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb213-2"><a href="data.html#cb213-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Name, Age) <span class="sc">%&gt;%</span></span>
<span id="cb213-3"><a href="data.html#cb213-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 714
## Columns: 2
## $ Name &lt;chr&gt; &quot;Braund, Mr. Owen Harris&quot;, &quot;Cumings, Mrs. John Bradley (Florence …
## $ Age  &lt;dbl&gt; 22, 38, 26, 35, 35, 54, 2, 27, 14, 4, 58, 20, 39, 14, 55, 2, 31, …</code></pre>
<p>Hvis vi gerne vil fjerne en variabel fra en dataframe, kan vi bruge et minustegn. I nedenstående fjerner vi <code>Name</code> og <code>Age</code> fra dataframe:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="data.html#cb215-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb215-2"><a href="data.html#cb215-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Name, <span class="sc">-</span>Age) <span class="sc">%&gt;%</span></span>
<span id="cb215-3"><a href="data.html#cb215-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 714
## Columns: 9
## $ PassengerId &lt;int&gt; 1, 2, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19…
## $ Survived    &lt;int&gt; 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1…
## $ Pclass      &lt;int&gt; 3, 1, 3, 1, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3, 3, 2, 2, 3…
## $ Sex         &lt;chr&gt; &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;mal…
## $ SibSp       &lt;int&gt; 1, 1, 0, 1, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4, 1, 0, 0, 0…
## $ Parch       &lt;int&gt; 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1, 0, 0, 0, 0…
## $ Ticket      &lt;chr&gt; &quot;A/5 21171&quot;, &quot;PC 17599&quot;, &quot;STON/O2. 3101282&quot;, &quot;113803&quot;, &quot;37…
## $ Fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 51.8625, 21.0750…
## $ Embarked    &lt;chr&gt; &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;…</code></pre>
</div>
<div id="dplyr-verbs-filter" class="section level3 hasAnchor" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> dplyr verbs: <code>filter()</code><a href="data.html#dplyr-verbs-filter" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Med funktionen <code>select()</code> udvælger man bestemte <strong>variabler</strong>. Man anvender til gengæld funktionen <code>filter()</code> til at udvælge bestemte <strong>observationer</strong> (rækker) fra dataframe. I nedenstående beholder jeg rækkerne, hvor variablen <code>Age</code> er lig med 50. Bemærk, at vi bevarer alle variabler i dataframe.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="data.html#cb217-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb217-2"><a href="data.html#cb217-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age <span class="sc">==</span> <span class="dv">50</span>) <span class="sc">%&gt;%</span></span>
<span id="cb217-3"><a href="data.html#cb217-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 10
## Columns: 11
## $ PassengerId &lt;int&gt; 178, 260, 300, 435, 459, 483, 527, 545, 661, 724
## $ Survived    &lt;int&gt; 0, 1, 1, 0, 1, 0, 1, 0, 1, 0
## $ Pclass      &lt;int&gt; 1, 2, 1, 1, 2, 3, 2, 1, 1, 2
## $ Name        &lt;chr&gt; &quot;Isham, Miss. Ann Elizabeth&quot;, &quot;Parrish, Mrs. (Lutie Davis)…
## $ Sex         &lt;chr&gt; &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;male&quot;, &quot;female&quot;, &quot;male&quot;, &quot;f…
## $ Age         &lt;dbl&gt; 50, 50, 50, 50, 50, 50, 50, 50, 50, 50
## $ SibSp       &lt;int&gt; 0, 0, 0, 1, 0, 0, 0, 1, 2, 0
## $ Parch       &lt;int&gt; 0, 1, 1, 0, 0, 0, 0, 0, 0, 0
## $ Ticket      &lt;chr&gt; &quot;PC 17595&quot;, &quot;230433&quot;, &quot;PC 17558&quot;, &quot;13507&quot;, &quot;F.C.C. 13531&quot;,…
## $ Fare        &lt;dbl&gt; 28.7125, 26.0000, 247.5208, 55.9000, 10.5000, 8.0500, 10.5…
## $ Embarked    &lt;chr&gt; &quot;C&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;</code></pre>
<p>Man kan også vælge intervaller - for eksempel hvis man vil vælge alle som er i halvtredserne.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="data.html#cb219-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb219-2"><a href="data.html#cb219-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age <span class="sc">&gt;=</span> <span class="dv">50</span> <span class="sc">&amp;</span> Age <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb219-3"><a href="data.html#cb219-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 11
##   PassengerId Survived Pclass Name          Sex     Age SibSp Parch Ticket  Fare
##         &lt;int&gt;    &lt;int&gt;  &lt;int&gt; &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1           7        0      1 &quot;McCarthy, M… male     54     0     0 17463  51.9 
## 2          12        1      1 &quot;Bonnell, Mi… fema…    58     0     0 113783 26.6 
## 3          16        1      2 &quot;Hewlett, Mr… fema…    55     0     0 248706 16   
## 4          95        0      3 &quot;Coxon, Mr. … male     59     0     0 364500  7.25
## 5         125        0      1 &quot;White, Mr. … male     54     0     1 35281  77.3 
## 6         151        0      2 &quot;Bateman, Re… male     51     0     0 S.O.P… 12.5 
## # … with 1 more variable: Embarked &lt;chr&gt;</code></pre>
<p>Man kan også kombinere betingelser fra forskellige kolonner, for eksempel i nedenstående vælger vi alle personer som er kvinder <strong>og</strong> som rejste ved første klasse.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="data.html#cb221-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb221-2"><a href="data.html#cb221-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="st">&#39;female&#39;</span> <span class="sc">&amp;</span> Pclass <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb221-3"><a href="data.html#cb221-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 11
##   PassengerId Survived Pclass Name          Sex     Age SibSp Parch Ticket  Fare
##         &lt;int&gt;    &lt;int&gt;  &lt;int&gt; &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1           2        1      1 Cumings, Mrs… fema…    38     1     0 PC 17…  71.3
## 2           4        1      1 Futrelle, Mr… fema…    35     1     0 113803  53.1
## 3          12        1      1 Bonnell, Mis… fema…    58     0     0 113783  26.6
## 4          53        1      1 Harper, Mrs.… fema…    49     1     0 PC 17…  76.7
## 5          62        1      1 Icard, Miss.… fema…    38     0     0 113572  80  
## 6          89        1      1 Fortune, Mis… fema…    23     3     2 19950  263  
## # … with 1 more variable: Embarked &lt;chr&gt;</code></pre>
<p>Vi kan også inddrage flere symboler. For eksempel i nedenståenden vælger vi personer som er kvinder <strong>og</strong> som rejste i <strong>enten</strong> første eller anden klass <strong>og</strong> som er <strong>i</strong> trediverne. Huske at tilføje runde parenteser omkring de to <code>Pclass</code> - prøv selv at fjerne dem og se, hvad der sker.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="data.html#cb223-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb223-2"><a href="data.html#cb223-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="st">&#39;female&#39;</span> <span class="sc">&amp;</span> (Pclass <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> Pclass <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">&amp;</span> Age <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">30</span><span class="sc">:</span><span class="dv">39</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb223-3"><a href="data.html#cb223-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 43
## Columns: 11
## $ PassengerId &lt;int&gt; 2, 4, 62, 99, 191, 212, 216, 219, 231, 258, 259, 270, 310,…
## $ Survived    &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1…
## $ Pclass      &lt;int&gt; 1, 1, 1, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 1, 2…
## $ Name        &lt;chr&gt; &quot;Cumings, Mrs. John Bradley (Florence Briggs Thayer)&quot;, &quot;Fu…
## $ Sex         &lt;chr&gt; &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;…
## $ Age         &lt;dbl&gt; 38, 35, 38, 34, 32, 35, 31, 32, 35, 30, 35, 35, 30, 31, 30…
## $ SibSp       &lt;int&gt; 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0…
## $ Parch       &lt;int&gt; 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0…
## $ Ticket      &lt;chr&gt; &quot;PC 17599&quot;, &quot;113803&quot;, &quot;113572&quot;, &quot;231919&quot;, &quot;234604&quot;, &quot;F.C.C…
## $ Fare        &lt;dbl&gt; 71.2833, 53.1000, 80.0000, 23.0000, 13.0000, 21.0000, 113.…
## $ Embarked    &lt;chr&gt; &quot;C&quot;, &quot;S&quot;, &quot;&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;,…</code></pre>
</div>
<div id="comparitiver-reference" class="section level3 hasAnchor" number="5.6.3">
<h3><span class="header-section-number">5.6.3</span> Comparitiver reference<a href="data.html#comparitiver-reference" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Her er en tabel af comparitiver.</p>
<table>
<thead>
<tr class="header">
<th>comparitive</th>
<th>beskrivelse</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;</code></td>
<td>less than</td>
</tr>
<tr class="even">
<td><code>&gt;</code></td>
<td>greater than</td>
</tr>
<tr class="odd">
<td><code>&lt;=</code></td>
<td>less than or equal to</td>
</tr>
<tr class="even">
<td><code>&gt;=</code></td>
<td>greater than or equal to</td>
</tr>
<tr class="odd">
<td><code>==</code></td>
<td>equal to</td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>not equal to</td>
</tr>
<tr class="odd">
<td><code>&amp;</code></td>
<td>and</td>
</tr>
<tr class="even">
<td><code>%in%</code></td>
<td>in</td>
</tr>
<tr class="odd">
<td><code>|</code></td>
<td>or</td>
</tr>
</tbody>
</table>
</div>
<div id="kombinere-filter-og-select" class="section level3 hasAnchor" number="5.6.4">
<h3><span class="header-section-number">5.6.4</span> Kombinere <code>filter()</code> og <code>select()</code><a href="data.html#kombinere-filter-og-select" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Man kan også kombinere både <code>filter()</code> og <code>select()</code> i samme kommando, som i følgende:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="data.html#cb225-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb225-2"><a href="data.html#cb225-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="st">&#39;female&#39;</span> <span class="sc">&amp;</span> (Pclass <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> Pclass <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">&amp;</span> Age <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">30</span><span class="sc">:</span><span class="dv">39</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb225-3"><a href="data.html#cb225-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Name, Fare)  <span class="sc">%&gt;%</span> </span>
<span id="cb225-4"><a href="data.html#cb225-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 43
## Columns: 2
## $ Name &lt;chr&gt; &quot;Cumings, Mrs. John Bradley (Florence Briggs Thayer)&quot;, &quot;Futrelle,…
## $ Fare &lt;dbl&gt; 71.2833, 53.1000, 80.0000, 23.0000, 13.0000, 21.0000, 113.2750, 7…</code></pre>
<p>Bemærk at man bør passe på rækkefølgen, som man anvender de forskellige funktioner. For eksempel hvis man bytter rundt <code>filter()</code> og <code>select()</code> i ovenstående, få man en advarsel - prøv selv at køre følgende:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="data.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="do">##virker ikke!!!!!#####</span></span>
<span id="cb227-2"><a href="data.html#cb227-2" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb227-3"><a href="data.html#cb227-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Name, Fare)  <span class="sc">%&gt;%</span> </span>
<span id="cb227-4"><a href="data.html#cb227-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="st">&#39;female&#39;</span> <span class="sc">&amp;</span> (Pclass <span class="sc">==</span> <span class="dv">1</span> <span class="sc">|</span> Pclass <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">&amp;</span> Age <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">30</span><span class="sc">:</span><span class="dv">39</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb227-5"><a href="data.html#cb227-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glimpse</span>()</span></code></pre></div>
<p>Det er fordi, hvis man første vælger at beholde variablerne <code>Name</code> og <code>Age</code>, så findes de andre variabler ikke mere i de resulterende dataframe, som bliver dernæst brugt i funktionen <code>filter()</code> - man kan derfor ikke benytte funktionen <code>filter()</code> på variablerne <code>Pclass</code>,<code>Sex</code> og <code>Age</code>.</p>
</div>
<div id="dplyr-verbs-mutate" class="section level3 hasAnchor" number="5.6.5">
<h3><span class="header-section-number">5.6.5</span> dplyr verbs: <code>mutate()</code><a href="data.html#dplyr-verbs-mutate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Man kan avende funktionen <code>mutate()</code> til at tilføje en ny variable til en dataframe. I nedenstående tilføjer jeg en ny variabel med navnet <code>Adult</code>, der angiver om personen kan betragtes som en voksen (hvis vedkommende er mindst 18 år gammel).</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="data.html#cb228-1" aria-hidden="true" tabindex="-1"></a>titanic_with_Adult <span class="ot">&lt;-</span> titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb228-2"><a href="data.html#cb228-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Adult =</span> Age<span class="sc">&gt;=</span><span class="dv">18</span>)</span>
<span id="cb228-3"><a href="data.html#cb228-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-4"><a href="data.html#cb228-4" aria-hidden="true" tabindex="-1"></a>titanic_with_Adult <span class="sc">%&gt;%</span> <span class="fu">select</span>(Adult) <span class="sc">%&gt;%</span> glimpse </span></code></pre></div>
<pre><code>## Rows: 714
## Columns: 1
## $ Adult &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, TRUE, FALSE, FALSE, T…</code></pre>
<p>#Så kan man se, at der er 601 voksne og 113 børn som passagerere på skibet.</p>
<p>Bemærk her, at jeg gemmer resultatet som en ny dataframe, der hedder <code>titanic_with_Adult</code>, og derefter bruger jeg <code>glimpse()</code> på det nye objekt <code>titanic_with_Adult</code> for at se, hvordan min nye dataframe ser ud. I forudgående eksempler havde jeg ikke gemt resultatet - bare brugt <code>glimpse()</code> for at se resultatet på skærmen. <strong>Hvis du gerne vil bruge din resulterende dataframe videre, så skal du husk at gemme den (med brugen af <code>&lt;-</code> tegn)</strong></p>
<p><strong>funktionen <code>ifelse()</code> indenfor <code>mutate()</code></strong></p>
<p>Jeg kan oprette variablen <code>Adult</code> sådan at den er mere informativ end bare <code>TRUE</code> eller <code>FALSE</code>. Jeg anvender funktionen <code>ifelse()</code>, der giver mulighed for at angive, at jeg gerne vil have teksten “adult” hvis udsagnet <code>Age&gt;=18</code> er TRUE, og hvis FALSE vil jeg have teksten “child”:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="data.html#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(Age<span class="sc">&gt;=</span><span class="dv">18</span>,<span class="st">&quot;adult&quot;</span>,<span class="st">&quot;child&quot;</span>)</span></code></pre></div>
<p>Fuktionen <code>ifelse()</code> bruges indenfor funktionen <code>mutate()</code>, fordi vi er i gang med at oprette en ny variable <code>Adult</code> - <code>ifelse()</code> giver bare mulighed for at fortælle, hvordan den nye variablen skal ser ud.</p>
<!-- mere informativ Adult kolonne -->
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="data.html#cb231-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb231-2"><a href="data.html#cb231-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Adult =</span> <span class="fu">ifelse</span>(Age<span class="sc">&gt;=</span><span class="dv">18</span>,<span class="st">&quot;adult&quot;</span>,<span class="st">&quot;child&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb231-3"><a href="data.html#cb231-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Age,Adult) <span class="sc">%&gt;%</span></span>
<span id="cb231-4"><a href="data.html#cb231-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 714
## Columns: 2
## $ Age   &lt;dbl&gt; 22, 38, 26, 35, 35, 54, 2, 27, 14, 4, 58, 20, 39, 14, 55, 2, 31,…
## $ Adult &lt;chr&gt; &quot;adult&quot;, &quot;adult&quot;, &quot;adult&quot;, &quot;adult&quot;, &quot;adult&quot;, &quot;adult&quot;, &quot;child&quot;, &quot;…</code></pre>
<p>Så er variablen lidt mere informativ end før.</p>
</div>
<div id="rename" class="section level3 hasAnchor" number="5.6.6">
<h3><span class="header-section-number">5.6.6</span> <code>rename()</code><a href="data.html#rename" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Man kan bruge <code>rename()</code> til at ændre navnet på en eller flere variabler i datasættet. Som eksempel bruger jeg <code>rename()</code> til at give en variable navnet <code>Years</code> i stedet for <code>Age</code> (bemærk at variablen <code>Age</code> findes ikke længere).</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="data.html#cb233-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span></span>
<span id="cb233-2"><a href="data.html#cb233-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Years =</span> Age) <span class="sc">%&gt;%</span></span>
<span id="cb233-3"><a href="data.html#cb233-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 714
## Columns: 11
## $ PassengerId &lt;int&gt; 1, 2, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19…
## $ Survived    &lt;int&gt; 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1…
## $ Pclass      &lt;int&gt; 3, 1, 3, 1, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3, 3, 2, 2, 3…
## $ Name        &lt;chr&gt; &quot;Braund, Mr. Owen Harris&quot;, &quot;Cumings, Mrs. John Bradley (Fl…
## $ Sex         &lt;chr&gt; &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;mal…
## $ Years       &lt;dbl&gt; 22, 38, 26, 35, 35, 54, 2, 27, 14, 4, 58, 20, 39, 14, 55, …
## $ SibSp       &lt;int&gt; 1, 1, 0, 1, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4, 1, 0, 0, 0…
## $ Parch       &lt;int&gt; 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1, 0, 0, 0, 0…
## $ Ticket      &lt;chr&gt; &quot;A/5 21171&quot;, &quot;PC 17599&quot;, &quot;STON/O2. 3101282&quot;, &quot;113803&quot;, &quot;37…
## $ Fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 51.8625, 21.0750…
## $ Embarked    &lt;chr&gt; &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;…</code></pre>
<p>Man kan også ændre navne på flere kolonner samtidigt - for eksempel, i følgende laver jeg nogle oversættelsesarbejde:</p>
<!-- Ændre navne på flere kolonner på én gang -->
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="data.html#cb235-1" aria-hidden="true" tabindex="-1"></a>titanic_clean_dansk <span class="ot">&lt;-</span> titanic_clean <span class="sc">%&gt;%</span></span>
<span id="cb235-2"><a href="data.html#cb235-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Overlevede =</span> Survived,</span>
<span id="cb235-3"><a href="data.html#cb235-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">Navn =</span> Name,</span>
<span id="cb235-4"><a href="data.html#cb235-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">Klasse =</span> Pclass)</span></code></pre></div>
<p>Så du kan se, at jeg har ændrede de variabler navne. Jeg kalder den nye dataframe for <code>titanic_clean_dansk</code>, så jeg min danske udgave er blevet gemt et sted.</p>
<p>Man kan også gøre sådan, at man har kun små bogstaver i de variabler navne. Jeg benytter den danske version, og Jeg anvender <code>rename_with()</code> og specificerer <code>tolower</code>.</p>
<!-- Ændre navne til små bogstaver -->
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="data.html#cb236-1" aria-hidden="true" tabindex="-1"></a>titanic_clean_dansk <span class="sc">%&gt;%</span></span>
<span id="cb236-2"><a href="data.html#cb236-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(tolower)  <span class="sc">%&gt;%</span> <span class="co">#all variable names are lower case only</span></span>
<span id="cb236-3"><a href="data.html#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>() </span></code></pre></div>
<pre><code>## Rows: 714
## Columns: 11
## $ passengerid &lt;int&gt; 1, 2, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19…
## $ overlevede  &lt;int&gt; 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1…
## $ klasse      &lt;int&gt; 3, 1, 3, 1, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3, 3, 2, 2, 3…
## $ navn        &lt;chr&gt; &quot;Braund, Mr. Owen Harris&quot;, &quot;Cumings, Mrs. John Bradley (Fl…
## $ sex         &lt;chr&gt; &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;mal…
## $ age         &lt;dbl&gt; 22, 38, 26, 35, 35, 54, 2, 27, 14, 4, 58, 20, 39, 14, 55, …
## $ sibsp       &lt;int&gt; 1, 1, 0, 1, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4, 1, 0, 0, 0…
## $ parch       &lt;int&gt; 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1, 0, 0, 0, 0…
## $ ticket      &lt;chr&gt; &quot;A/5 21171&quot;, &quot;PC 17599&quot;, &quot;STON/O2. 3101282&quot;, &quot;113803&quot;, &quot;37…
## $ fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 51.8625, 21.0750…
## $ embarked    &lt;chr&gt; &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;…</code></pre>
<p>Prøv også at erstatte <code>tolower</code> med <code>toupper</code>.</p>
</div>
<div id="dplyr-verbs-recode" class="section level3 hasAnchor" number="5.6.7">
<h3><span class="header-section-number">5.6.7</span> dplyr verbs: <code>recode()</code><a href="data.html#dplyr-verbs-recode" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Med <code>recode()</code> kan man ændre hvordan en variable ser ud - fk. male/female kan ændres til 0/1, som i følgende.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="data.html#cb238-1" aria-hidden="true" tabindex="-1"></a> titanic_clean <span class="sc">%&gt;%</span></span>
<span id="cb238-2"><a href="data.html#cb238-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">Sex =</span> <span class="fu">recode</span>(Sex,  <span class="st">&quot;male&quot;</span> <span class="ot">=</span> <span class="dv">0</span>, <span class="st">&quot;female&quot;</span> <span class="ot">=</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb238-3"><a href="data.html#cb238-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">select</span>(PassengerId,Name,Sex) <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 714
## Columns: 3
## $ PassengerId &lt;int&gt; 1, 2, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19…
## $ Name        &lt;chr&gt; &quot;Braund, Mr. Owen Harris&quot;, &quot;Cumings, Mrs. John Bradley (Fl…
## $ Sex         &lt;dbl&gt; 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1…</code></pre>
<p>Bemærk den måde, at funktionen <code>recode()</code> er blevet brugt indenfor funktionen <code>mutate()</code>: jeg lavede en ny variable af samme navn, men med ændret værdier indenfor variablen.</p>
<p>Hvis vi gerne vil skifter omvendt fra 0/1 til male/female er vi nødt til at skrive <code>1</code> / <code>0</code> for at specificie at vi har værdier som er tal, og vi gerne vil kalde dem for nogle andet (“male”/“female” i dette tilfælde):</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="data.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="co">#recodes variable Sex and then recodes it back to original form again</span></span>
<span id="cb240-2"><a href="data.html#cb240-2" aria-hidden="true" tabindex="-1"></a> titanic_clean <span class="sc">%&gt;%</span></span>
<span id="cb240-3"><a href="data.html#cb240-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">Sex =</span> <span class="fu">recode</span>(Sex,  <span class="at">male =</span> <span class="dv">1</span>, <span class="at">female =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb240-4"><a href="data.html#cb240-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">Sex =</span> <span class="fu">recode</span>(Sex,  <span class="st">`</span><span class="at">1</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;male&quot;</span>, <span class="st">`</span><span class="at">0</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;female&quot;</span>)) <span class="sc">%&gt;%</span> <span class="co">#note use of `` in the numbers </span></span>
<span id="cb240-5"><a href="data.html#cb240-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">select</span>(PassengerId,Name,Sex) <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 714
## Columns: 3
## $ PassengerId &lt;int&gt; 1, 2, 3, 4, 5, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 19…
## $ Name        &lt;chr&gt; &quot;Braund, Mr. Owen Harris&quot;, &quot;Cumings, Mrs. John Bradley (Fl…
## $ Sex         &lt;chr&gt; &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;mal…</code></pre>
</div>
<div id="dplyr-verbs-arrange" class="section level3 hasAnchor" number="5.6.8">
<h3><span class="header-section-number">5.6.8</span> dplyr verbs: <code>arrange()</code><a href="data.html#dplyr-verbs-arrange" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Man anvender <code>arrange()</code> for at vælge rækkefølgen på observationerne. I nedenstående tager vi datarammen <code>titanic_clean</code> og arrangerer observationer efter variablen <code>Fare</code>. Det sker således at, personer som betalt mindst er på toppen af de resultarende dataramme, og personer som betalt mest er på bunden.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="data.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange by increasing Fare</span></span>
<span id="cb242-2"><a href="data.html#cb242-2" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span></span>
<span id="cb242-3"><a href="data.html#cb242-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Fare) <span class="sc">%&gt;%</span></span>
<span id="cb242-4"><a href="data.html#cb242-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 714
## Columns: 11
## $ PassengerId &lt;int&gt; 180, 264, 272, 303, 598, 807, 823, 379, 873, 327, 844, 819…
## $ Survived    &lt;int&gt; 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0…
## $ Pclass      &lt;int&gt; 3, 1, 3, 3, 3, 1, 1, 3, 1, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3…
## $ Name        &lt;chr&gt; &quot;Leonard, Mr. Lionel&quot;, &quot;Harrison, Mr. William&quot;, &quot;Tornquist…
## $ Sex         &lt;chr&gt; &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;m…
## $ Age         &lt;dbl&gt; 36.0, 40.0, 25.0, 19.0, 49.0, 39.0, 38.0, 20.0, 33.0, 61.0…
## $ SibSp       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0…
## $ Parch       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ Ticket      &lt;chr&gt; &quot;LINE&quot;, &quot;112059&quot;, &quot;LINE&quot;, &quot;LINE&quot;, &quot;LINE&quot;, &quot;112050&quot;, &quot;19972…
## $ Fare        &lt;dbl&gt; 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 0.0000, 4.…
## $ Embarked    &lt;chr&gt; &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;S&quot;…</code></pre>
<p>Hvis man gerne vil få det omvendt - at personer som betalt mest er på toppen af datarammen, kan man bruge <code>desc()</code> omkring <code>Fare</code>, som i nedenstående:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="data.html#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange by decreasing Fare</span></span>
<span id="cb244-2"><a href="data.html#cb244-2" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span></span>
<span id="cb244-3"><a href="data.html#cb244-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Fare)) <span class="sc">%&gt;%</span></span>
<span id="cb244-4"><a href="data.html#cb244-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 714
## Columns: 11
## $ PassengerId &lt;int&gt; 259, 680, 738, 28, 89, 342, 439, 312, 743, 119, 300, 381, …
## $ Survived    &lt;int&gt; 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1…
## $ Pclass      &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ Name        &lt;chr&gt; &quot;Ward, Miss. Anna&quot;, &quot;Cardeza, Mr. Thomas Drake Martinez&quot;, …
## $ Sex         &lt;chr&gt; &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;mal…
## $ Age         &lt;dbl&gt; 35.00, 36.00, 35.00, 19.00, 23.00, 24.00, 64.00, 18.00, 21…
## $ SibSp       &lt;int&gt; 0, 0, 0, 3, 3, 3, 1, 2, 2, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1…
## $ Parch       &lt;int&gt; 0, 1, 0, 2, 2, 2, 4, 2, 2, 1, 1, 0, 0, 0, 2, 1, 0, 1, 2, 1…
## $ Ticket      &lt;chr&gt; &quot;PC 17755&quot;, &quot;PC 17755&quot;, &quot;PC 17755&quot;, &quot;19950&quot;, &quot;19950&quot;, &quot;199…
## $ Fare        &lt;dbl&gt; 512.3292, 512.3292, 512.3292, 263.0000, 263.0000, 263.0000…
## $ Embarked    &lt;chr&gt; &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;…</code></pre>
</div>
</div>
<div id="visualisering-bruge-som-input-i-ggplot2" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Visualisering: bruge som input i ggplot2<a href="data.html#visualisering-bruge-som-input-i-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Efter man har lavet bearbejdning med tidyverse kommandoer, kan man specificere de resulterende dataframe som data i funktionen <code>ggplot()</code>. Man benytter <code>%&gt;%</code> til at forbinde de <code>dpylr</code> kommandoer med den <code>ggplot</code> funktion, og I dette tilfælde behøver man ikke at angive navnet på datasættet indenfor funktionen <code>ggplot</code>. I nedenstående eksempel tager jeg udgangspunkt i <code>titanic_clean</code> og så laver jeg et barplot som viser antallet af passagerer som rejste i hver af de tre klass.</p>
<!-- Tag titanic_clean og lave et barplot -->
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="data.html#cb246-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb246-2"><a href="data.html#cb246-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Pclass,<span class="at">fill=</span><span class="fu">as.factor</span>(Pclass))) <span class="sc">+</span> </span>
<span id="cb246-3"><a href="data.html#cb246-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;count&quot;</span>) <span class="sc">+</span></span>
<span id="cb246-4"><a href="data.html#cb246-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="visualisering_22_files/figure-html/unnamed-chunk-234-1.png" width="288" /></p>
<p>Jeg gør det lidt mere kompliceret i følgende, ved at tage <code>titanic_clean</code>, lave en ny kolon der hedder <code>Adult</code>, og så bruge den resulterende dataframe med funktionen <code>ggplot</code>, hvor jeg laver et plot med <code>Adult</code> på x-aksen for at tælle op antallet af voksne og børn.</p>
<!-- Lave Adult kolon og lave et barplot -->
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="data.html#cb247-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb247-2"><a href="data.html#cb247-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">Adult =</span> <span class="fu">ifelse</span>(Age<span class="sc">&gt;=</span><span class="dv">18</span>,<span class="st">&quot;Adult&quot;</span>,<span class="st">&quot;Child&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb247-3"><a href="data.html#cb247-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>Adult,<span class="at">fill=</span>Adult)) <span class="sc">+</span> </span>
<span id="cb247-4"><a href="data.html#cb247-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;count&quot;</span>) <span class="sc">+</span> </span>
<span id="cb247-5"><a href="data.html#cb247-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="visualisering_22_files/figure-html/unnamed-chunk-235-1.png" width="288" /></p>
<p>Så viser det, at der var 600 Adults og lidt over 100 Children ombord skibet.</p>
</div>
<div id="problemstillinger-4" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Problemstillinger<a href="data.html#problemstillinger-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>1</strong>) Lav quizzen på Absalon - “Quiz - tidyverse - part 1”</p>
<p><em>Vi øver os med titanic. Inlæs de data og lave oprydningen med følgende kode:</em></p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="data.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb248-2"><a href="data.html#cb248-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(titanic)</span>
<span id="cb248-3"><a href="data.html#cb248-3" aria-hidden="true" tabindex="-1"></a>titanic <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(titanic_train)</span>
<span id="cb248-4"><a href="data.html#cb248-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-5"><a href="data.html#cb248-5" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="ot">&lt;-</span> titanic <span class="sc">%&gt;%</span> </span>
<span id="cb248-6"><a href="data.html#cb248-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>Cabin) <span class="sc">%&gt;%</span> </span>
<span id="cb248-7"><a href="data.html#cb248-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb248-8"><a href="data.html#cb248-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Adult =</span> <span class="fu">ifelse</span>(Age<span class="sc">&gt;=</span><span class="dv">18</span>,<span class="st">&quot;adult&quot;</span>,<span class="st">&quot;child&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb248-9"><a href="data.html#cb248-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Survived =</span> <span class="fu">recode</span>(Survived,  <span class="st">`</span><span class="at">1</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;yes&quot;</span>, <span class="st">`</span><span class="at">0</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;yes&quot;</span>)) </span>
<span id="cb248-10"><a href="data.html#cb248-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb248-11"><a href="data.html#cb248-11" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(titanic_clean) <span class="co">#take a look!</span></span>
<span id="cb248-12"><a href="data.html#cb248-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-13"><a href="data.html#cb248-13" aria-hidden="true" tabindex="-1"></a><span class="co">#todo: make survived into a factor</span></span>
<span id="cb248-14"><a href="data.html#cb248-14" aria-hidden="true" tabindex="-1"></a><span class="co">#recode embarked so we have the place names</span></span>
<span id="cb248-15"><a href="data.html#cb248-15" aria-hidden="true" tabindex="-1"></a><span class="co">#include ifelse and count</span></span></code></pre></div>
<!-- `count()` Tæller op observationer. -->
<!-- ```{r} -->
<!-- titanic %>% -->
<!--   filter(Sex %in% c("female","male")) %>% -->
<!--   count(Sex) %>% -->
<!--   head() -->
<!-- ``` -->
<p><strong>2</strong>) <code>select()</code>. Fjern variablen <code>Name</code> fra <code>titanic_clean</code>.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="data.html#cb249-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb249-2"><a href="data.html#cb249-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(...) <span class="co">#redigere her</span></span></code></pre></div>
<ul>
<li>Tilføj også <code>head()</code> for at få kun de første 6 rækker</li>
<li>Prøv at erstatte <code>head()</code> med <code>glimpse()</code> - det er bare en anden måde at kigge på datarammen.</li>
</ul>
<p><strong>3</strong>) <code>select()</code>. Lave en ny dataramme fra <code>titanic_clean</code> med kun variabler <code>Name</code>, <code>Pclass</code> og <code>Fare</code>.</p>
<ul>
<li>Gør det en forskel, hvilke rækkefølger man skriver <code>Name</code>, <code>Pclass</code> og <code>Fare</code>?</li>
</ul>
<p><strong>4</strong>) <code>select()</code>. I stedet for at specificere bestemt kolonner navn, skriv <code>starts_with("S")</code> indenfor <code>select()</code>. Hvad sker der?</p>
<ul>
<li>Prøve også <code>contains("ar")</code></li>
</ul>
<p><strong>5</strong>) <code>filter()</code>. Lave en ny dataramme fra <code>titanic_clean</code> med alle personer som er <code>male</code> og over 30 år gammel.</p>
<p><strong>6</strong>) <code>filter()</code>. Lave en ny dataramme fra <code>titanic_clean</code> med alle passagerer som er mellem 10 og 15 og rejst enten første eller anden klass.</p>
<ul>
<li>Hvor mange observationer er der i den ny dataramme?</li>
<li>Prøve at tilføje <code>%&gt;% count()</code> til kommandoen - få man så samme tal?</li>
</ul>
<p><strong>7</strong>) <em><code>filter()</code> og <code>select()</code> : kombinering med <code>%&gt;%</code></em></p>
<p>Lave en ny dataramme fra <code>titanic_clean</code> med alle passagerer som er male og survived, og angiv kun kolonner <code>Name</code>, <code>Age</code> og <code>Fare</code>.</p>
<p><strong>8</strong>) <em><code>filter()</code> og <code>select()</code> kombinering med <code>%&gt;%</code></em></p>
<p>Lave en ny dataramme fra <code>titanic_clean</code> med kun variabler <code>Name</code> og <code>Age</code> og dernæst specificere kun de passagerer som er over 60.</p>
<ul>
<li>Få man så den samme sæt observationer hvis du skriver dine <code>select()</code> og <code>filter()</code> funktioner omvendt her? Hvorfor?</li>
</ul>
<p><strong>9</strong>) <em><code>Mutate()</code></em>. Lave en ny dataramme fra <code>titanic_clean</code> som hedder <code>FareRounded</code> som viser <code>Fare</code> rundet til det nærmest integar (hint: benytte funktionen <code>round()</code>).</p>
<p><strong>10</strong>) <em><code>Mutate()</code></em>. Lave en ny dataramme fra <code>titanic_clean</code> med en ny kolon som hedder <code>Family</code> som angiver <code>TRUE</code> hvis <code>Parch</code> er ikke nul, ellers <code>FALSE</code>.</p>
<ul>
<li>Anvende <code>ifelse</code> til at gøre variablen mere intuitive - “Family” og “Not family.”</li>
</ul>
<p><strong>11</strong>) <em><code>Arrange()</code></em>. Lave en ny dataramme fra <code>titanic_clean</code> med observationerne arrangerede således at de yngst er på toppen og ældste er på bunden. Kig på resultatet - hvad kan du fortælle om den yngste passager ombord skibet Titanic?</p>
<ul>
<li>Hvad kan du fortælle om den ældste passager ombord skibet? Overlevede de? Hvad med de andre ældste passagerer?</li>
</ul>
<p><strong>12</strong>) <em><code>Arrange()</code> og kombinering med andre verber</em>. Lave en ny dataramme fra <code>titanic_clean</code> med kun personer med <code>SibSp&gt;0</code> og som gik ombord skibet i Southampton (<code>S</code> for variablen <code>Embarked</code>), arrangere de resulterende observationer efter <code>Fare</code> (højeste på toppen) og angiv kun kolonnerne <code>Name</code>, <code>Age</code> og <code>Fare</code>.</p>
<p><strong>13</strong>) <em>Rename</em>. Fra <code>titanic_clean</code> angiv kun variabler <code>Survived</code>,<code>Ticket</code>, og <code>Name</code> og ændre deres navne til <code>Overlevede</code>, <code>Billet</code> og <code>Navn</code>.</p>
<ul>
<li>Gøre variabler navne til store bogstaver ved at anvende <code>rename_with()</code>.</li>
</ul>
<p><strong>14</strong> <em><code>recode()</code></em> Tjek kursus notaterne og se funktionen <code>recode()</code>. Afpøve den ved at ændre værdierne i variablen <code>Embarked</code> således at man få de fulde navne af de steder folk gik ombord skibet, i stedet for kun den første bogstav. Fra data beskrivelsen:</p>
<ul>
<li>Embarked: Where passengers boarded the titanic. C = Cherbourg, Q = Queenstown, S = Southampton).</li>
</ul>
<p><strong>14</strong>) <em>Lave et plot</em>. Fra <code>titanic_clean</code> bruge <code>filter()</code> til at lave en ny dataramme kun med personer under 30 og bruge den til at lave et barplot som viser antallet af personer opdelt efter Pclass. Bruge følgende struktur for koden:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="data.html#cb250-1" aria-hidden="true" tabindex="-1"></a>titanic_clean <span class="sc">%&gt;%</span> </span>
<span id="cb250-2"><a href="data.html#cb250-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(...) <span class="sc">%&gt;%</span> <span class="co">#rediger linjen</span></span>
<span id="cb250-3"><a href="data.html#cb250-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(...)) <span class="sc">+</span> .... <span class="co">#tilføj plot</span></span></code></pre></div>
<p><strong>15</strong>) <em>Lave et plot</em>. Fra <code>titanic_clean</code>, bruge <code>mutate()</code> til at lave et nyt kolon der hedder <code>with_siblings_spouses</code> der er <code>TRUE</code> hvis <code>SibSp</code> ikke er nul. Brug den til at lave boxplots som viser <code>Fare</code> på y-aksen og <code>with_siblings_spouses</code> på x-aksen.</p>
<ul>
<li>Ekstra: Ændre skalen på y-aksen for at gøre plottet klarer at fortolke.</li>
</ul>
</div>
<div id="kommentarer" class="section level2 hasAnchor" number="5.9">
<h2><span class="header-section-number">5.9</span> Kommentarer<a href="data.html#kommentarer" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>I morgen arbejder vi videre med tidyverse.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visual2.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["visualisering_22.pdf", "visualisering_22.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
