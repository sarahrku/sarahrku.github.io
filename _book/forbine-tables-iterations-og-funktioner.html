<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Forbine tables, iterations og funktioner | Visualisering af biologiske datasæt - 2022</title>
  <meta name="description" content="Course materials for Analysering og visualisering af biologiske datasæt 2022" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Forbine tables, iterations og funktioner | Visualisering af biologiske datasæt - 2022" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Course materials for Analysering og visualisering af biologiske datasæt 2022" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Forbine tables, iterations og funktioner | Visualisering af biologiske datasæt - 2022" />
  
  <meta name="twitter:description" content="Course materials for Analysering og visualisering af biologiske datasæt 2022" />
  

<meta name="author" content="Sarah Rennie" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="bearbejdning-dag-2.html"/>
<link rel="next" href="visualising-trends.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/vembedr-0.1.5/css/vembedr.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Visualisering kursus</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Grundlæggende R<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#inledning-til-kapitel"><i class="fa fa-check"></i><b>1.1</b> Inledning til kapitel<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#rstudio"><i class="fa fa-check"></i><b>1.2</b> RStudio<span></span></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#de-forskellige-vinduer-i-rstudio"><i class="fa fa-check"></i><b>1.2.1</b> De forskellige vinduer i RStudio<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#working-directory"><i class="fa fa-check"></i><b>1.3</b> Working directory<span></span></a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#r-pakker"><i class="fa fa-check"></i><b>1.4</b> R pakker<span></span></a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#hvor-kommer-vores-data-fra"><i class="fa fa-check"></i><b>1.5</b> Hvor kommer vores data fra?<span></span></a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#indbyggede-datasæt"><i class="fa fa-check"></i><b>1.5.1</b> Indbyggede datasæt<span></span></a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#importering-af-data-fra-.txt-fil"><i class="fa fa-check"></i><b>1.5.2</b> Importering af data fra .txt fil<span></span></a></li>
<li class="chapter" data-level="1.5.3" data-path="index.html"><a href="index.html#importering-af-data-fra-excel"><i class="fa fa-check"></i><b>1.5.3</b> Importering af data fra Excel<span></span></a></li>
<li class="chapter" data-level="1.5.4" data-path="index.html"><a href="index.html#kaggle"><i class="fa fa-check"></i><b>1.5.4</b> Kaggle<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#beregninger-i-r"><i class="fa fa-check"></i><b>1.6</b> Beregninger i R<span></span></a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="index.html"><a href="index.html#vectorer"><i class="fa fa-check"></i><b>1.6.1</b> Vectorer<span></span></a></li>
<li class="chapter" data-level="1.6.2" data-path="index.html"><a href="index.html#datatyper"><i class="fa fa-check"></i><b>1.6.2</b> datatyper<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#dataframes"><i class="fa fa-check"></i><b>1.7</b> Dataframes<span></span></a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="index.html#delmægder-af-dataframes"><i class="fa fa-check"></i><b>1.7.1</b> Delmægder af dataframes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#descriptive-statistics"><i class="fa fa-check"></i><b>1.8</b> Descriptive statistics<span></span></a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="index.html"><a href="index.html#simulere-data-fra-den-normale-fordeling"><i class="fa fa-check"></i><b>1.8.1</b> Simulere data fra den normale fordeling<span></span></a></li>
<li class="chapter" data-level="1.8.2" data-path="index.html"><a href="index.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>1.8.2</b> Measures of central tendency<span></span></a></li>
<li class="chapter" data-level="1.8.3" data-path="index.html"><a href="index.html#tapply"><i class="fa fa-check"></i><b>1.8.3</b> <code>tapply()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="index.html"><a href="index.html#statistike-tester"><i class="fa fa-check"></i><b>1.9</b> Statistike tester<span></span></a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="index.html"><a href="index.html#korrelation"><i class="fa fa-check"></i><b>1.9.1</b> Korrelation<span></span></a></li>
<li class="chapter" data-level="1.9.2" data-path="index.html"><a href="index.html#test-for-uafhængighed-chi-sq-test"><i class="fa fa-check"></i><b>1.9.2</b> Test for uafhængighed (chi-sq test)<span></span></a></li>
<li class="chapter" data-level="1.9.3" data-path="index.html"><a href="index.html#sample-t-test"><i class="fa fa-check"></i><b>1.9.3</b> 1 sample t-test<span></span></a></li>
<li class="chapter" data-level="1.9.4" data-path="index.html"><a href="index.html#sample-t-test-1"><i class="fa fa-check"></i><b>1.9.4</b> 2-sample t-test<span></span></a></li>
<li class="chapter" data-level="1.9.5" data-path="index.html"><a href="index.html#paired-t-test"><i class="fa fa-check"></i><b>1.9.5</b> Paired t-test<span></span></a></li>
<li class="chapter" data-level="1.9.6" data-path="index.html"><a href="index.html#anova-variansanalyse"><i class="fa fa-check"></i><b>1.9.6</b> ANOVA (variansanalyse)<span></span></a></li>
<li class="chapter" data-level="1.9.7" data-path="index.html"><a href="index.html#lineær-regression"><i class="fa fa-check"></i><b>1.9.7</b> Lineær regression<span></span></a></li>
<li class="chapter" data-level="1.9.8" data-path="index.html"><a href="index.html#r-squared-coefficient-of-determination"><i class="fa fa-check"></i><b>1.9.8</b> R-squared coefficient of determination<span></span></a></li>
<li class="chapter" data-level="1.9.9" data-path="index.html"><a href="index.html#antagelser---lineær-regression"><i class="fa fa-check"></i><b>1.9.9</b> Antagelser - lineær regression<span></span></a></li>
<li class="chapter" data-level="1.9.10" data-path="index.html"><a href="index.html#multiple-lineær-regression"><i class="fa fa-check"></i><b>1.9.10</b> Multiple lineær regression<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="index.html"><a href="index.html#problemstillinger"><i class="fa fa-check"></i><b>1.10</b> Problemstillinger<span></span></a>
<ul>
<li class="chapter" data-level="1.10.1" data-path="index.html"><a href="index.html#quiz---basics"><i class="fa fa-check"></i><b>1.10.1</b> Quiz - Basics<span></span></a></li>
<li class="chapter" data-level="1.10.2" data-path="index.html"><a href="index.html#grundlæggende-r"><i class="fa fa-check"></i><b>1.10.2</b> Grundlæggende R<span></span></a></li>
<li class="chapter" data-level="1.10.3" data-path="index.html"><a href="index.html#kort-analyse-med-reaktionstider"><i class="fa fa-check"></i><b>1.10.3</b> Kort analyse med reaktionstider<span></span></a></li>
<li class="chapter" data-level="1.10.4" data-path="index.html"><a href="index.html#øvelser-med-anovaregression"><i class="fa fa-check"></i><b>1.10.4</b> Øvelser med ANOVA/regression<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduktion.html"><a href="introduktion.html"><i class="fa fa-check"></i><b>2</b> Introduktion til R Markdown<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduktion.html"><a href="introduktion.html#hvad-er-r-markdown"><i class="fa fa-check"></i><b>2.1</b> Hvad er R Markdown?<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="introduktion.html"><a href="introduktion.html#installere-r-markdown"><i class="fa fa-check"></i><b>2.2</b> Installere R Markdown<span></span></a></li>
<li class="chapter" data-level="2.3" data-path="introduktion.html"><a href="introduktion.html#videodemonstrationer"><i class="fa fa-check"></i><b>2.3</b> Videodemonstrationer<span></span></a></li>
<li class="chapter" data-level="2.4" data-path="introduktion.html"><a href="introduktion.html#lave-et-nyt-dokument-i-r-markdown"><i class="fa fa-check"></i><b>2.4</b> Lave et nyt dokument i R Markdown<span></span></a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduktion.html"><a href="introduktion.html#yaml"><i class="fa fa-check"></i><b>2.4.1</b> YAML<span></span></a></li>
<li class="chapter" data-level="2.4.2" data-path="introduktion.html"><a href="introduktion.html#globale-options"><i class="fa fa-check"></i><b>2.4.2</b> Globale options<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduktion.html"><a href="introduktion.html#skrive-baseret-tekst"><i class="fa fa-check"></i><b>2.5</b> Skrive baseret tekst<span></span></a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduktion.html"><a href="introduktion.html#headers"><i class="fa fa-check"></i><b>2.5.1</b> Headers<span></span></a></li>
<li class="chapter" data-level="2.5.2" data-path="introduktion.html"><a href="introduktion.html#liste"><i class="fa fa-check"></i><b>2.5.2</b> liste<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduktion.html"><a href="introduktion.html#kode-indenfor-teksten-inline-chunks"><i class="fa fa-check"></i><b>2.6</b> Kode indenfor teksten (‘Inline chunks’)<span></span></a></li>
<li class="chapter" data-level="2.7" data-path="introduktion.html"><a href="introduktion.html#kode-chunks"><i class="fa fa-check"></i><b>2.7</b> Kode chunks<span></span></a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="introduktion.html"><a href="introduktion.html#chunk-options"><i class="fa fa-check"></i><b>2.7.1</b> Chunk options<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="introduktion.html"><a href="introduktion.html#knit-kode"><i class="fa fa-check"></i><b>2.8</b> Knit kode<span></span></a></li>
<li class="chapter" data-level="2.9" data-path="introduktion.html"><a href="introduktion.html#matematik"><i class="fa fa-check"></i><b>2.9</b> Matematik<span></span></a></li>
<li class="chapter" data-level="2.10" data-path="introduktion.html"><a href="introduktion.html#problemstillinger-1"><i class="fa fa-check"></i><b>2.10</b> Problemstillinger<span></span></a></li>
<li class="chapter" data-level="2.11" data-path="introduktion.html"><a href="introduktion.html#slut-for-ugen"><i class="fa fa-check"></i><b>2.11</b> Slut for ugen<span></span></a></li>
<li class="chapter" data-level="2.12" data-path="introduktion.html"><a href="introduktion.html#ekstra-links"><i class="fa fa-check"></i><b>2.12</b> Ekstra links<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="visual1.html"><a href="visual1.html"><i class="fa fa-check"></i><b>3</b> Visualisering - ggplot2 dag 1<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="visual1.html"><a href="visual1.html#inledning-og-videoer"><i class="fa fa-check"></i><b>3.1</b> Inledning og videoer<span></span></a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="visual1.html"><a href="visual1.html#læringsmålene-for-dag-1"><i class="fa fa-check"></i><b>3.1.1</b> Læringsmålene for dag 1<span></span></a></li>
<li class="chapter" data-level="3.1.2" data-path="visual1.html"><a href="visual1.html#hvad-er-ggplot2"><i class="fa fa-check"></i><b>3.1.2</b> Hvad er <strong>ggplot2</strong>?<span></span></a></li>
<li class="chapter" data-level="3.1.3" data-path="visual1.html"><a href="visual1.html#brugen-af-materialerne"><i class="fa fa-check"></i><b>3.1.3</b> Brugen af materialerne<span></span></a></li>
<li class="chapter" data-level="3.1.4" data-path="visual1.html"><a href="visual1.html#video-ressourcer"><i class="fa fa-check"></i><b>3.1.4</b> Video ressourcer<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="visual1.html"><a href="visual1.html#transition-fra-base-r-til-ggplot2"><i class="fa fa-check"></i><b>3.2</b> Transition fra base R til ggplot2<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="visual1.html"><a href="visual1.html#vores-første-ggplot"><i class="fa fa-check"></i><b>3.3</b> Vores første ggplot<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="visual1.html"><a href="visual1.html#lidt-om-ggplot2"><i class="fa fa-check"></i><b>3.4</b> Lidt om ggplot2<span></span></a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="visual1.html"><a href="visual1.html#syntax"><i class="fa fa-check"></i><b>3.4.1</b> Syntax<span></span></a></li>
<li class="chapter" data-level="3.4.2" data-path="visual1.html"><a href="visual1.html#globale-versus-lokale-æstetik"><i class="fa fa-check"></i><b>3.4.2</b> Globale versus lokale æstetik<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="visual1.html"><a href="visual1.html#specificere-axse-tekst-og-titel"><i class="fa fa-check"></i><b>3.5</b> Specificere axse tekst og titel<span></span></a></li>
<li class="chapter" data-level="3.6" data-path="visual1.html"><a href="visual1.html#ændre-farver"><i class="fa fa-check"></i><b>3.6</b> Ændre farver<span></span></a></li>
<li class="chapter" data-level="3.7" data-path="visual1.html"><a href="visual1.html#ændre-temaet"><i class="fa fa-check"></i><b>3.7</b> Ændre temaet<span></span></a></li>
<li class="chapter" data-level="3.8" data-path="visual1.html"><a href="visual1.html#forskellige-type-plots"><i class="fa fa-check"></i><b>3.8</b> Forskellige type plots<span></span></a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="visual1.html"><a href="visual1.html#boxplot-geom_box"><i class="fa fa-check"></i><b>3.8.1</b> Boxplot (<code>geom_box</code>)<span></span></a></li>
<li class="chapter" data-level="3.8.2" data-path="visual1.html"><a href="visual1.html#barplot-geom_bar"><i class="fa fa-check"></i><b>3.8.2</b> Barplot (<code>geom_bar</code>)<span></span></a></li>
<li class="chapter" data-level="3.8.3" data-path="visual1.html"><a href="visual1.html#histogram-geom_histogram"><i class="fa fa-check"></i><b>3.8.3</b> Histogram (<code>geom_histogram</code>)<span></span></a></li>
<li class="chapter" data-level="3.8.4" data-path="visual1.html"><a href="visual1.html#density-geom_density"><i class="fa fa-check"></i><b>3.8.4</b> Density (<code>geom_density</code>)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="visual1.html"><a href="visual1.html#troubleshooting"><i class="fa fa-check"></i><b>3.9</b> Troubleshooting<span></span></a></li>
<li class="chapter" data-level="3.10" data-path="visual1.html"><a href="visual1.html#problemstillinger-2"><i class="fa fa-check"></i><b>3.10</b> Problemstillinger<span></span></a></li>
<li class="chapter" data-level="3.11" data-path="visual1.html"><a href="visual1.html#næste-gang"><i class="fa fa-check"></i><b>3.11</b> Næste gang<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="visual2.html"><a href="visual2.html"><i class="fa fa-check"></i><b>4</b> Visualisering - ggplot2 dag 2<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="visual2.html"><a href="visual2.html#indledning-og-videoer"><i class="fa fa-check"></i><b>4.1</b> Indledning og videoer<span></span></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="visual2.html"><a href="visual2.html#læringsmålene"><i class="fa fa-check"></i><b>4.1.1</b> Læringsmålene<span></span></a></li>
<li class="chapter" data-level="4.1.2" data-path="visual2.html"><a href="visual2.html#video-ressourcer-1"><i class="fa fa-check"></i><b>4.1.2</b> Video ressourcer<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="visual2.html"><a href="visual2.html#koordinat-systemer"><i class="fa fa-check"></i><b>4.2</b> Koordinat systemer<span></span></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="visual2.html"><a href="visual2.html#zoom-på-plottet-coord_cartesian"><i class="fa fa-check"></i><b>4.2.1</b> Zoom på plottet (<code>coord_cartesian()</code>)<span></span></a></li>
<li class="chapter" data-level="4.2.2" data-path="visual2.html"><a href="visual2.html#transformering-af-akserne---log-sqrt-osv-scale_x_continuous."><i class="fa fa-check"></i><b>4.2.2</b> Transformering af akserne - log, sqrt osv (<code>scale_x_continuous</code>).<span></span></a></li>
<li class="chapter" data-level="4.2.3" data-path="visual2.html"><a href="visual2.html#flip-coordinates-coord_flip"><i class="fa fa-check"></i><b>4.2.3</b> Flip coordinates (<code>coord_flip</code>)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="visual2.html"><a href="visual2.html#mere-om-farver-og-punkt-former"><i class="fa fa-check"></i><b>4.3</b> Mere om farver og punkt former<span></span></a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="visual2.html"><a href="visual2.html#automatisk-farver"><i class="fa fa-check"></i><b>4.3.1</b> Automatisk farver<span></span></a></li>
<li class="chapter" data-level="4.3.2" data-path="visual2.html"><a href="visual2.html#farver-manuelt"><i class="fa fa-check"></i><b>4.3.2</b> Farver manuelt<span></span></a></li>
<li class="chapter" data-level="4.3.3" data-path="visual2.html"><a href="visual2.html#punkt-former"><i class="fa fa-check"></i><b>4.3.3</b> Punkt former<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="visual2.html"><a href="visual2.html#annotations"><i class="fa fa-check"></i><b>4.4</b> Annotations<span></span></a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="visual2.html"><a href="visual2.html#tilføje-labeller-direkte-på-plottet."><i class="fa fa-check"></i><b>4.4.1</b> Tilføje labeller direkte på plottet.<span></span></a></li>
<li class="chapter" data-level="4.4.2" data-path="visual2.html"><a href="visual2.html#pakken-ggrepel-for-at-tilføje-tekst-labeller"><i class="fa fa-check"></i><b>4.4.2</b> Pakken <code>ggrepel</code> for at tilføje tekst labeller<span></span></a></li>
<li class="chapter" data-level="4.4.3" data-path="visual2.html"><a href="visual2.html#tilføje-rektangler-i-regioner-af-interesse-annotate"><i class="fa fa-check"></i><b>4.4.3</b> Tilføje rektangler i regioner af interesse (<code>annotate</code>)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="visual2.html"><a href="visual2.html#opdele-plots-facet_gridfacet_wrap"><i class="fa fa-check"></i><b>4.5</b> Opdele plots (<code>facet_grid</code>/<code>facet_wrap</code>)<span></span></a></li>
<li class="chapter" data-level="4.6" data-path="visual2.html"><a href="visual2.html#problemstillinger-3"><i class="fa fa-check"></i><b>4.6</b> Problemstillinger<span></span></a></li>
<li class="chapter" data-level="4.7" data-path="visual2.html"><a href="visual2.html#workshop-opgave-obs-fredag"><i class="fa fa-check"></i><b>4.7</b> Workshop opgave (OBS Fredag)<span></span></a></li>
<li class="chapter" data-level="4.8" data-path="visual2.html"><a href="visual2.html#ekstra-notat-gemme-dit-plot"><i class="fa fa-check"></i><b>4.8</b> Ekstra notat: gemme dit plot<span></span></a></li>
<li class="chapter" data-level="4.9" data-path="visual2.html"><a href="visual2.html#ekstra-links-1"><i class="fa fa-check"></i><b>4.9</b> Ekstra links<span></span></a></li>
<li class="chapter" data-level="4.10" data-path="visual2.html"><a href="visual2.html#slut-for-ugen-1"><i class="fa fa-check"></i><b>4.10</b> Slut for ugen<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>5</b> Bearbejdning dag 1<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="data.html"><a href="data.html#inledning-og-læringsmålene"><i class="fa fa-check"></i><b>5.1</b> Inledning og læringsmålene<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="data.html"><a href="data.html#video-ressourcer-2"><i class="fa fa-check"></i><b>5.2</b> Video ressourcer<span></span></a></li>
<li class="chapter" data-level="5.3" data-path="data.html"><a href="data.html#hvad-er-tidyverse"><i class="fa fa-check"></i><b>5.3</b> Hvad er Tidyverse?<span></span></a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data.html"><a href="data.html#princippen-med-tidy-data"><i class="fa fa-check"></i><b>5.3.1</b> Princippen med ‘tidy data’<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data.html"><a href="data.html#lidt-om-tibbles"><i class="fa fa-check"></i><b>5.4</b> Lidt om <code>tibbles</code><span></span></a></li>
<li class="chapter" data-level="5.5" data-path="data.html"><a href="data.html#transition-fra-base-til-tidyverse"><i class="fa fa-check"></i><b>5.5</b> Transition fra base til tidyverse<span></span></a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="data.html"><a href="data.html#om-titanic-datasæt"><i class="fa fa-check"></i><b>5.5.1</b> Om <strong>Titanic</strong> datasæt<span></span></a></li>
<li class="chapter" data-level="5.5.2" data-path="data.html"><a href="data.html#titanic-lidt-oprydning"><i class="fa fa-check"></i><b>5.5.2</b> Titanic: lidt oprydning<span></span></a></li>
<li class="chapter" data-level="5.5.3" data-path="data.html"><a href="data.html#pipe"><i class="fa fa-check"></i><b>5.5.3</b> Pipe<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="data.html"><a href="data.html#bearbejdning-af-data-dplyr"><i class="fa fa-check"></i><b>5.6</b> Bearbejdning af data: <code>dplyr</code><span></span></a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="data.html"><a href="data.html#dplyr-verbs-select"><i class="fa fa-check"></i><b>5.6.1</b> dplyr verbs: <code>select()</code><span></span></a></li>
<li class="chapter" data-level="5.6.2" data-path="data.html"><a href="data.html#dplyr-verbs-filter"><i class="fa fa-check"></i><b>5.6.2</b> dplyr verbs: <code>filter()</code><span></span></a></li>
<li class="chapter" data-level="5.6.3" data-path="data.html"><a href="data.html#comparitiver-reference"><i class="fa fa-check"></i><b>5.6.3</b> Comparitiver reference<span></span></a></li>
<li class="chapter" data-level="5.6.4" data-path="data.html"><a href="data.html#kombinere-filter-og-select"><i class="fa fa-check"></i><b>5.6.4</b> Kombinere <code>filter()</code> og <code>select()</code><span></span></a></li>
<li class="chapter" data-level="5.6.5" data-path="data.html"><a href="data.html#dplyr-verbs-mutate"><i class="fa fa-check"></i><b>5.6.5</b> dplyr verbs: <code>mutate()</code><span></span></a></li>
<li class="chapter" data-level="5.6.6" data-path="data.html"><a href="data.html#rename"><i class="fa fa-check"></i><b>5.6.6</b> <code>rename()</code><span></span></a></li>
<li class="chapter" data-level="5.6.7" data-path="data.html"><a href="data.html#dplyr-verbs-arrange"><i class="fa fa-check"></i><b>5.6.7</b> dplyr verbs: <code>arrange()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="data.html"><a href="data.html#ændre-data-med-recode"><i class="fa fa-check"></i><b>5.7</b> Ændre data med <code>recode()</code><span></span></a></li>
<li class="chapter" data-level="5.8" data-path="data.html"><a href="data.html#visualisering-bruge-som-input-i-ggplot2"><i class="fa fa-check"></i><b>5.8</b> Visualisering: bruge som input i ggplot2<span></span></a></li>
<li class="chapter" data-level="5.9" data-path="data.html"><a href="data.html#problemstillinger-4"><i class="fa fa-check"></i><b>5.9</b> Problemstillinger<span></span></a></li>
<li class="chapter" data-level="5.10" data-path="data.html"><a href="data.html#kommentarer"><i class="fa fa-check"></i><b>5.10</b> Kommentarer<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html"><i class="fa fa-check"></i><b>6</b> Bearbejdning dag 2<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#indledning-og-læringsmålene"><i class="fa fa-check"></i><b>6.1</b> Indledning og læringsmålene<span></span></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#læringsmålene-1"><i class="fa fa-check"></i><b>6.1.1</b> Læringsmålene<span></span></a></li>
<li class="chapter" data-level="6.1.2" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#videoer"><i class="fa fa-check"></i><b>6.1.2</b> Videoer<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#dplyr-group_by-med-summarise"><i class="fa fa-check"></i><b>6.2</b> dplyr: <code>group_by()</code> med <code>summarise()</code><span></span></a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#reference-af-summary-funktioner"><i class="fa fa-check"></i><b>6.2.1</b> Reference af <code>summary()</code> funktioner<span></span></a></li>
<li class="chapter" data-level="6.2.2" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#flere-summary-statistic-på-én-gang"><i class="fa fa-check"></i><b>6.2.2</b> Flere summary statistic på én gang<span></span></a></li>
<li class="chapter" data-level="6.2.3" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#mere-kompliceret-group_by"><i class="fa fa-check"></i><b>6.2.3</b> Mere kompliceret <code>group_by()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#tidyr-pakke---wide-og-long-data"><i class="fa fa-check"></i><b>6.3</b> Tidyr pakke - Wide og Long data<span></span></a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#tidyr-pakke---oversigt"><i class="fa fa-check"></i><b>6.3.1</b> Tidyr pakke - oversigt<span></span></a></li>
<li class="chapter" data-level="6.3.2" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#wide---long-med-pivot_longer"><i class="fa fa-check"></i><b>6.3.2</b> Wide -&gt; Long med <code>pivot_longer()</code><span></span></a></li>
<li class="chapter" data-level="6.3.3" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#separate"><i class="fa fa-check"></i><b>6.3.3</b> <code>separate()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#eksempel-titanic-summary-statistics"><i class="fa fa-check"></i><b>6.4</b> Eksempel: Titanic summary statistics<span></span></a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#demonstration-af-pivot_wider"><i class="fa fa-check"></i><b>6.4.1</b> Demonstration af <code>pivot_wider()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#problemstillinger-5"><i class="fa fa-check"></i><b>6.5</b> Problemstillinger<span></span></a></li>
<li class="chapter" data-level="6.6" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#opgave-fredag-workshop-om-tidyverse"><i class="fa fa-check"></i><b>6.6</b> Opgave (fredag workshop om tidyverse)<span></span></a></li>
<li class="chapter" data-level="6.7" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#ekstra-links-2"><i class="fa fa-check"></i><b>6.7</b> Ekstra links<span></span></a></li>
<li class="chapter" data-level="6.8" data-path="bearbejdning-dag-2.html"><a href="bearbejdning-dag-2.html#sidste-kommentarer"><i class="fa fa-check"></i><b>6.8</b> Sidste kommentarer<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html"><i class="fa fa-check"></i><b>7</b> Forbine tables, iterations og funktioner<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#inledning-og-læringsmålene-1"><i class="fa fa-check"></i><b>7.1</b> Inledning og læringsmålene<span></span></a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#læringsmålene-2"><i class="fa fa-check"></i><b>7.1.1</b> Læringsmålene<span></span></a></li>
<li class="chapter" data-level="7.1.2" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#introduktion-til-chapter"><i class="fa fa-check"></i><b>7.1.2</b> Introduktion til Chapter<span></span></a></li>
<li class="chapter" data-level="7.1.3" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#video-ressourcer-3"><i class="fa fa-check"></i><b>7.1.3</b> Video ressourcer<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#tilføje-sample-oplysninger-med-left_join"><i class="fa fa-check"></i><b>7.2</b> Tilføje sample oplysninger med <code>left_join()</code><span></span></a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#fuktionen-left_join-fra-dplyr-pakken"><i class="fa fa-check"></i><b>7.2.1</b> Fuktionen <code>left_join()</code> fra dplyr-pakken<span></span></a></li>
<li class="chapter" data-level="7.2.2" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#anvende-left_join-for-vores-fiktiv-dataset."><i class="fa fa-check"></i><b>7.2.2</b> Anvende <code>left_join()</code> for vores fiktiv dataset.<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#iterativ-processer-med-map-fuktioner"><i class="fa fa-check"></i><b>7.3</b> Iterativ processer med <code>map()</code> fuktioner<span></span></a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#introduktion-til-map-funktioner"><i class="fa fa-check"></i><b>7.3.1</b> Introduktion til <code>map()</code> funktioner<span></span></a></li>
<li class="chapter" data-level="7.3.2" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#reference-for-the-different-map-functions"><i class="fa fa-check"></i><b>7.3.2</b> Reference for the different map functions<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#custom-functions"><i class="fa fa-check"></i><b>7.4</b> Custom functions<span></span></a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#simple-functions"><i class="fa fa-check"></i><b>7.4.1</b> Simple functions<span></span></a></li>
<li class="chapter" data-level="7.4.2" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#custom-functions-with-mapping"><i class="fa fa-check"></i><b>7.4.2</b> Custom functions with mapping<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#nesting-nest"><i class="fa fa-check"></i><b>7.5</b> Nesting <code>nest()</code><span></span></a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#anvende-map-med-nested-data"><i class="fa fa-check"></i><b>7.5.1</b> Anvende map() med nested data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#problemstillinger-6"><i class="fa fa-check"></i><b>7.6</b> Problemstillinger<span></span></a></li>
<li class="chapter" data-level="7.7" data-path="forbine-tables-iterations-og-funktioner.html"><a href="forbine-tables-iterations-og-funktioner.html#ekstra-notater-og-næste-gang"><i class="fa fa-check"></i><b>7.7</b> Ekstra notater og næste gang<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="visualising-trends.html"><a href="visualising-trends.html"><i class="fa fa-check"></i><b>8</b> Visualising trends<span></span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="visualising-trends.html"><a href="visualising-trends.html#indledning-og-læringsmålene-1"><i class="fa fa-check"></i><b>8.1</b> Indledning og læringsmålene<span></span></a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="visualising-trends.html"><a href="visualising-trends.html#læringsmålene-3"><i class="fa fa-check"></i><b>8.1.1</b> Læringsmålene<span></span></a></li>
<li class="chapter" data-level="8.1.2" data-path="visualising-trends.html"><a href="visualising-trends.html#introduktion-til-chapter-1"><i class="fa fa-check"></i><b>8.1.2</b> Introduktion til chapter<span></span></a></li>
<li class="chapter" data-level="8.1.3" data-path="visualising-trends.html"><a href="visualising-trends.html#video-ressourcer-4"><i class="fa fa-check"></i><b>8.1.3</b> Video ressourcer<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="visualising-trends.html"><a href="visualising-trends.html#nest-og-map-eksempel-med-korrelation"><i class="fa fa-check"></i><b>8.2</b> <code>nest()</code> og <code>map()</code>: eksempel med korrelation<span></span></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="visualising-trends.html"><a href="visualising-trends.html#korrelation-analyse-i-r"><i class="fa fa-check"></i><b>8.2.1</b> Korrelation analyse i R<span></span></a></li>
<li class="chapter" data-level="8.2.2" data-path="visualising-trends.html"><a href="visualising-trends.html#korrelation-over-flere-datasæt-på-en-gang"><i class="fa fa-check"></i><b>8.2.2</b> Korrelation over flere datasæt på en gang<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="visualising-trends.html"><a href="visualising-trends.html#visualisering-af-lineær-regression-med-ggplot2"><i class="fa fa-check"></i><b>8.3</b> Visualisering af lineær regression med ggplot2<span></span></a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="visualising-trends.html"><a href="visualising-trends.html#lineær-trends"><i class="fa fa-check"></i><b>8.3.1</b> Lineær trends<span></span></a></li>
<li class="chapter" data-level="8.3.2" data-path="visualising-trends.html"><a href="visualising-trends.html#plotting-lineær-trend-lines-with-geom_smooth"><i class="fa fa-check"></i><b>8.3.2</b> plotting lineær trend lines with <code>geom_smooth()</code><span></span></a></li>
<li class="chapter" data-level="8.3.3" data-path="visualising-trends.html"><a href="visualising-trends.html#plotting-multiple-lineær-trend-lines-with-geom_smooth"><i class="fa fa-check"></i><b>8.3.3</b> plotting multiple lineær trend lines with <code>geom_smooth()</code><span></span></a></li>
<li class="chapter" data-level="8.3.4" data-path="visualising-trends.html"><a href="visualising-trends.html#plot-trends-med-methodloess-i-ggplot."><i class="fa fa-check"></i><b>8.3.4</b> Plot trends med <code>method=="loess"</code> i ggplot.<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="visualising-trends.html"><a href="visualising-trends.html#plot-linear-regresion-estimates"><i class="fa fa-check"></i><b>8.4</b> Plot linear regresion estimates<span></span></a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="visualising-trends.html"><a href="visualising-trends.html#iteratively-estimating-multiple-trends"><i class="fa fa-check"></i><b>8.4.1</b> Iteratively estimating multiple trends<span></span></a></li>
<li class="chapter" data-level="8.4.2" data-path="visualising-trends.html"><a href="visualising-trends.html#lave-og-tilføje-labels-til-dit-regression-plot"><i class="fa fa-check"></i><b>8.4.2</b> Lave og tilføje labels til dit regression plot<span></span></a></li>
<li class="chapter" data-level="8.4.3" data-path="visualising-trends.html"><a href="visualising-trends.html#case_when-adding-bar-plot-text"><i class="fa fa-check"></i><b>8.4.3</b> <code>case_when()</code>: adding bar plot text<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="visualising-trends.html"><a href="visualising-trends.html#problemstillinger-7"><i class="fa fa-check"></i><b>8.5</b> Problemstillinger<span></span></a></li>
<li class="chapter" data-level="8.6" data-path="visualising-trends.html"><a href="visualising-trends.html#næste-uge"><i class="fa fa-check"></i><b>8.6</b> Næste uge<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="clustering.html"><a href="clustering.html"><i class="fa fa-check"></i><b>9</b> Clustering<span></span></a>
<ul>
<li class="chapter" data-level="9.1" data-path="clustering.html"><a href="clustering.html#indledning-og-læringsmålene-2"><i class="fa fa-check"></i><b>9.1</b> Indledning og læringsmålene<span></span></a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="clustering.html"><a href="clustering.html#læringsmålene-4"><i class="fa fa-check"></i><b>9.1.1</b> Læringsmålene<span></span></a></li>
<li class="chapter" data-level="9.1.2" data-path="clustering.html"><a href="clustering.html#inledning-til-chapter"><i class="fa fa-check"></i><b>9.1.2</b> Inledning til chapter<span></span></a></li>
<li class="chapter" data-level="9.1.3" data-path="clustering.html"><a href="clustering.html#video-ressourcer-5"><i class="fa fa-check"></i><b>9.1.3</b> Video ressourcer<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="clustering.html"><a href="clustering.html#k-means-clustering"><i class="fa fa-check"></i><b>9.2</b> K-means clustering<span></span></a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="clustering.html"><a href="clustering.html#hvordan-fungere-kmeans"><i class="fa fa-check"></i><b>9.2.1</b> Hvordan fungere kmeans?<span></span></a></li>
<li class="chapter" data-level="9.2.2" data-path="clustering.html"><a href="clustering.html#run-k-means-i-r"><i class="fa fa-check"></i><b>9.2.2</b> Run k-means i R<span></span></a></li>
<li class="chapter" data-level="9.2.3" data-path="clustering.html"><a href="clustering.html#tidy-up-k-means-resultaterne-med-pakken-broom"><i class="fa fa-check"></i><b>9.2.3</b> Tidy up k-means resultaterne med pakken <code>broom</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="clustering.html"><a href="clustering.html#hvor-mange-clusters-skal-der-være"><i class="fa fa-check"></i><b>9.3</b> Hvor mange clusters skal der være?<span></span></a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="clustering.html"><a href="clustering.html#få-statistikker-for-antal-clusters-fra-1-til-9"><i class="fa fa-check"></i><b>9.3.1</b> Få statistikker for antal clusters fra 1 til 9<span></span></a></li>
<li class="chapter" data-level="9.3.2" data-path="clustering.html"><a href="clustering.html#manuelt-beslutning-med-elbow-plot."><i class="fa fa-check"></i><b>9.3.2</b> Manuelt beslutning med elbow plot.<span></span></a></li>
<li class="chapter" data-level="9.3.3" data-path="clustering.html"><a href="clustering.html#automatistke-beslutning-med-pakken-nbclust"><i class="fa fa-check"></i><b>9.3.3</b> Automatistke beslutning med pakken <code>NbClust</code><span></span></a></li>
<li class="chapter" data-level="9.3.4" data-path="clustering.html"><a href="clustering.html#plot-de-forskellige-antal-clusters"><i class="fa fa-check"></i><b>9.3.4</b> Plot de forskellige antal clusters<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="clustering.html"><a href="clustering.html#hierarchical-clustering"><i class="fa fa-check"></i><b>9.4</b> Hierarchical clustering<span></span></a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="clustering.html"><a href="clustering.html#vælge-ønkset-antal-clusters"><i class="fa fa-check"></i><b>9.4.1</b> Vælge ønkset antal clusters<span></span></a></li>
<li class="chapter" data-level="9.4.2" data-path="clustering.html"><a href="clustering.html#lav-et-pænt-plot-af-dendrogram-med-ggplot2"><i class="fa fa-check"></i><b>9.4.2</b> Lav et pænt plot af dendrogram med ggplot2<span></span></a></li>
<li class="chapter" data-level="9.4.3" data-path="clustering.html"><a href="clustering.html#ekstra-afprøve-andre-metoder"><i class="fa fa-check"></i><b>9.4.3</b> Ekstra: afprøve andre metoder<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="clustering.html"><a href="clustering.html#problemstillinger-8"><i class="fa fa-check"></i><b>9.5</b> Problemstillinger<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html"><i class="fa fa-check"></i><b>10</b> Principal component analysis (PCA)<span></span></a>
<ul>
<li class="chapter" data-level="10.1" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#indledning-og-læringsmålene-3"><i class="fa fa-check"></i><b>10.1</b> Indledning og læringsmålene<span></span></a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#læringsmålene-5"><i class="fa fa-check"></i><b>10.1.1</b> Læringsmålene<span></span></a></li>
<li class="chapter" data-level="10.1.2" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#introduktion-til-chapter-2"><i class="fa fa-check"></i><b>10.1.2</b> Introduktion til chapter<span></span></a></li>
<li class="chapter" data-level="10.1.3" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#video-ressourcer-6"><i class="fa fa-check"></i><b>10.1.3</b> Video ressourcer<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#hvad-er-principal-component-analysis-pca"><i class="fa fa-check"></i><b>10.2</b> Hvad er principal component analysis (PCA)?<span></span></a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#simpel-eksempel-med-to-dimensioner"><i class="fa fa-check"></i><b>10.2.1</b> Simpel eksempel med to dimensioner<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#fit-pca-to-data-in-r"><i class="fa fa-check"></i><b>10.3</b> Fit PCA to data in R<span></span></a></li>
<li class="chapter" data-level="10.4" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#integrere-pca-resultater-med-broom-pakke"><i class="fa fa-check"></i><b>10.4</b> Integrere PCA resultater med broom-pakke<span></span></a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#rotation-matrix-to-extract-variable-contributions"><i class="fa fa-check"></i><b>10.4.1</b> Rotation matrix to extract variable contributions<span></span></a></li>
<li class="chapter" data-level="10.4.2" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#pakken-factoextra"><i class="fa fa-check"></i><b>10.4.2</b> Pakken <code>factoextra</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#quiz-og-problemstillinger"><i class="fa fa-check"></i><b>10.5</b> Quiz og problemstillinger<span></span></a></li>
<li class="chapter" data-level="10.6" data-path="principal-component-analysis-pca.html"><a href="principal-component-analysis-pca.html#ekstra-læsning"><i class="fa fa-check"></i><b>10.6</b> Ekstra læsning<span></span></a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html"><i class="fa fa-check"></i><b>11</b> Emner fra eksperimental design<span></span></a>
<ul>
<li class="chapter" data-level="11.1" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html#inledning-og-læringsmålene-2"><i class="fa fa-check"></i><b>11.1</b> Inledning og læringsmålene<span></span></a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html#læringsmålene-6"><i class="fa fa-check"></i><b>11.1.1</b> Læringsmålene<span></span></a></li>
<li class="chapter" data-level="11.1.2" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html#inledning-til-chapter-1"><i class="fa fa-check"></i><b>11.1.2</b> Inledning til chapter<span></span></a></li>
<li class="chapter" data-level="11.1.3" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html#video-ressourcer-7"><i class="fa fa-check"></i><b>11.1.3</b> Video ressourcer<span></span></a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html#baserende-princip-af-eksperimental-design"><i class="fa fa-check"></i><b>11.2</b> Baserende princip af eksperimental design<span></span></a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html#randomisation-and-replication"><i class="fa fa-check"></i><b>11.2.1</b> Randomisation and replication<span></span></a></li>
<li class="chapter" data-level="11.2.2" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html#eksempel-med-datasættet-toothgrowth"><i class="fa fa-check"></i><b>11.2.2</b> Eksempel med datasættet <code>ToothGrowth</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html#case-studies-simpsons-paradox"><i class="fa fa-check"></i><b>11.3</b> Case studies: Simpson’s paradox<span></span></a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html#berkerly-admissions"><i class="fa fa-check"></i><b>11.3.1</b> Berkerly admissions<span></span></a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html#case-studies-anscombes-quartet"><i class="fa fa-check"></i><b>11.4</b> Case studies: Anscombe’s quartet<span></span></a></li>
<li class="chapter" data-level="11.5" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html#using-pca-to-find-batch-effects"><i class="fa fa-check"></i><b>11.5</b> Using PCA to find batch effects<span></span></a></li>
<li class="chapter" data-level="11.6" data-path="emner-fra-eksperimental-design.html"><a href="emner-fra-eksperimental-design.html#problemstillinger-9"><i class="fa fa-check"></i><b>11.6</b> Problemstillinger<span></span></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tidymodels-og-introduktion-til-maskin-læring.html"><a href="tidymodels-og-introduktion-til-maskin-læring.html"><i class="fa fa-check"></i><b>12</b> Tidymodels og introduktion til maskin læring<span></span></a>
<ul>
<li class="chapter" data-level="12.1" data-path="tidymodels-og-introduktion-til-maskin-læring.html"><a href="tidymodels-og-introduktion-til-maskin-læring.html#læringsmålene-7"><i class="fa fa-check"></i><b>12.1</b> Læringsmålene<span></span></a></li>
<li class="chapter" data-level="12.2" data-path="tidymodels-og-introduktion-til-maskin-læring.html"><a href="tidymodels-og-introduktion-til-maskin-læring.html#purpose-of-chapter"><i class="fa fa-check"></i><b>12.2</b> Purpose of chapter<span></span></a></li>
<li class="chapter" data-level="12.3" data-path="tidymodels-og-introduktion-til-maskin-læring.html"><a href="tidymodels-og-introduktion-til-maskin-læring.html#testing-and-training-sets"><i class="fa fa-check"></i><b>12.3</b> Testing and training sets<span></span></a></li>
<li class="chapter" data-level="12.4" data-path="tidymodels-og-introduktion-til-maskin-læring.html"><a href="tidymodels-og-introduktion-til-maskin-læring.html#regression-in-the-tidy-model-framework"><i class="fa fa-check"></i><b>12.4</b> Regression in the tidy model framework<span></span></a></li>
<li class="chapter" data-level="12.5" data-path="tidymodels-og-introduktion-til-maskin-læring.html"><a href="tidymodels-og-introduktion-til-maskin-læring.html#classification-in-the-tidy-model-framework"><i class="fa fa-check"></i><b>12.5</b> Classification in the tidy model framework<span></span></a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="tidymodels-og-introduktion-til-maskin-læring.html"><a href="tidymodels-og-introduktion-til-maskin-læring.html#titanic-survival"><i class="fa fa-check"></i><b>12.5.1</b> Titanic survival<span></span></a></li>
<li class="chapter" data-level="12.5.2" data-path="tidymodels-og-introduktion-til-maskin-læring.html"><a href="tidymodels-og-introduktion-til-maskin-læring.html#fit-workflow-on-titanic-data"><i class="fa fa-check"></i><b>12.5.2</b> Fit workflow on titanic data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="tidymodels-og-introduktion-til-maskin-læring.html"><a href="tidymodels-og-introduktion-til-maskin-læring.html#how-good-is-the-fit"><i class="fa fa-check"></i><b>12.6</b> How good is the fit?<span></span></a></li>
<li class="chapter" data-level="12.7" data-path="tidymodels-og-introduktion-til-maskin-læring.html"><a href="tidymodels-og-introduktion-til-maskin-læring.html#cross-validation"><i class="fa fa-check"></i><b>12.7</b> Cross validation<span></span></a>
<ul>
<li class="chapter" data-level="12.7.1" data-path="tidymodels-og-introduktion-til-maskin-læring.html"><a href="tidymodels-og-introduktion-til-maskin-læring.html#khan-data-maybe-for-workshop"><i class="fa fa-check"></i><b>12.7.1</b> Khan data (maybe for workshop)<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html"><i class="fa fa-check"></i><b>13</b> Presæntering af datasæt over for andre<span></span></a>
<ul>
<li class="chapter" data-level="13.1" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#introduktion-til-chapter-og-læringsmålene"><i class="fa fa-check"></i><b>13.1</b> Introduktion til chapter og læringsmålene<span></span></a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#læringsmålene-8"><i class="fa fa-check"></i><b>13.1.1</b> Læringsmålene<span></span></a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#video-ressourcer-8"><i class="fa fa-check"></i><b>13.2</b> Video ressourcer<span></span></a></li>
<li class="chapter" data-level="13.3" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#interactiv-plots"><i class="fa fa-check"></i><b>13.3</b> Interactiv plots<span></span></a></li>
<li class="chapter" data-level="13.4" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#shiny"><i class="fa fa-check"></i><b>13.4</b> Shiny<span></span></a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#eksempeler-som-viser-shiny"><i class="fa fa-check"></i><b>13.4.1</b> Eksempeler som viser Shiny<span></span></a></li>
<li class="chapter" data-level="13.4.2" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#create-new-app"><i class="fa fa-check"></i><b>13.4.2</b> Create new app<span></span></a></li>
<li class="chapter" data-level="13.4.3" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#struktur-af-en-shiny-app"><i class="fa fa-check"></i><b>13.4.3</b> Struktur af en Shiny App<span></span></a></li>
<li class="chapter" data-level="13.4.4" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#minimal-example-men-ikke-interaktiv"><i class="fa fa-check"></i><b>13.4.4</b> Minimal example (men ikke interaktiv)<span></span></a></li>
<li class="chapter" data-level="13.4.5" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#minimal-example---interactiv."><i class="fa fa-check"></i><b>13.4.5</b> Minimal example - interactiv.<span></span></a></li>
<li class="chapter" data-level="13.4.6" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#flere-plots-på-samme-shiny-app"><i class="fa fa-check"></i><b>13.4.6</b> Flere plots på samme Shiny app<span></span></a></li>
<li class="chapter" data-level="13.4.7" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#involvere-en-table"><i class="fa fa-check"></i><b>13.4.7</b> Involvere en table<span></span></a></li>
<li class="chapter" data-level="13.4.8" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#add-a-slider"><i class="fa fa-check"></i><b>13.4.8</b> Add a slider<span></span></a></li>
<li class="chapter" data-level="13.4.9" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#ekstras-som-man-kan-tilføje-til-ui"><i class="fa fa-check"></i><b>13.4.9</b> Ekstras som man kan tilføje til <code>ui</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#ekstra-generelle-råd"><i class="fa fa-check"></i><b>13.5</b> Ekstra generelle råd<span></span></a></li>
<li class="chapter" data-level="13.6" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#andre-mulighederadvanceret-topics"><i class="fa fa-check"></i><b>13.6</b> Andre muligheder/advanceret topics<span></span></a></li>
<li class="chapter" data-level="13.7" data-path="presæntering-af-datasæt-over-for-andre.html"><a href="presæntering-af-datasæt-over-for-andre.html#problemstillinger-10"><i class="fa fa-check"></i><b>13.7</b> Problemstillinger<span></span></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Visualisering af biologiske datasæt - 2022</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="forbine-tables-iterations-og-funktioner" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Forbine tables, iterations og funktioner<a href="forbine-tables-iterations-og-funktioner.html#forbine-tables-iterations-og-funktioner" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><img src="plots/hex-tidyverse.png" width="15%" /></p>
<div id="inledning-og-læringsmålene-1" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Inledning og læringsmålene<a href="forbine-tables-iterations-og-funktioner.html#inledning-og-læringsmålene-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="læringsmålene-2" class="section level3 hasAnchor" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Læringsmålene<a href="forbine-tables-iterations-og-funktioner.html#læringsmålene-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>I skal være i stand til at:</p>
<ul>
<li>Benytte <code>left_join()</code> til at tilføje sample information til datasættet.</li>
<li>Anvende <code>map()</code> - funktioner til at udføre beregninger iterativt over flere kolonner og <code>nest()</code> til at lave analyser over forskellige dele af datasættet.</li>
<li>Kombinere <code>map()</code> med custom funktioner til at forbedre reproducerbarhed i analyser.</li>
</ul>
</div>
<div id="introduktion-til-chapter" class="section level3 hasAnchor" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Introduktion til Chapter<a href="forbine-tables-iterations-og-funktioner.html#introduktion-til-chapter" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Det er ofte tilfældet indenfor biologi, at man har sine data i den ene dataramme og nogle ekstra sample oplysninger i den anden dataramme. Derfor vil vi gerne have en måde, at integrere de to datarammer i R, som gøre, at vi kan inddrage de ekstra oplysninger når vi lave plots af de data.</p>
<p>Det er også ofte tilfældet indenfor biologi, at man har sine data værdier over forskellige kolonner som refererer til rigtige mange samples, replikater eller konditioner. Vi beskæftiger os med de <code>map()</code> funktioner, som kan benyttes til at lave iterativ baserende analyser i <code>R</code>.</p>
</div>
<div id="video-ressourcer-3" class="section level3 hasAnchor" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> Video ressourcer<a href="forbine-tables-iterations-og-funktioner.html#video-ressourcer-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Video 1: left_join of tables with extra sample information and plot</li>
</ul>
<p>Link her hvis det ikke virker nedenunder: <a href="https://player.vimeo.com/video/549630870" class="uri">https://player.vimeo.com/video/549630870</a></p>
<div class="vembedr">
<div>
<iframe class="vimeo-embed" src="https://player.vimeo.com/video/549630870" width="533" height="300" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
<ul>
<li>Video 2: Introduction to map functions for iterating over columns</li>
</ul>
<p>Link her hvis det ikke virker nedenunder: <a href="https://player.vimeo.com/video/549630848" class="uri">https://player.vimeo.com/video/549630848</a></p>
<div class="vembedr">
<div>
<iframe class="vimeo-embed" src="https://player.vimeo.com/video/549630848" width="533" height="300" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
<ul>
<li>Video 3: Introduction to custom functions and combining them with map</li>
</ul>
<p>Link her hvis det ikke virker nedenunder: <a href="https://player.vimeo.com/video/549630825" class="uri">https://player.vimeo.com/video/549630825</a></p>
<div class="vembedr">
<div>
<iframe class="vimeo-embed" src="https://player.vimeo.com/video/549630825" width="533" height="300" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
<ul>
<li>Video 4: Introduction to nest functions for breaking data into sections</li>
</ul>
<p>Link her hvis det ikke virker nedenunder: <a href="https://player.vimeo.com/video/549630798" class="uri">https://player.vimeo.com/video/549630798</a></p>
<div class="vembedr">
<div>
<iframe class="vimeo-embed" src="https://player.vimeo.com/video/549630798" width="533" height="300" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
</div>
</div>
<div id="tilføje-sample-oplysninger-med-left_join" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Tilføje sample oplysninger med <code>left_join()</code><a href="forbine-tables-iterations-og-funktioner.html#tilføje-sample-oplysninger-med-left_join" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For at bedste demonstrere scenariet, har jeg lavet nogle fiktiv data fra et eksperiment, hvor man indhenter målinger over 100 tidspunkter, for to konditioner (treatment og control). Der er tre replikater til hver kondition. Jeg har også lavet en table, som viser forskellige oplysninger om de samples, som ikke er med i de egentlige data.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="forbine-tables-iterations-og-funktioner.html#cb294-1" aria-hidden="true" tabindex="-1"></a>data_exper <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://www.dropbox.com/s/hb7m63agz4jti6w/fictive_left_join.txt?dl=1&quot;</span>,<span class="at">header=</span>T)</span>
<span id="cb294-2"><a href="forbine-tables-iterations-og-funktioner.html#cb294-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb294-3"><a href="forbine-tables-iterations-og-funktioner.html#cb294-3" aria-hidden="true" tabindex="-1"></a>samples <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;control_rep1&quot;</span>, <span class="st">&quot;control_rep2&quot;</span>, <span class="st">&quot;control_rep3&quot;</span>,<span class="st">&quot;treat_rep1&quot;</span>, <span class="st">&quot;treat_rep2&quot;</span>, <span class="st">&quot;treat_rep3&quot;</span>)</span>
<span id="cb294-4"><a href="forbine-tables-iterations-og-funktioner.html#cb294-4" aria-hidden="true" tabindex="-1"></a>condition <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;(.+)_rep[1|2|3]&quot;</span>,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>,samples)</span>
<span id="cb294-5"><a href="forbine-tables-iterations-og-funktioner.html#cb294-5" aria-hidden="true" tabindex="-1"></a>replicate <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;.+_rep([1|2|3])&quot;</span>,<span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>,samples)</span>
<span id="cb294-6"><a href="forbine-tables-iterations-og-funktioner.html#cb294-6" aria-hidden="true" tabindex="-1"></a>batch <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>)</span>
<span id="cb294-7"><a href="forbine-tables-iterations-og-funktioner.html#cb294-7" aria-hidden="true" tabindex="-1"></a>sample_info <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">&quot;sample&quot;</span><span class="ot">=</span>samples,<span class="st">&quot;condition&quot;</span><span class="ot">=</span>condition,<span class="st">&quot;replicate&quot;</span><span class="ot">=</span>replicate,<span class="st">&quot;batch&quot;</span><span class="ot">=</span>batch)</span></code></pre></div>
<p>Lad os kigge på datasættet <code>data_expr</code>:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="forbine-tables-iterations-og-funktioner.html#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data_exper)</span></code></pre></div>
<pre><code>##    x control_rep1 control_rep2 control_rep3 treat_rep1 treat_rep2 treat_rep3
## 1  2   -0.6222110    12.112904     8.624800  10.504877  -5.793916   22.26163
## 2  4   -5.7463250    26.082811    -8.929131 -13.287492   8.068806   11.50306
## 3  6    2.7762770     3.834661    14.663878  16.328472  18.107530   10.11893
## 4  8    5.4739947     0.344840    -6.184393   7.770677   7.311946   20.78667
## 5 10   -9.1930518    10.890655     6.855960   6.299163  21.456005   23.81832
## 6 12    0.2531807    13.079257    -5.423093   8.472125  27.178203   29.94170</code></pre>
<p>Lad os også kigge på de sample oplysninger, som kan være nyttige at inddrage i vores analyse/plotter for at undersøge eventualle batch effekter osv.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="forbine-tables-iterations-og-funktioner.html#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sample_info)</span></code></pre></div>
<pre><code>##         sample condition replicate batch
## 1 control_rep1   control         1     A
## 2 control_rep2   control         2     B
## 3 control_rep3   control         3     A
## 4   treat_rep1     treat         1     B
## 5   treat_rep2     treat         2     A
## 6   treat_rep3     treat         3     B</code></pre>
<p>Som man kan se, har vi en kolon som viser hvilke kondition og replikate vores samples kommer fra (det er også oplagt fra sample navne her, men det er ikke altid), samt den batch, hver sample kommer fra. For at integrere de to tables, skal vi første have de data i <strong>Long form</strong>.</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="forbine-tables-iterations-og-funktioner.html#cb299-1" aria-hidden="true" tabindex="-1"></a>data_long <span class="ot">&lt;-</span> data_exper <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols=</span> <span class="sc">-</span>x, </span>
<span id="cb299-2"><a href="forbine-tables-iterations-og-funktioner.html#cb299-2" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">names_to=</span><span class="st">&quot;sample&quot;</span>,</span>
<span id="cb299-3"><a href="forbine-tables-iterations-og-funktioner.html#cb299-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">values_to=</span><span class="st">&quot;measurement&quot;</span>)</span>
<span id="cb299-4"><a href="forbine-tables-iterations-og-funktioner.html#cb299-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data_long)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##       x sample       measurement
##   &lt;int&gt; &lt;chr&gt;              &lt;dbl&gt;
## 1     2 control_rep1      -0.622
## 2     2 control_rep2      12.1  
## 3     2 control_rep3       8.62 
## 4     2 treat_rep1        10.5  
## 5     2 treat_rep2        -5.79 
## 6     2 treat_rep3        22.3</code></pre>
<div id="fuktionen-left_join-fra-dplyr-pakken" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Fuktionen <code>left_join()</code> fra dplyr-pakken<a href="forbine-tables-iterations-og-funktioner.html#fuktionen-left_join-fra-dplyr-pakken" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Funktionen <code>left_join()</code> er en del af pakken <code>dplyr</code> som vi har arbejdet meget med indtil videre i kurset. Her er en meget kort beskrivelse af de fire hoved <code>join</code> funktioner.</p>
<table>
<thead>
<tr class="header">
<th>funktion</th>
<th>Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>left_join()</code></td>
<td>Join matching rows from second table to the first</td>
</tr>
<tr class="even">
<td><code>right_join()</code></td>
<td>Join matching rows from the first table to the second</td>
</tr>
<tr class="odd">
<td><code>inner_join()</code></td>
<td>Join two tables, returning all rows present in both</td>
</tr>
<tr class="even">
<td><code>full_join()</code></td>
<td>Join data with all possible rows present</td>
</tr>
</tbody>
</table>
<p>Vi fokuserer her på funktionen <code>left_join()</code> fordi den er den meste brugbart i biologiske data analyser. Her er en grafiske demonstration af <code>left_join()</code>:</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-310"></span>
<img src="plots/left_join.png" alt="left_join graphical demonstration (source https://mgimond.github.io/ES218/Week03c.html)" width="60%" />
<p class="caption">
Figure 7.1: left_join graphical demonstration (source <a href="https://mgimond.github.io/ES218/Week03c.html" class="uri">https://mgimond.github.io/ES218/Week03c.html</a>)
</p>
</div>
</div>
<div id="anvende-left_join-for-vores-fiktiv-dataset." class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Anvende <code>left_join()</code> for vores fiktiv dataset.<a href="forbine-tables-iterations-og-funktioner.html#anvende-left_join-for-vores-fiktiv-dataset." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For at bedste forstå funktionen <code>left_join()</code> skal vi afprøve den med vores datasæt. Her tager vi udgangspunkt i <code>data_long</code> og så tilføjer de data fra <code>sample_info</code>. Her angiver vi <code>by = "sample"</code> fordi det er navnet til kolonnen som vi geerne vil bruge til at forbinde de to datarammer - altså, det er med i begge to datarammer, så <code>left_join()</code> kan bruge den som en slags nøgle til at vide, hvor alle de forskellige oplysninger skal tilføjes.</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb301-1"><a href="forbine-tables-iterations-og-funktioner.html#cb301-1" aria-hidden="true" tabindex="-1"></a>data_long_join <span class="ot">&lt;-</span> data_long  <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(sample_info,<span class="at">by =</span> <span class="st">&quot;sample&quot;</span>)</span>
<span id="cb301-2"><a href="forbine-tables-iterations-og-funktioner.html#cb301-2" aria-hidden="true" tabindex="-1"></a>data_long_join</span></code></pre></div>
<pre><code>## # A tibble: 600 × 6
##        x sample       measurement condition replicate batch
##    &lt;int&gt; &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;
##  1     2 control_rep1      -0.622 control   1         A    
##  2     2 control_rep2      12.1   control   2         B    
##  3     2 control_rep3       8.62  control   3         A    
##  4     2 treat_rep1        10.5   treat     1         B    
##  5     2 treat_rep2        -5.79  treat     2         A    
##  6     2 treat_rep3        22.3   treat     3         B    
##  7     4 control_rep1      -5.75  control   1         A    
##  8     4 control_rep2      26.1   control   2         B    
##  9     4 control_rep3      -8.93  control   3         A    
## 10     4 treat_rep1       -13.3   treat     1         B    
## # … with 590 more rows</code></pre>
<p>Nu at vi har fået forbundet de to datarammer, kan man inddrage de ekstra oplysninger vi har fået i et plot. Her laver vi et plot med en farve til hver kondition og et plot med en farve til hver batch.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="forbine-tables-iterations-og-funktioner.html#cb303-1" aria-hidden="true" tabindex="-1"></a>gg1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data_long_join,<span class="fu">aes</span>(<span class="at">y=</span>measurement,<span class="at">x=</span>x,<span class="at">colour=</span>condition)) <span class="sc">+</span> </span>
<span id="cb303-2"><a href="forbine-tables-iterations-og-funktioner.html#cb303-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb303-3"><a href="forbine-tables-iterations-og-funktioner.html#cb303-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb303-4"><a href="forbine-tables-iterations-og-funktioner.html#cb303-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Set2&quot;</span>) <span class="sc">+</span></span>
<span id="cb303-5"><a href="forbine-tables-iterations-og-funktioner.html#cb303-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span>
<span id="cb303-6"><a href="forbine-tables-iterations-og-funktioner.html#cb303-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-7"><a href="forbine-tables-iterations-og-funktioner.html#cb303-7" aria-hidden="true" tabindex="-1"></a>gg2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data_long_join,<span class="fu">aes</span>(<span class="at">y=</span>measurement,<span class="at">x=</span>x,<span class="at">colour=</span>batch)) <span class="sc">+</span> </span>
<span id="cb303-8"><a href="forbine-tables-iterations-og-funktioner.html#cb303-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb303-9"><a href="forbine-tables-iterations-og-funktioner.html#cb303-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb303-10"><a href="forbine-tables-iterations-og-funktioner.html#cb303-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Set3&quot;</span>) <span class="sc">+</span></span>
<span id="cb303-11"><a href="forbine-tables-iterations-og-funktioner.html#cb303-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span>
<span id="cb303-12"><a href="forbine-tables-iterations-og-funktioner.html#cb303-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb303-13"><a href="forbine-tables-iterations-og-funktioner.html#cb303-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb303-14"><a href="forbine-tables-iterations-og-funktioner.html#cb303-14" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(gg1,gg2,<span class="at">ncol=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="visualisering_22_files/figure-html/unnamed-chunk-312-1.png" width="768" /></p>
<p>Vi kan se, at man kan godt kan skelne imellem de målingerne for de to konditioner, men ikke så meget for de to batches. Det betyder, at vores kondition effekt er stærkere end den batch effekt, som er en god tegn for vores analyse af datasættet.</p>
<!-- ```{r} -->
<!-- #plant <- matrix(PlantGrowth$weight,nrow=10,ncol=3) -->
<!-- ``` -->
</div>
</div>
<div id="iterativ-processer-med-map-fuktioner" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Iterativ processer med <code>map()</code> fuktioner<a href="forbine-tables-iterations-og-funktioner.html#iterativ-processer-med-map-fuktioner" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Når man lave en interativ proces, vil man gerne lave samme ting gentagne gange. Det kan være for eksempel, at vi har ti variabler og vi gerne vil beregne middelværdien for hver variable. Indenfor biologi er det et meget realistisk scenarie, for eksempel hvis man har mange replikater, konditioner eller tidspunkter og gerne vil beregne noget på dem alle sammen - det kan være at man gerne vil normalisere ekspressionsniveauerne over forskellige gener, osv.</p>
<p>I resten af dette kapitel, lad os beskæftige os med en datasæt der hedder <code>eukaryotes</code>, som indeholder meget oplysninger om forskellige organismer som hører til eukaryotes - for eksempel deres navne, gruppe, sub-gruppe, antal proteins/genes, genom størrelse og så videre. Man kan få de data indlæste med følgende kommando og se en list over for de forskellige kolon navne nedenfor.</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="forbine-tables-iterations-og-funktioner.html#cb304-1" aria-hidden="true" tabindex="-1"></a>eukaryotes <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;https://www.dropbox.com/s/3u4nuj039itzg8l/eukaryotes.tsv?dl=1&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 11508 Columns: 19
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;\t&quot;
## chr  (10): organism_name, bioproject_accession, group, subgroup, assembly_ac...
## dbl   (7): taxid, bioproject_id, size_mb, gc, scaffolds, genes, proteins
## date  (2): release_date, modify_date
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p>Vi tager udgangspunkt i kun fire variabler, så for at gøre tingene mere enkel, har jeg brugt <code>select()</code> til at kun får de fire variabler <code>organism_name</code>,<code>center</code>,<code>group</code> og <code>subgroup</code> i en dataramme.</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="forbine-tables-iterations-og-funktioner.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="co">#eukaryotes_full &lt;- eukaryotes</span></span>
<span id="cb306-2"><a href="forbine-tables-iterations-og-funktioner.html#cb306-2" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset <span class="ot">&lt;-</span> eukaryotes <span class="sc">%&gt;%</span> <span class="fu">select</span>(organism_name, center, group, subgroup)</span>
<span id="cb306-3"><a href="forbine-tables-iterations-og-funktioner.html#cb306-3" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   organism_name              center                               group subgroup
##   &lt;chr&gt;                      &lt;chr&gt;                                &lt;chr&gt; &lt;chr&gt;   
## 1 Pyropia yezoensis          Ocean University                     Other Other   
## 2 Emiliania huxleyi CCMP1516 JGI                                  Prot… Other P…
## 3 Arabidopsis thaliana       The Arabidopsis Information Resourc… Plan… Land Pl…
## 4 Glycine max                US DOE Joint Genome Institute (JGI-… Plan… Land Pl…
## 5 Medicago truncatula        International Medicago Genome Annot… Plan… Land Pl…
## 6 Solanum lycopersicum       Solanaceae Genomics Project          Plan… Land Pl…</code></pre>
<p>Lad os forestille os, at vi er interesseret i antallet af unikke organismer (variablen <code>organism_name</code>). Der er en funktion der hedder <code>n_distinct</code> som beregner antallet af unikke værdier i en vector/variable. Her vælger vi <code>organism_name</code> og så tilføjer <code>n_distinct()</code>.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="forbine-tables-iterations-og-funktioner.html#cb308-1" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset <span class="sc">%&gt;%</span> </span>
<span id="cb308-2"><a href="forbine-tables-iterations-og-funktioner.html#cb308-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(organism_name) <span class="sc">%&gt;%</span> </span>
<span id="cb308-3"><a href="forbine-tables-iterations-og-funktioner.html#cb308-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">n_distinct</span>()</span></code></pre></div>
<pre><code>## [1] 6111</code></pre>
<p>Lad os forestille os, at vi også er interesseret i antallet af unikke værdier i variablerne <code>center</code>, <code>group</code> og <code>subgroup</code> - som er de tre andre kolonner i datasættet. Vi har forskellige muligheder:</p>
<ul>
<li>Skrive dem ud - men hvad nu hvis vi havde 100 variabler at håndtere?</li>
</ul>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="forbine-tables-iterations-og-funktioner.html#cb310-1" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset <span class="sc">%&gt;%</span> <span class="fu">select</span>(organism_name) <span class="sc">%&gt;%</span> <span class="fu">n_distinct</span>()</span>
<span id="cb310-2"><a href="forbine-tables-iterations-og-funktioner.html#cb310-2" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset <span class="sc">%&gt;%</span> <span class="fu">select</span>(center) <span class="sc">%&gt;%</span> <span class="fu">n_distinct</span>()</span>
<span id="cb310-3"><a href="forbine-tables-iterations-og-funktioner.html#cb310-3" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset <span class="sc">%&gt;%</span> <span class="fu">select</span>(group) <span class="sc">%&gt;%</span> <span class="fu">n_distinct</span>()</span>
<span id="cb310-4"><a href="forbine-tables-iterations-og-funktioner.html#cb310-4" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset <span class="sc">%&gt;%</span> <span class="fu">select</span>(subgroup) <span class="sc">%&gt;%</span> <span class="fu">n_distinct</span>()</span></code></pre></div>
<pre><code>## [1] 6111
## [1] 2137
## [1] 5
## [1] 19</code></pre>
<ul>
<li>Vi kræver en mere automatiske løsning på det. Vi bruger ikke tid på det her, men der er den traditionele programmering løsning: for loop, som fungerer også i R:</li>
</ul>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="forbine-tables-iterations-og-funktioner.html#cb312-1" aria-hidden="true" tabindex="-1"></a>col_names <span class="ot">&lt;-</span> <span class="fu">names</span>(eukaryotes_subset)</span>
<span id="cb312-2"><a href="forbine-tables-iterations-og-funktioner.html#cb312-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-3"><a href="forbine-tables-iterations-og-funktioner.html#cb312-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(column_name <span class="cf">in</span> col_names)</span>
<span id="cb312-4"><a href="forbine-tables-iterations-og-funktioner.html#cb312-4" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb312-5"><a href="forbine-tables-iterations-og-funktioner.html#cb312-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(eukaryotes_subset <span class="sc">%&gt;%</span> </span>
<span id="cb312-6"><a href="forbine-tables-iterations-og-funktioner.html#cb312-6" aria-hidden="true" tabindex="-1"></a>          <span class="fu">select</span>(column_name) <span class="sc">%&gt;%</span> </span>
<span id="cb312-7"><a href="forbine-tables-iterations-og-funktioner.html#cb312-7" aria-hidden="true" tabindex="-1"></a>          <span class="fu">n_distinct</span>())</span>
<span id="cb312-8"><a href="forbine-tables-iterations-og-funktioner.html#cb312-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## Note: Using an external vector in selections is ambiguous.
## ℹ Use `all_of(column_name)` instead of `column_name` to silence this message.
## ℹ See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.
## This message is displayed once per session.</code></pre>
<pre><code>## [1] 6111
## [1] 2137
## [1] 5
## [1] 19</code></pre>
<p>Man i teorien kan holde sig til for loops men jeg vil gerne præsentere den <code>tidyverse</code> løsning, som bliver mere intuitiv og nemmere for ændre at læse koden når man er vant til det (det integrerer også bedre med de andre <code>tidyverse</code> pakker).</p>
<div id="introduktion-til-map-funktioner" class="section level3 hasAnchor" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Introduktion til <code>map()</code> funktioner<a href="forbine-tables-iterations-og-funktioner.html#introduktion-til-map-funktioner" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Den <code>tidyverse</code> løsning til at lave iterativ processer er såkaldte <code>map()</code> funktioner, som er en del af pakken <code>purrr</code> og er stadig relative nye. Jeg introducerer dem her frem for de base-R løsninger ikke bare fordi de er <code>tidyverse</code>, men fordi de er en meget fleksibelt og nemt at forstå tilgang, når man vænner sig til dem.</p>
<p>Jeg viser hvordan de fungere igennem <code>eukaryotes</code> og bagefter introducerer dem i konteksten af custom funktioner og <code>nest()</code> som kan bruges til at opdele datasættet indtil forskellige dele (ovenpå hvori man kan lave flere iterativ processer).</p>
<p><code>map()</code> er det <code>tidyverse</code> svar til en for loop (eller <code>apply</code> hvis man har kendskab til det). Man anvender <code>map()</code> ved at angiv funktionen navn <code>n_distinct</code> indenfor <code>map()</code>, og <code>map()</code> beregner <code>n_distinct()</code> for hver kolon i datasættet.</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="forbine-tables-iterations-og-funktioner.html#cb315-1" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset <span class="sc">%&gt;%</span> <span class="fu">map</span>(n_distinct) <span class="co">#do &#39;n_distinct&#39; for every single column</span></span></code></pre></div>
<pre><code>## $organism_name
## [1] 6111
## 
## $center
## [1] 2137
## 
## $group
## [1] 5
## 
## $subgroup
## [1] 19</code></pre>
<p>Så kan man se, at vi har fået en <code>list</code> tilbage, med en tal som viser antallet af unikke værdier til hver af de fire kolonner. Det fungerer lidt som den base-R funktion <code>apply</code>, men med <code>apply</code> skal man bruge <code>2</code> i anden plads til at fortælle, at vi gerne vil iterate over kolonnerne.</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="forbine-tables-iterations-og-funktioner.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(eukaryotes_subset,<span class="dv">2</span>,n_distinct)</span></code></pre></div>
<pre><code>## organism_name        center         group      subgroup 
##          6111          2137             5            19</code></pre>
<p>Bemærk at vi har fået her en vector af tal tilbage, men vi fået en <code>list</code> med <code>map</code>. Der er faktisk andre varianter af <code>map</code> som kan benyttes til at give resultatet som andre data typer. For eksempel, kan man bruge <code>map_dbl()</code> til at få en double <code>dbl</code> tilbage - en vector af tal ligesom vi fået med <code>apply</code> i ovenstående.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="forbine-tables-iterations-og-funktioner.html#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply n_distinct to all variables, returning a double</span></span>
<span id="cb319-2"><a href="forbine-tables-iterations-og-funktioner.html#cb319-2" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset <span class="sc">%&gt;%</span> <span class="fu">map_dbl</span>(n_distinct)</span></code></pre></div>
<pre><code>## organism_name        center         group      subgroup 
##          6111          2137             5            19</code></pre>
<p>Man kan også bruge <code>map_df()</code> for at få en dataramme (<code>tibble</code>) tilbage - det er særligt nyttigt for os, fordi vi tager altid udgangspunkt i en dataramme når vi skal få lavet et plot.</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="forbine-tables-iterations-og-funktioner.html#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply n_distinct to all variables, returning a dataframe</span></span>
<span id="cb321-2"><a href="forbine-tables-iterations-og-funktioner.html#cb321-2" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(n_distinct)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   organism_name center group subgroup
##           &lt;int&gt;  &lt;int&gt; &lt;int&gt;    &lt;int&gt;
## 1          6111   2137     5       19</code></pre>
<p>For eksempel, kan man tilføje de tal fra <code>map_df</code> direkte ind i et ggplot.</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="forbine-tables-iterations-og-funktioner.html#cb323-1" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset <span class="sc">%&gt;%</span> </span>
<span id="cb323-2"><a href="forbine-tables-iterations-og-funktioner.html#cb323-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(n_distinct) <span class="sc">%&gt;%</span> </span>
<span id="cb323-3"><a href="forbine-tables-iterations-og-funktioner.html#cb323-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">&quot;variable&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;count&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb323-4"><a href="forbine-tables-iterations-og-funktioner.html#cb323-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> variable, <span class="at">y =</span> count,<span class="at">fill =</span> variable)) <span class="sc">+</span></span>
<span id="cb323-5"><a href="forbine-tables-iterations-og-funktioner.html#cb323-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb323-6"><a href="forbine-tables-iterations-og-funktioner.html#cb323-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> </span>
<span id="cb323-7"><a href="forbine-tables-iterations-og-funktioner.html#cb323-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="visualisering_22_files/figure-html/unnamed-chunk-322-1.png" width="480" /></p>
<!-- ### Map funktion med arguments -->
<!-- En ting som er vigtig at husk - hvis man gerne vil tilføje arguments indenfor de funktioner de specificer med `map()` så skal man tilføj `~` som i følgende: -->
<!-- ```{r} -->
<!-- eukaryotes_subset %>% map_df(n_distinct) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- eukaryotes_subset %>% map_df(~.x %>% n_distinct(na.rm=TRUE)) -->
<!-- ``` -->
</div>
<div id="reference-for-the-different-map-functions" class="section level3 hasAnchor" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Reference for the different map functions<a href="forbine-tables-iterations-og-funktioner.html#reference-for-the-different-map-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!-- ```{r, echo=FALSE,out.height="100%",fig.cap="reference: https://adv-r.hadley.nz/functionals.html"} -->
<!-- # Bigger fig.width -->
<!-- library(png) -->
<!-- library(knitr) -->
<!-- include_graphics("plots/map-list.png") -->
<!-- ``` -->
<table>
<thead>
<tr class="header">
<th>Funktion</th>
<th>Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>map_lgl()</code></td>
<td>returns a logical</td>
</tr>
<tr class="even">
<td><code>map_int()</code></td>
<td>returns an integer vector</td>
</tr>
<tr class="odd">
<td><code>map_dbl()</code></td>
<td>returns a double vector</td>
</tr>
<tr class="even">
<td><code>map_chr()</code></td>
<td>returns a character vector</td>
</tr>
<tr class="odd">
<td><code>map_df()</code></td>
<td>returns a data frame</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="custom-functions" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Custom functions<a href="forbine-tables-iterations-og-funktioner.html#custom-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Vi kan lave vores egne funktioner og betnytter dem indenfor map til at yderligere øge fleksibiliteten i R. For eksempel, kan det være at vi har en bestemt idé overfor, hvordan vi gerne vil normalisere vores data, og der eksisterer ikke en relevant funktion indenfor R i forvejen.</p>
<div id="simple-functions" class="section level3 hasAnchor" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Simple functions<a href="forbine-tables-iterations-og-funktioner.html#simple-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Vi starter med en simpel funktion fra base-R og så forklare den i den table bagefter. Vi bruger mest en anden form af funktioner i <strong>tidyverse</strong> som vi kigger på næste, men koncepten er den samme.</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="forbine-tables-iterations-og-funktioner.html#cb324-1" aria-hidden="true" tabindex="-1"></a>my_function <span class="ot">&lt;-</span> <span class="cf">function</span>(.x)</span>
<span id="cb324-2"><a href="forbine-tables-iterations-og-funktioner.html#cb324-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb324-3"><a href="forbine-tables-iterations-og-funktioner.html#cb324-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">sum</span>(.x)<span class="sc">/</span><span class="fu">length</span>(.x))</span>
<span id="cb324-4"><a href="forbine-tables-iterations-og-funktioner.html#cb324-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>Kode</th>
<th>Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>my_function_name</code></td>
<td>funktion navn</td>
</tr>
<tr class="even">
<td><code>&lt;- function(.x)</code></td>
<td>fortæl R, at vi lave en funktion med nogle data <code>.x</code></td>
</tr>
<tr class="odd">
<td><code>sum(.x)/length(.x)</code></td>
<td>brug data <code>.x</code> til at beregne middelværdi</td>
</tr>
<tr class="even">
<td><code>return()</code></td>
<td>hvad funktionen skal output - her middelværdi</td>
</tr>
</tbody>
</table>
<p>Lad også afprøve vores nye funccion ved at beregne den gennemsnitlige værdi for <code>Sepal.Length</code> i <code>iris</code>.</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="forbine-tables-iterations-og-funktioner.html#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_function</span>(iris<span class="sc">$</span>Sepal.Length)</span>
<span id="cb325-2"><a href="forbine-tables-iterations-og-funktioner.html#cb325-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(iris<span class="sc">$</span>Sepal.Length)</span></code></pre></div>
<pre><code>## [1] 5.843333
## [1] 5.843333</code></pre>
</div>
<div id="custom-functions-with-mapping" class="section level3 hasAnchor" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> Custom functions with mapping<a href="forbine-tables-iterations-og-funktioner.html#custom-functions-with-mapping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Indenfor den <code>tidyverse</code> bruger man en lidt anden måde at skrive samme funktion på.</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="forbine-tables-iterations-og-funktioner.html#cb327-1" aria-hidden="true" tabindex="-1"></a>my_function <span class="ot">&lt;-</span> <span class="er">~</span> <span class="fu">sum</span>(.x)<span class="sc">/</span><span class="fu">length</span>(.x)</span></code></pre></div>
<ul>
<li><code>~</code> betyder at vi definere en funktion</li>
<li><code>.x</code> betyder de data, der vi angiver funktionen (for eksempel variablen <code>Sepal.Length</code> fra <code>iris</code>). Man bruger den symbol <code>.x</code> hver gang og R ved automatiske hvad det betyder.</li>
</ul>
<p>Vi kan bruge <code>my_function</code> indenfor <code>map()</code> for at beregne den gennemsnitlige værdi for alle variabler (uden Species), og vi kan se at vi få tilsvarende resultat til funktionen <code>mean()</code>:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="forbine-tables-iterations-og-funktioner.html#cb328-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb328-2"><a href="forbine-tables-iterations-og-funktioner.html#cb328-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span> </span>
<span id="cb328-3"><a href="forbine-tables-iterations-og-funktioner.html#cb328-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(my_function)</span>
<span id="cb328-4"><a href="forbine-tables-iterations-og-funktioner.html#cb328-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb328-5"><a href="forbine-tables-iterations-og-funktioner.html#cb328-5" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb328-6"><a href="forbine-tables-iterations-og-funktioner.html#cb328-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span> </span>
<span id="cb328-7"><a href="forbine-tables-iterations-og-funktioner.html#cb328-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(mean)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   Sepal.Length Sepal.Width Petal.Length Petal.Width
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1         5.84        3.06         3.76        1.20
## # A tibble: 1 × 4
##   Sepal.Length Sepal.Width Petal.Length Petal.Width
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1         5.84        3.06         3.76        1.20</code></pre>
<p>Man kan også placere funktionen direkte indenfor <code>map_df</code> i stedet for at kalde den for nogle (fk. <code>my_funktion</code>):</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="forbine-tables-iterations-og-funktioner.html#cb330-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb330-2"><a href="forbine-tables-iterations-og-funktioner.html#cb330-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span></span>
<span id="cb330-3"><a href="forbine-tables-iterations-og-funktioner.html#cb330-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(<span class="sc">~</span> <span class="fu">sum</span>(.x)<span class="sc">/</span><span class="fu">length</span>(.x)) <span class="co">#for each data column, compute the sum and divide by the length</span></span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   Sepal.Length Sepal.Width Petal.Length Petal.Width
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1         5.84        3.06         3.76        1.20</code></pre>
<p>Vi kan godt specificere andre funktioner.</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="forbine-tables-iterations-og-funktioner.html#cb332-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb332-2"><a href="forbine-tables-iterations-og-funktioner.html#cb332-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(<span class="sc">~</span><span class="fu">nth</span>(.x,<span class="dv">10</span>)) <span class="co">#tag hver kolon, kalde det for .x og finde 10. værdi</span></span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
## 1          4.9         3.1          1.5         0.1 setosa</code></pre>
<p>eller når <code>nth</code> is a <strong>tidyverse</strong> funktion kan vi bruge <code>%&gt;%</code>:</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="forbine-tables-iterations-og-funktioner.html#cb334-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb334-2"><a href="forbine-tables-iterations-og-funktioner.html#cb334-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(<span class="sc">~</span>.x <span class="sc">%&gt;%</span> <span class="fu">nth</span>(<span class="dv">10</span>)) <span class="co">#tag hver kolon, kalde det for .x og finde 10. værdi</span></span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  
## 1          4.9         3.1          1.5         0.1 setosa</code></pre>
<p>Antallet af distinkt værdier som ikke er <code>NA</code>:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="forbine-tables-iterations-og-funktioner.html#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="co">#tag hver kolon, kalde det for .x og beregne n_distinct</span></span>
<span id="cb336-2"><a href="forbine-tables-iterations-og-funktioner.html#cb336-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb336-3"><a href="forbine-tables-iterations-og-funktioner.html#cb336-3" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb336-4"><a href="forbine-tables-iterations-og-funktioner.html#cb336-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(<span class="sc">~</span><span class="fu">n_distinct</span>(.x,<span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##          &lt;int&gt;       &lt;int&gt;        &lt;int&gt;       &lt;int&gt;   &lt;int&gt;
## 1           35          23           43          22       3</code></pre>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="forbine-tables-iterations-og-funktioner.html#cb338-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb338-2"><a href="forbine-tables-iterations-og-funktioner.html#cb338-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(<span class="sc">~</span>.x <span class="sc">%&gt;%</span> <span class="fu">n_distinct</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="co">#fordi n_dinstict er fra tidyverse</span></span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##          &lt;int&gt;       &lt;int&gt;        &lt;int&gt;       &lt;int&gt;   &lt;int&gt;
## 1           35          23           43          22       3</code></pre>
<p>Bemærk at hvis det er en indbygget funktion og vi benytter default parametre (altså na.rm = FALSE i ovenstående) kan man bare skrive:</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="forbine-tables-iterations-og-funktioner.html#cb340-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb340-2"><a href="forbine-tables-iterations-og-funktioner.html#cb340-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(n_distinct)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
##          &lt;int&gt;       &lt;int&gt;        &lt;int&gt;       &lt;int&gt;   &lt;int&gt;
## 1           35          23           43          22       3</code></pre>
<p>Et andet eksempel: tilføje 3 og square:</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="forbine-tables-iterations-og-funktioner.html#cb342-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb342-2"><a href="forbine-tables-iterations-og-funktioner.html#cb342-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span></span>
<span id="cb342-3"><a href="forbine-tables-iterations-og-funktioner.html#cb342-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(<span class="sc">~</span>(.x <span class="sc">+</span> <span class="dv">3</span>)<span class="sc">^</span><span class="dv">2</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   Sepal.Length Sepal.Width Petal.Length Petal.Width
##          &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
## 1         65.6        42.2         19.4        10.2
## 2         62.4        36           19.4        10.2
## 3         59.3        38.4         18.5        10.2
## 4         57.8        37.2         20.2        10.2
## 5         64          43.6         19.4        10.2
## 6         70.6        47.6         22.1        11.6</code></pre>
<p>Jo mere funktionen bliver indviklet, jo mere mening det giver at specificere den udenfor den <code>map()</code> funktion:</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="forbine-tables-iterations-og-funktioner.html#cb344-1" aria-hidden="true" tabindex="-1"></a>my_function <span class="ot">&lt;-</span> <span class="er">~</span>(.x <span class="sc">-</span> <span class="fu">mean</span>(.x))<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="fl">0.5</span><span class="sc">*</span>(.x <span class="sc">-</span> <span class="fu">sd</span>(.x))<span class="sc">^</span><span class="dv">2</span> <span class="co">#en lang funktion</span></span>
<span id="cb344-2"><a href="forbine-tables-iterations-og-funktioner.html#cb344-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb344-3"><a href="forbine-tables-iterations-og-funktioner.html#cb344-3" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb344-4"><a href="forbine-tables-iterations-og-funktioner.html#cb344-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Species) <span class="sc">%&gt;%</span></span>
<span id="cb344-5"><a href="forbine-tables-iterations-og-funktioner.html#cb344-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_df</span>(my_function) <span class="co">#beregne my_function for hver kolon og output en dataramme </span></span></code></pre></div>
<pre><code>## # A tibble: 150 × 4
##    Sepal.Length Sepal.Width Petal.Length Petal.Width
##           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;
##  1         9.68        4.89         5.63       1.16 
##  2         9.18        3.29         5.63       1.16 
##  3         8.80        3.84         6.15       1.16 
##  4         8.66        3.55         5.13       1.16 
##  5         9.41        5.30         5.63       1.16 
##  6        10.6         6.71         4.24       0.705
##  7         8.66        4.51         5.63       0.916
##  8         9.41        4.51         5.13       1.16 
##  9         8.46        3.06         5.63       1.16 
## 10         9.18        3.55         5.13       1.43 
## # … with 140 more rows</code></pre>
</div>
</div>
<div id="nesting-nest" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Nesting <code>nest()</code><a href="forbine-tables-iterations-og-funktioner.html#nesting-nest" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Vi kommer til at se i næste lektion, at det er meget nyttige at bruge funktionen <code>nest()</code> for at få svar på adskillige statistiske spørgsmål. Det kan være for eksempel:</p>
<ul>
<li>Vi har lavet 10 eksperimental under lidt forskellige konditioner, og gerne vil lave præcis samme analyse på alle 10.</li>
<li>Vi har 5 forskellige type bakterier med 3 replikater til hver, og gerne vil transformere de data på samme måde efter bakterien og replikat.</li>
</ul>
<p>Funktionen <code>nest()</code> kan virke lidt abstract i starten men koncepten er faktisk ret simpelt. Vi kan opelde vores datasæt (som indeholder vores forskellige konditioner/replikats etc.) med <code>group_by()</code> og så bruge <code>nest()</code> til at gemme de opdelt “sub” datasæt i en list. De bliver gemt indenfor en kolon i en <code>tibble</code>, og det gøre det bekvemt at arbejde med de forskellige datasæt på samme tid (med hjælp af <code>map()</code>).</p>
<p><img src="plots/tidyr-nest.png" width="100%" /></p>
<p>Lad os opdele <code>eurkaryotes_subset</code> efter variablen ‘group’ og anvende <code>nest()</code>:</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="forbine-tables-iterations-og-funktioner.html#cb346-1" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset_nested <span class="ot">&lt;-</span> eukaryotes_subset <span class="sc">%&gt;%</span> </span>
<span id="cb346-2"><a href="forbine-tables-iterations-og-funktioner.html#cb346-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb346-3"><a href="forbine-tables-iterations-og-funktioner.html#cb346-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>()</span>
<span id="cb346-4"><a href="forbine-tables-iterations-og-funktioner.html#cb346-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb346-5"><a href="forbine-tables-iterations-og-funktioner.html#cb346-5" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset_nested</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
## # Groups:   group [5]
##   group    data                
##   &lt;chr&gt;    &lt;list&gt;              
## 1 Other    &lt;tibble [51 × 3]&gt;   
## 2 Protists &lt;tibble [888 × 3]&gt;  
## 3 Plants   &lt;tibble [1,304 × 3]&gt;
## 4 Fungi    &lt;tibble [6,064 × 3]&gt;
## 5 Animals  &lt;tibble [3,201 × 3]&gt;</code></pre>
<p>Vi kan se at vi har to variabler - <code>group</code> og <code>data</code>. Variablen <code>data</code> er indeholde faktisk fem dataramme (tibble), for eksempel den første datasæt har kun observationerne hvor <code>group</code> er lig med “Other,” den anden dataset har kun observationerne hvor <code>group</code> er lig med “Protists” osv.</p>
<p>Vi kan tjekke ved at kig på den første datasæt: her er to måder at gøre det på:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="forbine-tables-iterations-og-funktioner.html#cb348-1" aria-hidden="true" tabindex="-1"></a>first_dataset <span class="ot">&lt;-</span> eukaryotes_subset_nested<span class="sc">$</span>data[[<span class="dv">1</span>]] </span>
<span id="cb348-2"><a href="forbine-tables-iterations-og-funktioner.html#cb348-2" aria-hidden="true" tabindex="-1"></a>first_dataset <span class="ot">&lt;-</span> eukaryotes_subset_nested <span class="sc">%&gt;%</span> <span class="fu">pluck</span>(<span class="st">&quot;data&quot;</span>,<span class="dv">1</span>)</span>
<span id="cb348-3"><a href="forbine-tables-iterations-og-funktioner.html#cb348-3" aria-hidden="true" tabindex="-1"></a>first_dataset <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   organism_name                         center                          subgroup
##   &lt;chr&gt;                                 &lt;chr&gt;                           &lt;chr&gt;   
## 1 Pyropia yezoensis                     Ocean University                Other   
## 2 Thalassiosira pseudonana CCMP1335     Diatom Consortium               Other   
## 3 Guillardia theta CCMP2712             JGI                             Other   
## 4 Cyanidioschyzon merolae strain 10D    National Institute of Genetics… Other   
## 5 Galdieria sulphuraria                 Galdieria sulphuraria Genome P… Other   
## 6 Phaeodactylum tricornutum CCAP 1055/1 Diatom Consortium               Other</code></pre>
<p>Hvis vi gerne vil tilbage til vores oprindeligt datasæt, kan vi brug <code>unnest()</code> og specificer kolonnen <code>data</code>:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="forbine-tables-iterations-og-funktioner.html#cb350-1" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset_nested <span class="sc">%&gt;%</span> </span>
<span id="cb350-2"><a href="forbine-tables-iterations-og-funktioner.html#cb350-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(data) <span class="sc">%&gt;%</span> </span>
<span id="cb350-3"><a href="forbine-tables-iterations-og-funktioner.html#cb350-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
## # Groups:   group [1]
##   group organism_name                         center                    subgroup
##   &lt;chr&gt; &lt;chr&gt;                                 &lt;chr&gt;                     &lt;chr&gt;   
## 1 Other Pyropia yezoensis                     Ocean University          Other   
## 2 Other Thalassiosira pseudonana CCMP1335     Diatom Consortium         Other   
## 3 Other Guillardia theta CCMP2712             JGI                       Other   
## 4 Other Cyanidioschyzon merolae strain 10D    National Institute of Ge… Other   
## 5 Other Galdieria sulphuraria                 Galdieria sulphuraria Ge… Other   
## 6 Other Phaeodactylum tricornutum CCAP 1055/1 Diatom Consortium         Other</code></pre>
<p>Spørgsmålet er: hvordan kan vi inddrage “nested” data indenfor vores analyser?</p>
<div id="anvende-map-med-nested-data" class="section level3 hasAnchor" number="7.5.1">
<h3><span class="header-section-number">7.5.1</span> Anvende map() med nested data<a href="forbine-tables-iterations-og-funktioner.html#anvende-map-med-nested-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>De fleste gange vi arbejder med nested data, er fordi vi gerne vil lave samme ting på hver af de “sub” datasæt. Derfor hænger det sammen med funktionen <code>map()</code>. Den typiske process er:</p>
<ul>
<li>Tag nested datasæt</li>
<li>Tilføj en ny kolon med <code>mutate()</code>, hvor vi:</li>
<li>Tag hver datasæt fra kolonnen <code>data</code> og brug <code>map()</code>, i nedenstående tilfælde til at finde antallet af rækkerne.</li>
</ul>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="forbine-tables-iterations-og-funktioner.html#cb352-1" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset_nested <span class="sc">%&gt;%</span> </span>
<span id="cb352-2"><a href="forbine-tables-iterations-og-funktioner.html#cb352-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_row =</span> <span class="fu">map_dbl</span>(data,nrow))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
## # Groups:   group [5]
##   group    data                 n_row
##   &lt;chr&gt;    &lt;list&gt;               &lt;dbl&gt;
## 1 Other    &lt;tibble [51 × 3]&gt;       51
## 2 Protists &lt;tibble [888 × 3]&gt;     888
## 3 Plants   &lt;tibble [1,304 × 3]&gt;  1304
## 4 Fungi    &lt;tibble [6,064 × 3]&gt;  6064
## 5 Animals  &lt;tibble [3,201 × 3]&gt;  3201</code></pre>
<p>Vi kan også bruge en custom funktion. I nedenstående beregne man antallet af unikke organisme fra variablen <code>orangism_name</code> i datasættet. Husk:</p>
<ul>
<li><code>~</code> betyder at vi lave en funktion, som kommer til at fungere for alle de fem datasæt.</li>
<li>Tag et datasæt og kalde det for <code>.x</code> - det referer til en bestemt datasæt fra en af de fem datasæt som hører under kolonnen <code>data</code> i den <code>nest()</code> data.</li>
<li>Vælg variablen <code>organism_name</code> fra <code>.x</code></li>
<li>Beregn <code>n_dinstinct</code></li>
</ul>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="forbine-tables-iterations-og-funktioner.html#cb354-1" aria-hidden="true" tabindex="-1"></a>n_distinct_organisms <span class="ot">&lt;-</span> <span class="er">~</span> .x <span class="sc">%&gt;%</span> <span class="co">#take data</span></span>
<span id="cb354-2"><a href="forbine-tables-iterations-og-funktioner.html#cb354-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(organism_name) <span class="sc">%&gt;%</span>  <span class="co">#select organism name</span></span>
<span id="cb354-3"><a href="forbine-tables-iterations-og-funktioner.html#cb354-3" aria-hidden="true" tabindex="-1"></a>  n_distinct <span class="co">#give back distinct</span></span></code></pre></div>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="forbine-tables-iterations-og-funktioner.html#cb355-1" aria-hidden="true" tabindex="-1"></a><span class="co">#repeat function for each of the five datasets:</span></span>
<span id="cb355-2"><a href="forbine-tables-iterations-og-funktioner.html#cb355-2" aria-hidden="true" tabindex="-1"></a>eukaryotes_subset_nested <span class="sc">%&gt;%</span> </span>
<span id="cb355-3"><a href="forbine-tables-iterations-og-funktioner.html#cb355-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_organisms =</span> <span class="fu">map_dbl</span>(data, n_distinct_organisms))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
## # Groups:   group [5]
##   group    data                 n_organisms
##   &lt;chr&gt;    &lt;list&gt;                     &lt;dbl&gt;
## 1 Other    &lt;tibble [51 × 3]&gt;             35
## 2 Protists &lt;tibble [888 × 3]&gt;           490
## 3 Plants   &lt;tibble [1,304 × 3]&gt;         673
## 4 Fungi    &lt;tibble [6,064 × 3]&gt;        2926
## 5 Animals  &lt;tibble [3,201 × 3]&gt;        1987</code></pre>
<p>Her er en anden eksempel. Her handler det om de <code>eukaryotes</code> data (ikke den subset), som har oplysninger om fk. GC-content med variablen <code>gc</code>. Her bruger vi <code>pull</code> i stedet for <code>select</code> - det er næsten den samme men med <code>pull()</code> få vi en vector som fungerer med <code>median</code> som er en base-R funktion.</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="forbine-tables-iterations-og-funktioner.html#cb357-1" aria-hidden="true" tabindex="-1"></a>func_gc <span class="ot">&lt;-</span> <span class="er">~</span> .x <span class="sc">%&gt;%</span> </span>
<span id="cb357-2"><a href="forbine-tables-iterations-og-funktioner.html#cb357-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(gc) <span class="sc">%&gt;%</span>       <span class="co"># ligesom select men vi har bruge for en vector for at beregne median</span></span>
<span id="cb357-3"><a href="forbine-tables-iterations-og-funktioner.html#cb357-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">median</span>(.x,<span class="at">na.rm=</span>T) <span class="co"># `na.rm` fjerne `NA` værdier)</span></span>
<span id="cb357-4"><a href="forbine-tables-iterations-og-funktioner.html#cb357-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-5"><a href="forbine-tables-iterations-og-funktioner.html#cb357-5" aria-hidden="true" tabindex="-1"></a>ekaryotes_gc_by_group <span class="ot">&lt;-</span> eukaryotes <span class="sc">%&gt;%</span> </span>
<span id="cb357-6"><a href="forbine-tables-iterations-og-funktioner.html#cb357-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb357-7"><a href="forbine-tables-iterations-og-funktioner.html#cb357-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb357-8"><a href="forbine-tables-iterations-og-funktioner.html#cb357-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">&quot;median_gc&quot;</span><span class="ot">=</span><span class="fu">map_dbl</span>(data, func_gc))</span>
<span id="cb357-9"><a href="forbine-tables-iterations-og-funktioner.html#cb357-9" aria-hidden="true" tabindex="-1"></a>ekaryotes_gc_by_group</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
## # Groups:   group [5]
##   group    data                  median_gc
##   &lt;chr&gt;    &lt;list&gt;                    &lt;dbl&gt;
## 1 Other    &lt;tibble [51 × 18]&gt;         46.7
## 2 Protists &lt;tibble [888 × 18]&gt;        49.4
## 3 Plants   &lt;tibble [1,304 × 18]&gt;      37.9
## 4 Fungi    &lt;tibble [6,064 × 18]&gt;      47.5
## 5 Animals  &lt;tibble [3,201 × 18]&gt;      40.6</code></pre>
<p>Og jeg kan bruge resultatet ind i et plot ligesom vi plejer:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="forbine-tables-iterations-og-funktioner.html#cb359-1" aria-hidden="true" tabindex="-1"></a>ekaryotes_gc_by_group <span class="sc">%&gt;%</span> </span>
<span id="cb359-2"><a href="forbine-tables-iterations-og-funktioner.html#cb359-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>group,<span class="at">y=</span>median_gc,<span class="at">fill=</span>group)) <span class="sc">+</span> </span>
<span id="cb359-3"><a href="forbine-tables-iterations-og-funktioner.html#cb359-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> </span>
<span id="cb359-4"><a href="forbine-tables-iterations-og-funktioner.html#cb359-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb359-5"><a href="forbine-tables-iterations-og-funktioner.html#cb359-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() </span></code></pre></div>
<p><img src="visualisering_22_files/figure-html/unnamed-chunk-342-1.png" width="384" /></p>
<p><strong>flere statistik på en gang</strong></p>
<p>Lave funktionerne:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="forbine-tables-iterations-og-funktioner.html#cb360-1" aria-hidden="true" tabindex="-1"></a>func_genes <span class="ot">&lt;-</span>    <span class="er">~</span> .x <span class="sc">%&gt;%</span> <span class="fu">pull</span>(genes)     <span class="sc">%&gt;%</span> <span class="fu">median</span>(.x,<span class="at">na.rm=</span>T)</span>
<span id="cb360-2"><a href="forbine-tables-iterations-og-funktioner.html#cb360-2" aria-hidden="true" tabindex="-1"></a>func_proteins <span class="ot">&lt;-</span> <span class="er">~</span> .x <span class="sc">%&gt;%</span> <span class="fu">pull</span>(proteins)  <span class="sc">%&gt;%</span> <span class="fu">median</span>(.x,<span class="at">na.rm=</span>T)</span>
<span id="cb360-3"><a href="forbine-tables-iterations-og-funktioner.html#cb360-3" aria-hidden="true" tabindex="-1"></a>func_size <span class="ot">&lt;-</span>     <span class="er">~</span> .x <span class="sc">%&gt;%</span> <span class="fu">pull</span>(size_mb)   <span class="sc">%&gt;%</span> <span class="fu">median</span>(.x,<span class="at">na.rm=</span>T)</span></code></pre></div>
<p>Anvende <code>nest()</code>:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="forbine-tables-iterations-og-funktioner.html#cb361-1" aria-hidden="true" tabindex="-1"></a>eukaryotes_nested <span class="ot">&lt;-</span> eukaryotes <span class="sc">%&gt;%</span> </span>
<span id="cb361-2"><a href="forbine-tables-iterations-og-funktioner.html#cb361-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb361-3"><a href="forbine-tables-iterations-og-funktioner.html#cb361-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() </span></code></pre></div>
<p>Tilføje resultatet over de fem datasæt med <code>mutate()</code>:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="forbine-tables-iterations-og-funktioner.html#cb362-1" aria-hidden="true" tabindex="-1"></a>eukaryotes_stats <span class="ot">&lt;-</span> eukaryotes_nested <span class="sc">%&gt;%</span></span>
<span id="cb362-2"><a href="forbine-tables-iterations-og-funktioner.html#cb362-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mean_genes =</span> <span class="fu">map_dbl</span>(data,func_genes),</span>
<span id="cb362-3"><a href="forbine-tables-iterations-og-funktioner.html#cb362-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">proteins =</span> <span class="fu">map_dbl</span>(data,func_proteins),</span>
<span id="cb362-4"><a href="forbine-tables-iterations-og-funktioner.html#cb362-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">mean_size_mb =</span> <span class="fu">map_dbl</span>(data,func_size))</span></code></pre></div>
<p>Husk at fjerne kolonnen <code>data</code> før man anvende <code>pivot_longer()</code> (ellers får man en advarsel):</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="forbine-tables-iterations-og-funktioner.html#cb363-1" aria-hidden="true" tabindex="-1"></a>eukaryotes_stats <span class="sc">%&gt;%</span> </span>
<span id="cb363-2"><a href="forbine-tables-iterations-og-funktioner.html#cb363-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>data) <span class="sc">%&gt;%</span></span>
<span id="cb363-3"><a href="forbine-tables-iterations-og-funktioner.html#cb363-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>group) <span class="sc">%&gt;%</span></span>
<span id="cb363-4"><a href="forbine-tables-iterations-og-funktioner.html#cb363-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>group,<span class="at">y=</span>value,<span class="at">fill=</span>group)) <span class="sc">+</span> </span>
<span id="cb363-5"><a href="forbine-tables-iterations-og-funktioner.html#cb363-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span> </span>
<span id="cb363-6"><a href="forbine-tables-iterations-og-funktioner.html#cb363-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>name,<span class="at">scales=</span><span class="st">&quot;free&quot;</span>,<span class="at">ncol=</span><span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb363-7"><a href="forbine-tables-iterations-og-funktioner.html#cb363-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="visualisering_22_files/figure-html/unnamed-chunk-346-1.png" width="768" /></p>
</div>
</div>
<div id="problemstillinger-6" class="section level2 hasAnchor" number="7.6">
<h2><span class="header-section-number">7.6</span> Problemstillinger<a href="forbine-tables-iterations-og-funktioner.html#problemstillinger-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>1</strong>) Lave Quiz på Absalon “Quiz - tables, maps and functions”</p>
<p><strong>2</strong>) <em><code>left_join()</code> øvelse</em>. Kør følgende kode:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="forbine-tables-iterations-og-funktioner.html#cb364-1" aria-hidden="true" tabindex="-1"></a>superheroes <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb364-2"><a href="forbine-tables-iterations-og-funktioner.html#cb364-2" aria-hidden="true" tabindex="-1"></a>       <span class="sc">~</span>name, <span class="sc">~</span>alignment,  <span class="sc">~</span>gender,          <span class="sc">~</span>publisher,</span>
<span id="cb364-3"><a href="forbine-tables-iterations-og-funktioner.html#cb364-3" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Magneto&quot;</span>,      <span class="st">&quot;bad&quot;</span>,   <span class="st">&quot;male&quot;</span>,            <span class="st">&quot;Marvel&quot;</span>,</span>
<span id="cb364-4"><a href="forbine-tables-iterations-og-funktioner.html#cb364-4" aria-hidden="true" tabindex="-1"></a>     <span class="st">&quot;Storm&quot;</span>,     <span class="st">&quot;good&quot;</span>, <span class="st">&quot;female&quot;</span>,            <span class="st">&quot;Marvel&quot;</span>,</span>
<span id="cb364-5"><a href="forbine-tables-iterations-og-funktioner.html#cb364-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Mystique&quot;</span>,      <span class="st">&quot;bad&quot;</span>, <span class="st">&quot;female&quot;</span>,            <span class="st">&quot;Marvel&quot;</span>,</span>
<span id="cb364-6"><a href="forbine-tables-iterations-og-funktioner.html#cb364-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Batman&quot;</span>,     <span class="st">&quot;good&quot;</span>,   <span class="st">&quot;male&quot;</span>,                <span class="st">&quot;DC&quot;</span>,</span>
<span id="cb364-7"><a href="forbine-tables-iterations-og-funktioner.html#cb364-7" aria-hidden="true" tabindex="-1"></a>     <span class="st">&quot;Joker&quot;</span>,      <span class="st">&quot;bad&quot;</span>,   <span class="st">&quot;male&quot;</span>,                <span class="st">&quot;DC&quot;</span>,</span>
<span id="cb364-8"><a href="forbine-tables-iterations-og-funktioner.html#cb364-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Catwoman&quot;</span>,      <span class="st">&quot;bad&quot;</span>, <span class="st">&quot;female&quot;</span>,                <span class="st">&quot;DC&quot;</span>,</span>
<span id="cb364-9"><a href="forbine-tables-iterations-og-funktioner.html#cb364-9" aria-hidden="true" tabindex="-1"></a>   <span class="st">&quot;Hellboy&quot;</span>,     <span class="st">&quot;good&quot;</span>,   <span class="st">&quot;male&quot;</span>, <span class="st">&quot;Dark Horse Comics&quot;</span></span>
<span id="cb364-10"><a href="forbine-tables-iterations-og-funktioner.html#cb364-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb364-11"><a href="forbine-tables-iterations-og-funktioner.html#cb364-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb364-12"><a href="forbine-tables-iterations-og-funktioner.html#cb364-12" aria-hidden="true" tabindex="-1"></a>publishers <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb364-13"><a href="forbine-tables-iterations-og-funktioner.html#cb364-13" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>publisher, <span class="sc">~</span>yr_founded,</span>
<span id="cb364-14"><a href="forbine-tables-iterations-og-funktioner.html#cb364-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;DC&quot;</span>,       1934L,</span>
<span id="cb364-15"><a href="forbine-tables-iterations-og-funktioner.html#cb364-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Marvel&quot;</span>,       1939L,</span>
<span id="cb364-16"><a href="forbine-tables-iterations-og-funktioner.html#cb364-16" aria-hidden="true" tabindex="-1"></a>     <span class="st">&quot;Image&quot;</span>,       1992L</span>
<span id="cb364-17"><a href="forbine-tables-iterations-og-funktioner.html#cb364-17" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Vi har to tables - <code>superheroes</code> og <code>publishers</code>. Hvilke kolon kan man bruge til at forbinde de to tables? Brug <code>left_join()</code> til at tilføje oplysninger fra <code>publishers</code> til datarammen <code>superheroes</code>.</p>
<ul>
<li>Få man alle observationer fra superheroes med i resultatet?</li>
<li>Benyt <code>inner_join()</code> til at forbinde publishers til superheroes - få man så nu alle observationer med?</li>
<li>Benyt <code>full_join()</code> til at forbinde publishers til superheroes - hvor mange observationer få man med nu? Hvorfor?</li>
</ul>
<p><strong>3</strong>) <em><code>left_join()</code> øvelse</em>.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="forbine-tables-iterations-og-funktioner.html#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb365-2"><a href="forbine-tables-iterations-og-funktioner.html#cb365-2" aria-hidden="true" tabindex="-1"></a>iris2 <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(iris)</span>
<span id="cb365-3"><a href="forbine-tables-iterations-og-funktioner.html#cb365-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(iris2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;sample1&quot;</span>,<span class="st">&quot;sample2&quot;</span>,<span class="st">&quot;sample3&quot;</span>,<span class="st">&quot;sample4&quot;</span>,<span class="st">&quot;Species&quot;</span>)</span>
<span id="cb365-4"><a href="forbine-tables-iterations-og-funktioner.html#cb365-4" aria-hidden="true" tabindex="-1"></a>samp_table <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb365-5"><a href="forbine-tables-iterations-og-funktioner.html#cb365-5" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">~</span>sample, <span class="sc">~</span>part, <span class="sc">~</span>measure,</span>
<span id="cb365-6"><a href="forbine-tables-iterations-og-funktioner.html#cb365-6" aria-hidden="true" tabindex="-1"></a>                      <span class="co">#------|-------|--------#</span></span>
<span id="cb365-7"><a href="forbine-tables-iterations-og-funktioner.html#cb365-7" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;sample1&quot;</span>, <span class="st">&quot;Sepal&quot;</span>, <span class="st">&quot;Length&quot;</span>,</span>
<span id="cb365-8"><a href="forbine-tables-iterations-og-funktioner.html#cb365-8" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;sample2&quot;</span>, <span class="st">&quot;Sepal&quot;</span>, <span class="st">&quot;Width&quot;</span>,</span>
<span id="cb365-9"><a href="forbine-tables-iterations-og-funktioner.html#cb365-9" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;sample3&quot;</span>, <span class="st">&quot;Petal&quot;</span>, <span class="st">&quot;Length&quot;</span>,</span>
<span id="cb365-10"><a href="forbine-tables-iterations-og-funktioner.html#cb365-10" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&quot;sample4&quot;</span>, <span class="st">&quot;Sepal&quot;</span>, <span class="st">&quot;Width&quot;</span></span>
<span id="cb365-11"><a href="forbine-tables-iterations-og-funktioner.html#cb365-11" aria-hidden="true" tabindex="-1"></a>                     )</span>
<span id="cb365-12"><a href="forbine-tables-iterations-og-funktioner.html#cb365-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb365-13"><a href="forbine-tables-iterations-og-funktioner.html#cb365-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb365-14"><a href="forbine-tables-iterations-og-funktioner.html#cb365-14" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris2)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   sample1 sample2 sample3 sample4 Species
##     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;  
## 1     5.1     3.5     1.4     0.2 setosa 
## 2     4.9     3       1.4     0.2 setosa 
## 3     4.7     3.2     1.3     0.2 setosa 
## 4     4.6     3.1     1.5     0.2 setosa 
## 5     5       3.6     1.4     0.2 setosa 
## 6     5.4     3.9     1.7     0.4 setosa</code></pre>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="forbine-tables-iterations-og-funktioner.html#cb367-1" aria-hidden="true" tabindex="-1"></a>samp_table</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   sample  part  measure
##   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;  
## 1 sample1 Sepal Length 
## 2 sample2 Sepal Width  
## 3 sample3 Petal Length 
## 4 sample4 Sepal Width</code></pre>
<p>Man kan se, at vi har to tables - <code>iris2</code> og <code>sample_table</code>. <code>iris2</code> er ikke særlig informativ med hensyn til hvad de samples er, men oplysningerne stå i <code>sample_table</code>. Bruge <code>left_join()</code> til at tilføje <code>sample_table</code> til <code>iris2</code> for at få en dataramme som indeholder både de data og de samples oplysninger.</p>
<p><strong>4</strong>) <em><code>map()</code> øvelse</em></p>
<p>Eksempel:</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="forbine-tables-iterations-og-funktioner.html#cb369-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">select</span>(cut,color,depth) <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(n_distinct)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##     cut color depth
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1     5     7   184</code></pre>
<p>Husk også referencen med de forskellige varianter af <code>map()</code> som kan bruges for at få en anden output type.</p>
<p>Indlæse <code>diamonds</code> med <code>data(diamonds)</code>. Brug <code>map()</code> funktioner til at beregne følgende:</p>
<ul>
<li>Select variabler <code>carat</code>, <code>depth</code>, <code>table</code> og <code>price</code> og beregne den median værdi til hver. Resultatet skulle være en list (anvende deault <code>map()</code> funktion).</li>
<li>Select variabler <code>cut</code>, <code>color</code> og <code>clarity</code> og beregne antallet af distinkt værdier til hver. Resultatet skal være en double.</li>
<li>Select alle variabler og return de datatyper (funktion en <code>typeof()</code>). Resultatet skal være en dataramme.</li>
</ul>
<p><strong>5</strong>) <em><code>map()</code> øvelse med funktioner</em></p>
<p>Indlæse <code>diamonds</code> med <code>data(diamonds)</code>.</p>
<p>Husk at når man inddrager nogle data <code>.x</code>, for eksempel når man vil bruge en custom funktion eller specificer non-default indstillinger såsom <code>na.rm=TRUE</code> (for at fjerne <code>NA</code> værdier i beregningen) i funktionen, skal man angiv <code>~</code> i starten:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="forbine-tables-iterations-og-funktioner.html#cb371-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(n_distinct) <span class="co">#specificere funktion unden instillinger</span></span>
<span id="cb371-2"><a href="forbine-tables-iterations-og-funktioner.html#cb371-2" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(<span class="sc">~</span><span class="fu">n_distinct</span>(.x,<span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="co">#non-default funktion</span></span></code></pre></div>
<ul>
<li>Afprøve følgende kode linjer og beskrive hvad der sker.</li>
</ul>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="forbine-tables-iterations-og-funktioner.html#cb372-1" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">select</span>(carat, depth, price) <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(<span class="sc">~</span>(.x<span class="sc">-</span><span class="fu">mean</span>(.x)) )</span>
<span id="cb372-2"><a href="forbine-tables-iterations-og-funktioner.html#cb372-2" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">select</span>(carat, depth, price) <span class="sc">%&gt;%</span> <span class="fu">map_df</span>(<span class="sc">~</span><span class="fu">ifelse</span>(.x<span class="sc">&gt;</span><span class="fu">mean</span>(.x),<span class="st">&quot;big_value&quot;</span>,<span class="st">&quot;small_value&quot;</span>))</span>
<span id="cb372-3"><a href="forbine-tables-iterations-og-funktioner.html#cb372-3" aria-hidden="true" tabindex="-1"></a>diamonds <span class="sc">%&gt;%</span> <span class="fu">filter</span>(cut<span class="sc">==</span><span class="st">&quot;Ideal&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="st">&quot;color&quot;</span>,<span class="st">&quot;clarity&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="sc">~</span><span class="fu">sum</span>(.x<span class="sc">==</span><span class="fu">nth</span>(.x,<span class="dv">1</span>)))</span></code></pre></div>
<p>Brug funktioner indenfor <code>map()</code> til at beregne følgende:</p>
<ul>
<li>Select alle variabler og output den 100th observation. Resultatet skal være en list.</li>
<li>Select variabler <code>carat</code>, <code>depth</code>, <code>table</code> og <code>price</code> og for hver kolon tilføj tre og så tag square (<code>^2</code>). Resultatet skal være en dataramme.</li>
<li>Select variabler <code>carat</code>, <code>depth</code>, <code>table</code> og <code>price</code> og angiv <code>TRUE</code> hvis den første værdi er større en den median værdi, ellers <code>FALSE</code>. Resultatet skal være en logical.</li>
<li>Select variabler <code>carat</code>, <code>depth</code>, <code>table</code> og <code>price</code> og beregne den <code>log2</code> transformering til være. Resultatet skal være en dataramme. Brug resulterende dataramme til at lave et scatter plot af <span class="math inline">\(\log2\)</span>(<code>caret</code>) på x-aksen og <span class="math inline">\(\log2\)</span>(<code>price</code>) på y-aksen.</li>
</ul>
<p><strong>6</strong>) <em>nest øvelse</em></p>
<p><strong>a</strong>) For datasættet <code>iris</code>, anvend <code>group_by(Species)</code> og tilføj dernæst <code>nest()</code>, og kigger på resultatet.</p>
<ul>
<li>tilføj <code>pull(data)</code> og se på resultatet</li>
<li>tilføj prøve også <code>pluck("data",1)</code> for at se den første dataramme.</li>
<li>tilføj <code>unnest(data)</code> i stedet for og se på resultatet</li>
<li>tilføj følgende i stedet for og prøve at forstå hvad der sker:
<ul>
<li><code>mutate(new_column_nrow = map_dbl(data,nrow))</code></li>
<li><code>mutate(new_column_cor = map_dbl(data,~cor(.x$Sepal.Width,.x$Sepal.Length)))</code></li>
<li><code>mutate(new_column_sum_SW = map_dbl(data,~.x %&gt;% pull(Sepal.Width) %&gt;% sum))</code></li>
</ul></li>
<li>Bemærk at vi har brugt <code>map_dbl</code> til at få tal som vi nemt kan læse i kolonner - prøve bare <code>map()</code> i stedet for og se resultatet. Man er nødt til at bruge <code>unnest()</code> til at se resultatet i dette tilfælde.</li>
</ul>
<p><strong>b</strong>)</p>
<ul>
<li>Afprøve følgende funktioner indenfor samme ramme og angiv hensigtsmæssigt kolon navne i <code>mutate()</code>.</li>
</ul>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="forbine-tables-iterations-og-funktioner.html#cb373-1" aria-hidden="true" tabindex="-1"></a>my_func_1 <span class="ot">&lt;-</span> <span class="er">~</span>.x <span class="sc">%&gt;%</span> </span>
<span id="cb373-2"><a href="forbine-tables-iterations-og-funktioner.html#cb373-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(Petal.Length,Petal.Width) <span class="sc">%&gt;%</span> </span>
<span id="cb373-3"><a href="forbine-tables-iterations-og-funktioner.html#cb373-3" aria-hidden="true" tabindex="-1"></a>  sum</span>
<span id="cb373-4"><a href="forbine-tables-iterations-og-funktioner.html#cb373-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-5"><a href="forbine-tables-iterations-og-funktioner.html#cb373-5" aria-hidden="true" tabindex="-1"></a>my_func_2 <span class="ot">&lt;-</span> <span class="er">~</span><span class="fu">cor</span>(.x<span class="sc">$</span>Sepal.Width,.x<span class="sc">$</span>Sepal.Length)</span>
<span id="cb373-6"><a href="forbine-tables-iterations-og-funktioner.html#cb373-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-7"><a href="forbine-tables-iterations-og-funktioner.html#cb373-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-8"><a href="forbine-tables-iterations-og-funktioner.html#cb373-8" aria-hidden="true" tabindex="-1"></a>my_func_3 <span class="ot">&lt;-</span> <span class="er">~</span> <span class="fu">t.test</span>(.x<span class="sc">$</span>Petal.Width,.x<span class="sc">$</span>Sepal.Length)<span class="sc">$</span>statistic</span></code></pre></div>
<p><strong>c</strong>)</p>
<ul>
<li>Indenfor samme ramme tilføj selv kode linjer som beregner til hver af de tre datasæt:
<ul>
<li>den maksimum værdi</li>
<li>den maksimum værdi for <code>Petal.Width</code></li>
<li>den gennemsnitlige værdi af <code>Petal.Width/Petal.Length</code></li>
<li>den gennemsnitlige værdi af <code>Sepal.Width&gt;3</code></li>
</ul></li>
</ul>
<p><strong>d</strong>)</p>
<ul>
<li>Lav et barplot for nogle dine beregninger, adskilte efter de forskellige statistikker.
<ul>
<li>Husk at få fjernet kolonnen <code>data</code> før man anvende <code>pivot_long()</code>.</li>
</ul></li>
</ul>
<p><strong>7</strong>) <em>Introduktion til næste lektion</em></p>
<p>For at se værdien af at bruge <code>group_by()</code> og <code>nest()</code> kan vi gennemgå en simpel eksampel som indledning til vores næste lektion.</p>
<p>Tag funktionen:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="forbine-tables-iterations-og-funktioner.html#cb374-1" aria-hidden="true" tabindex="-1"></a>my_func <span class="ot">&lt;-</span> <span class="er">~</span> <span class="fu">t.test</span>(.x<span class="sc">$</span>Petal.Width,.x<span class="sc">$</span>Sepal.Length)</span></code></pre></div>
<ul>
<li>anvend <code>group_by(Species)</code> og dernæst <code>nest()</code> som i sidste spørgsmål</li>
<li>tilføj <code>mutate()</code> til at lave en ny kolon som hedder <code>t_test</code> og bruge funktionen indenfor <code>map()</code>.</li>
<li>tilføj <code>pull(t_test)</code> - man får de tre t-test frem, som man lige har beregnet.</li>
<li>prøv <code>unnest(t_test)</code> i stedet for <code>pull(t_test)</code> - man får en advarsel fordi de t-test resultater ikke er i en god form til at vise indenfor en dataramme. Vi vil gerne gøre dem tidy først.</li>
</ul>
<hr />
<ul>
<li>Nu installer R-pakken <code>broom</code> (<code>install.packages("broom")</code>)</li>
<li>Lav samme som ovenstående men bruge følgende funktion i stedet for.</li>
<li><code>glance()</code> få de statistik fra <code>t.test()</code> ind i en pæn form (<strong>tidy</strong>)</li>
</ul>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="forbine-tables-iterations-og-funktioner.html#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span></code></pre></div>
<pre><code>## Warning: pakke &#39;broom&#39; blev bygget under R version 4.0.5</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="forbine-tables-iterations-og-funktioner.html#cb377-1" aria-hidden="true" tabindex="-1"></a>my_func <span class="ot">&lt;-</span> <span class="er">~</span> <span class="fu">t.test</span>(.x<span class="sc">$</span>Petal.Width,.x<span class="sc">$</span>Sepal.Length) <span class="sc">%&gt;%</span> <span class="fu">glance</span>()</span></code></pre></div>
<ul>
<li>Tilføj <code>pull</code> eller <code>unnest</code> som før og se på resultatet.</li>
<li>Man får en pæn dataramme frem med alle de forskellige statistik fra <code>t.test()</code>.</li>
</ul>
<!-- __8__) *dobbelt `map()` øvelse* -->
<!-- Bruge koden eksempel for `eukaryotes` data til at beregne en dataramme af middelværdier efter både `Species` og de fire variabler med målinger. -->
<!-- ```{r} -->
<!-- iris_nested_means <- iris %>%  -->
<!--   group_by(Species) %>%  -->
<!--   nest() %>%  -->
<!--   mutate(means = map(data,                    #for each sub-dataset -->
<!--                      ~map_df(.x,mean)))       #calculate the mean of each column and return as a data frame -->
<!-- iris_mean_tib <- iris_nested_means %>%  -->
<!--   select(means) %>%  -->
<!--   unnest(means) -->
<!-- iris_mean_tib -->
<!-- ``` -->
<!-- ```{r} -->
<!-- library(RColorBrewer) -->
<!-- iris_mean_tib %>%  -->
<!--   pivot_longer(-Species) %>% -->
<!--   ggplot(aes(x=Species,fill=Species,y=value)) +  -->
<!--     geom_bar(stat="identity") +  -->
<!--     scale_fill_brewer(palette="Set2") + -->
<!--     facet_grid(~name) + -->
<!--     theme_bw() -->
<!-- ``` -->
</div>
<div id="ekstra-notater-og-næste-gang" class="section level2 hasAnchor" number="7.7">
<h2><span class="header-section-number">7.7</span> Ekstra notater og næste gang<a href="forbine-tables-iterations-og-funktioner.html#ekstra-notater-og-næste-gang" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://r4ds.had.co.nz/iteration.html" class="uri">https://r4ds.had.co.nz/iteration.html</a>
<a href="https://sanderwuyts.com/en/blog/purrr-tutorial/" class="uri">https://sanderwuyts.com/en/blog/purrr-tutorial/</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="bearbejdning-dag-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualising-trends.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["visualisering_22.pdf", "visualisering_22.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
