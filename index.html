<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Visualisering af biologiske datasæt - 2022</title>
  <meta name="description" content="Course materials for Analysering og visualisering af biologiske datasæt 2022" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Visualisering af biologiske datasæt - 2022" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Course materials for Analysering og visualisering af biologiske datasæt 2022" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Visualisering af biologiske datasæt - 2022" />
  
  <meta name="twitter:description" content="Course materials for Analysering og visualisering af biologiske datasæt 2022" />
  

<meta name="author" content="Sarah Rennie" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  


<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Visualisering kursus</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="#basics"><i class="fa fa-check"></i><b>1</b> Grundlæggende R<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="#inledning-til-kapitel"><i class="fa fa-check"></i><b>1.1</b> Inledning til kapitel<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="#rstudio"><i class="fa fa-check"></i><b>1.2</b> RStudio<span></span></a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="#de-forskellige-vinduer-i-rstudio"><i class="fa fa-check"></i><b>1.2.1</b> De forskellige vinduer i RStudio<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="#working-directory"><i class="fa fa-check"></i><b>1.3</b> Working directory<span></span></a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="#r-pakker"><i class="fa fa-check"></i><b>1.4</b> R pakker<span></span></a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="#hvor-kommer-vores-data-fra"><i class="fa fa-check"></i><b>1.5</b> Hvor kommer vores data fra?<span></span></a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="#indbyggede-datasæt"><i class="fa fa-check"></i><b>1.5.1</b> Indbyggede datasæt<span></span></a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="#importering-af-data-fra-.txt-fil"><i class="fa fa-check"></i><b>1.5.2</b> Importering af data fra .txt fil<span></span></a></li>
<li class="chapter" data-level="1.5.3" data-path="index.html"><a href="#importering-af-data-fra-excel"><i class="fa fa-check"></i><b>1.5.3</b> Importering af data fra Excel<span></span></a></li>
<li class="chapter" data-level="1.5.4" data-path="index.html"><a href="#kaggle"><i class="fa fa-check"></i><b>1.5.4</b> Kaggle<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="#beregninger-i-r"><i class="fa fa-check"></i><b>1.6</b> Beregninger i R<span></span></a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="index.html"><a href="#vectorer"><i class="fa fa-check"></i><b>1.6.1</b> Vectorer<span></span></a></li>
<li class="chapter" data-level="1.6.2" data-path="index.html"><a href="#datatyper"><i class="fa fa-check"></i><b>1.6.2</b> datatyper<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="#dataframes"><i class="fa fa-check"></i><b>1.7</b> Dataframes<span></span></a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="index.html"><a href="#delmægder-af-dataframes"><i class="fa fa-check"></i><b>1.7.1</b> Delmægder af dataframes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="#descriptive-statistics"><i class="fa fa-check"></i><b>1.8</b> Descriptive statistics<span></span></a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="index.html"><a href="#simulere-data-fra-den-normale-fordeling"><i class="fa fa-check"></i><b>1.8.1</b> Simulere data fra den normale fordeling<span></span></a></li>
<li class="chapter" data-level="1.8.2" data-path="index.html"><a href="#measures-of-central-tendency"><i class="fa fa-check"></i><b>1.8.2</b> Measures of central tendency<span></span></a></li>
<li class="chapter" data-level="1.8.3" data-path="index.html"><a href="#tapply"><i class="fa fa-check"></i><b>1.8.3</b> <code>tapply()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="index.html"><a href="#statistike-tester"><i class="fa fa-check"></i><b>1.9</b> Statistike tester<span></span></a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="index.html"><a href="#korrelation"><i class="fa fa-check"></i><b>1.9.1</b> Korrelation<span></span></a></li>
<li class="chapter" data-level="1.9.2" data-path="index.html"><a href="#test-for-uafhængighed-chi-sq-test"><i class="fa fa-check"></i><b>1.9.2</b> Test for uafhængighed (chi-sq test)<span></span></a></li>
<li class="chapter" data-level="1.9.3" data-path="index.html"><a href="#sample-t-test"><i class="fa fa-check"></i><b>1.9.3</b> 1 sample t-test<span></span></a></li>
<li class="chapter" data-level="1.9.4" data-path="index.html"><a href="#sample-t-test-1"><i class="fa fa-check"></i><b>1.9.4</b> 2-sample t-test<span></span></a></li>
<li class="chapter" data-level="1.9.5" data-path="index.html"><a href="#paired-t-test"><i class="fa fa-check"></i><b>1.9.5</b> Paired t-test<span></span></a></li>
<li class="chapter" data-level="1.9.6" data-path="index.html"><a href="#anova-variansanalyse"><i class="fa fa-check"></i><b>1.9.6</b> ANOVA (variansanalyse)<span></span></a></li>
<li class="chapter" data-level="1.9.7" data-path="index.html"><a href="#lineær-regression"><i class="fa fa-check"></i><b>1.9.7</b> Lineær regression<span></span></a></li>
<li class="chapter" data-level="1.9.8" data-path="index.html"><a href="#r-squared-coefficient-of-determination"><i class="fa fa-check"></i><b>1.9.8</b> R-squared coefficient of determination<span></span></a></li>
<li class="chapter" data-level="1.9.9" data-path="index.html"><a href="#antagelser---lineær-regression"><i class="fa fa-check"></i><b>1.9.9</b> Antagelser - lineær regression<span></span></a></li>
<li class="chapter" data-level="1.9.10" data-path="index.html"><a href="#multiple-lineær-regression"><i class="fa fa-check"></i><b>1.9.10</b> Multiple lineær regression<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="index.html"><a href="#problemstillinger"><i class="fa fa-check"></i><b>1.10</b> Problemstillinger<span></span></a>
<ul>
<li class="chapter" data-level="1.10.1" data-path="index.html"><a href="#quiz---basics"><i class="fa fa-check"></i><b>1.10.1</b> Quiz - Basics<span></span></a></li>
<li class="chapter" data-level="1.10.2" data-path="index.html"><a href="#grundlæggende-r"><i class="fa fa-check"></i><b>1.10.2</b> Grundlæggende R<span></span></a></li>
<li class="chapter" data-level="1.10.3" data-path="index.html"><a href="#kort-analyse-med-reaktionstider"><i class="fa fa-check"></i><b>1.10.3</b> Kort analyse med reaktionstider<span></span></a></li>
<li class="chapter" data-level="1.10.4" data-path="index.html"><a href="#øvelser-med-statistik-tests"><i class="fa fa-check"></i><b>1.10.4</b> Øvelser med statistik tests<span></span></a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Visualisering af biologiske datasæt - 2022</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Visualisering af biologiske datasæt - 2022</h1>
<p class="author"><em>Sarah Rennie</em></p>
<p class="date"><em>Last updated: 2022-04-21</em></p>
</div>
<div id="basics" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> Grundlæggende R<a href="#basics" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="inledning-til-kapitel" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Inledning til kapitel<a href="#inledning-til-kapitel" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Her opsummerer jeg nogle grundlæggende R og statistik, der betragtes som forudsætninger i det nuværende kursus. Selvom vi i kurset skifter hurtigt over til den tidyverse-pakke løsning, som erstatter meget af funktionaliteten fra base-R, er det stadig vigtigt at have et grundlæggende kendskab til hvordan tingene fungerer i base-R - derfor hvis du har meget lidt erfaring med base-R anbefaler jeg, at du også bruger noget ekstra tid udover den første mødegange til at komme op på niveauet.</p>
<p>For at bestå kurset er det ikke forventningen, at du kender til alle detaljer og teori bag de statistiske metoder, men at du kan anvende dem hensigtsmæssigt i praksis i R, samt fortolke resultaterne. Jeg giver masser af muligheder for at øve dig med at lave statistik hele vejen gennem kurset, og i selve eksamen stiller jeg ikke spørgsmål om metoder, der ikke bliver dækkede blandt de forskellige øvelser (herunder workshop opgaver). Jeg kommer også ind på lineær regression igen senere gennem forelæsningerne så vær ikke bekymret hvis du ikke har set det hele før.</p>
<p>Se gerne også “Quiz - grundlæggende” på Absalon for at tjekke din forståelse og udfylde eventuelle huller i din viden (OBS: Quizzen er tilgængelig lidt inden starten af kurset).</p>
</div>
<div id="rstudio" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> RStudio<a href="#rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Vi kommer fremadrettet til at være afhængig af RStudio til at lave blandt andet R Markdown dokumenter. Kendskab til R Markdown er emnet i vores næste lektion og jeg antager, at du ikke har benyttet det før.</p>
<p>Det allerførste du skulle gør, hvis du ikke har installeret RStudio på din computer, er at downloade det gratis på nettet:</p>
<p><a href="https://www.rstudio.com/products/rstudio/download/#download" class="uri">https://www.rstudio.com/products/rstudio/download/#download</a></p>
<p>Følg venligst RStudios egne anvisninger til at få det installeret. Bemærk, at installering af RStudio er ikke den samme som at have R installeret på din computer - man skal installere dem begge to (man kan bruge R uden RStudio men ikke omvendt.</p>
<div id="de-forskellige-vinduer-i-rstudio" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> De forskellige vinduer i RStudio<a href="#de-forskellige-vinduer-i-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Du kan læse følgende for at lære de fire forskellige vinduer i RStudio at kende:</p>
<p><a href="https://bookdown.org/ndphillips/YaRrr/the-four-rstudio-windows.html" class="uri">https://bookdown.org/ndphillips/YaRrr/the-four-rstudio-windows.html</a></p>
<p>Her er et kort oversigt:</p>
<ul>
<li>Man skriver kode i <strong>Source</strong> (øverst til venstre)</li>
<li>Man kører kode ved at tryk CMD+ENTER (eller WIN-KEY+ENTER)</li>
<li>Koder køres ind i <strong>Console</strong> (som plejer at være nederst til venstre, selvom det er øverst til højere i billedet). Man kan også skrive koder direkte i Console, men det ikke anbefales generelt, når koden ikke bliver gemt.</li>
<li><strong>Environment</strong> - her kan man se blandt andet, alle objekter i Workspace.</li>
</ul>
</div>
</div>
<div id="working-directory" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Working directory<a href="#working-directory" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Når man arbejder på et projekt, er det ofte nyttigt at vide, den <em>working directory</em> som R arbejder fra - det er den mappe, hvor R forsøger at åbne eller gemme filer fra, medmindre man angiver et andet sted.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>() <span class="co">#se nuværende working directory</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">list.dirs</span>(<span class="at">path =</span> <span class="st">&quot;.&quot;</span>, <span class="at">recursive =</span> <span class="cn">FALSE</span>) <span class="co">#se mappe indenfor working directory</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;~/Documents/&quot;</span>) <span class="co">#sætte en ny working directory (C:/Users/myname/Documents hvis man bruger Windows)</span></span></code></pre></div>
<p>Hvis man bruger Windows, husk at man kan skrive en path på følgende måde:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#notrun</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;C:/Users/myname/Documents&quot;</span>) <span class="co">#enten med /</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">&quot;C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">myname</span><span class="sc">\\</span><span class="st">Documents&quot;</span>) <span class="co">#eller med \\</span></span></code></pre></div>
<p><strong>OBS</strong>: jeg bruger Mac, så hvis der er et vigtigt ting at man skal huske hvis man bruger en Windows computer, kan jeg også tilføje det her. Bemærk dog, at de allerfleste ting ved R programmering og tidyverse er ens uanset om man bruger Windows eller Mac.</p>
</div>
<div id="r-pakker" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> R pakker<a href="#r-pakker" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R pakker er simpelthen en samling af funktioner (eller datasæt i nogle tilfælde), der udvider hvad er tilgængelige i base-R (den R man få, uden at indlæse en pakke). I R er der mange tusind R pakker (op mod 100,000), der er tilgængelige på <strong>CRAN</strong> (<a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a>). Indenfor det biologiske fag er der også mange flere pakker på <strong>Bioconductor</strong> (<a href="https://www.bioconductor.org/" class="uri">https://www.bioconductor.org/</a>), og i nogle tilfælde kan R pakker også installeres direkte fra <strong>Github</strong>.</p>
<p>I dette kursus arbejder vi rigtig meget med en pakke der hedder <strong>tidyverse</strong>. <strong>tidyverse</strong> er faktisk en samling af otte R pakker, som indlæses på en gang. Inden du indlæse pakken, skal du først sikre dig, at pakken er installeret på systemet ved følgende kommando:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Alle pakker på <strong>CRAN</strong> er installeret på samme måde. Når du faktisk gerne vil bruge en R pakke, skal du først indlæse den ved at bruge <code>library()</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
## ✓ tibble  3.1.6     ✓ dplyr   1.0.8
## ✓ tidyr   1.2.0     ✓ stringr 1.4.0
## ✓ readr   2.1.2     ✓ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<p>Vi kommer til at arbejde med <strong>tidyverse</strong> pakker fra kapitel tre (vi starter med <strong>ggplot2</strong> og så nogle af de andre pakke fra <strong>tidyverse</strong> fra kapitel fire), <strong>så det er en god idé at har tidyverse installeret allerede nu</strong>, når det nogle gange kan tage lidt tid til at installere eller opdatere de mange andre mulige pakker, der <strong>tidyverse</strong> er afhængig af.</p>
<p>Vær opmærksom på, at der nogle gange opstår konflikter når det samme funktionnavn findes i flere pakker - for eksempel, funktionen <code>filter()</code> findes indenfor to forskellige pakker, nemlig <code>dplyr</code> og <code>stats</code>. Når du skriver <code>filter()</code> så ved R ikke, hvilke pakker du mener. I dette tilfælde kan du være gennemskueligt overfor den pakke, du gerne vil bruge ved at skrive <code>dplyr::filter()</code> eller <code>stats:filter()</code> i stedet for bare <code>filter()</code>.</p>
<p>Som sidste kommentar, er det god praksis at indlæse alle pakker, der du benytter sig af, på toppen af din script, så at du hurtigt kan få overblik over, hvilke pakker, der skal indlæses til at få dine koder til at fungere.</p>
</div>
<div id="hvor-kommer-vores-data-fra" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Hvor kommer vores data fra?<a href="#hvor-kommer-vores-data-fra" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>De forskellige datasæt, vi kommer til at arbejde med i kurset stammer fra mange forskellige steder.</p>
<div id="indbyggede-datasæt" class="section level3 hasAnchor" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> Indbyggede datasæt<a href="#indbyggede-datasæt" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>I R er der mange indbygget datasæt som er meget brugbart for at vise koncepter, hvilket gøre dem især populært i undervisningsmateriale. Indbyggede datasæt er ofte tilgængligt indenfor mange pakker, men <code>library(datasets)</code> er den mest brugt (der er også mange indenfor <code>library(ggplot2)</code>. For eksempel, for at indlæse datasættet, der hedder ‘iris,’ kan man bruge <code>data()</code>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(datasets)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris)</span></code></pre></div>
<p>Så er en <em>dataframe</em>, der hedder ‘iris’ tilgængelige som en <em>objekt</em> i <em>workspacen</em> - se den “Environment” fane på højere side i RStudio, eller indtaste <code>ls()</code>, så bør du kunne se et objekt med navnet ‘iris.’ Man kan kun arbejde med objekter som er en del af workspacen.</p>
</div>
<div id="importering-af-data-fra-.txt-fil" class="section level3 hasAnchor" number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> Importering af data fra .txt fil<a href="#importering-af-data-fra-.txt-fil" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Det er meget hyppigt, at man har sin data i formen af en .txt fil eller .xlsx fil på sin computer. Den nemmeste måde at få åbnet en .txt fil er ved at bruge <code>read.table()</code>, som i nedenstående:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;mydata.txt&quot;</span>) <span class="co">#indlæse data filen mydata.txt som er i working directory</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data)</span></code></pre></div>
<p>Hvis datasættet har kolonner navne, der er skrevet ind i filen, så skal man huske at bruge <code>header=T</code> for at undgå, at den første række i datasættet bliver disse tekste i stedet for virkelige observationer.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;mydata.txt&quot;</span>,<span class="at">header=</span>T) <span class="co">#indlæse data filen mydata.txt som er i working directory</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data)</span></code></pre></div>
</div>
<div id="importering-af-data-fra-excel" class="section level3 hasAnchor" number="1.5.3">
<h3><span class="header-section-number">1.5.3</span> Importering af data fra Excel<a href="#importering-af-data-fra-excel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Der findes også en hjælpsom pakke, som hedder <strong>readxl</strong>, der kan indlæse Excel-ark direkte ind i R:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data.xlsx&quot;</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>data</span></code></pre></div>
</div>
<div id="kaggle" class="section level3 hasAnchor" number="1.5.4">
<h3><span class="header-section-number">1.5.4</span> Kaggle<a href="#kaggle" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Hvis du gerne vil øve dig med statistike analyser (udover nuværende kursus), er Kaggle en fantastisk ressource til at finde forskellige datasæt. I rigtige mange tilfælde kan man også finde analyser some andre har lavet I R (også Python), hvilket kan inspirere jeres egen læring.</p>
<p>Link hvis interesseret: <a href="https://www.kaggle.com/" class="uri">https://www.kaggle.com/</a></p>
</div>
</div>
<div id="beregninger-i-r" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> Beregninger i R<a href="#beregninger-i-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Her er nogle helt grundlæggende koncepter når man arbejder med R. Du må selvfølgelige gerne springe sektionen over, hvis du allerede har meget erfaring med base R, men det kan være værd at tjekke, om der noget ting, der lige skal gennemgås. En god tilgang er bare at arbejde gennem problemstillingerne nedenfor, og bruger følgende notater som en reference.</p>
<div id="vectorer" class="section level3 hasAnchor" number="1.6.1">
<h3><span class="header-section-number">1.6.1</span> Vectorer<a href="#vectorer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>I R laver man en vector med <code>c()</code>, hvor man adskiller de forskellige elementer med en komma, som i nedenstående eksempel:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>) <span class="co">#sæt objektet &#39;a&#39; til at være en vector af tal </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<!-- Man kan også  -->
<!-- ```{r} -->
<!-- a <- 1:5 -->
<!-- ``` -->
<p>Man er ikke begrænset til tal:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;cat&quot;</span>,<span class="st">&quot;mouse&quot;</span>,<span class="st">&quot;horse&quot;</span>,<span class="st">&quot;sheep&quot;</span>,<span class="st">&quot;dog&quot;</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>c</span></code></pre></div>
<pre><code>## [1] &quot;cat&quot;   &quot;mouse&quot; &quot;horse&quot; &quot;sheep&quot; &quot;dog&quot;</code></pre>
</div>
<div id="datatyper" class="section level3 hasAnchor" number="1.6.2">
<h3><span class="header-section-number">1.6.2</span> datatyper<a href="#datatyper" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Nar vi kommer til at arbejde med visualiseringer og data beardejdning er det vigtigt at have styr på datatyper i datasættet. For eksempel har vectoren <code>c</code> ovenpå typen <code>character</code> (forkortet <code>chr</code>) og ikke <code>numeric</code> (forkortet <code>num</code>):</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(c)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.character</span>(c)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span></code></pre></div>
<p>Her er en list overfor nogle af de vigtigste datatyper:</p>
<table>
<colgroup>
<col width="33%" />
<col width="41%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th>Datatype</th>
<th>Navn</th>
<th>Beskrivelse</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>int</code></td>
<td>integer</td>
<td>kun hel tal <code>c(-1,0,1,2,3)</code></td>
</tr>
<tr class="even">
<td><code>lgl</code></td>
<td>logical</td>
<td><code>TRUE TRUE FALSE TRUE FALSE</code></td>
</tr>
<tr class="odd">
<td><code>chr</code></td>
<td>character</td>
<td><code>c("Bob","Sally","Brian",...)</code></td>
</tr>
<tr class="even">
<td><code>fct</code></td>
<td>factor</td>
<td>bestemte niveauer e.g. <code>Species</code>: <code>c("setosa","versicola")</code></td>
</tr>
<tr class="odd">
<td><code>dbl</code></td>
<td>double</td>
<td>Tal fk. c(<code>4.3902</code>, <code>3.12</code>, <code>4.5</code>)</td>
</tr>
<tr class="even">
<td><code>lst</code></td>
<td>list</td>
<td>blande forskellige data typer og specificere elementer med <code>[[i]]</code> <code>[[1]] [1] c("red","blue")</code> <code>[[2]] [1] TRUE</code> <code>[[3]] [1] c(3,2.3,1.459)</code></td>
</tr>
</tbody>
</table>
<p>En datatype, der bør få særlig opmærksomhed er <code>fct</code> (factor). I følgende vector <code>tea_coffee</code> har vi tekst, men blandt de fem elementer er der kun to bestemte niveauer (nemlig “tea” og “coffee”).</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>tea_coffee <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;tea&quot;</span>,<span class="st">&quot;tea&quot;</span>,<span class="st">&quot;coffee&quot;</span>,<span class="st">&quot;coffee&quot;</span>,<span class="st">&quot;tea&quot;</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.factor</span>(tea_coffee)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] FALSE</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>tea_coffee</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &quot;tea&quot;    &quot;tea&quot;    &quot;coffee&quot; &quot;coffee&quot; &quot;tea&quot;</span></span></code></pre></div>
<p>Vi vil derfor gerne fortælle R, at <code>tea_coffee</code> er ikke bare nogle tilfældig tekst men at der er en struktur med, så vi bruger funktionen <code>as.factor</code> for at lave den om til datatypen <code>fct</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>tea_coffee <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(tea_coffee)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.factor</span>(tea_coffee)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] TRUE</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>tea_coffee</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] tea    tea    coffee coffee tea   </span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Levels: coffee tea</span></span></code></pre></div>
<p>Den ‘ekstra’ oplysninger man har ved at sige, at en variabel betragtes som factor bliver vigtigt når man arbejder med visualiseringer - for eksempel, hvis vi gerne vil lave et barplot hvor man gerne vil adskille søjlerne efter de to niveauer “tea” og “coffee” (visualiseringer er emnet fra kapitel 3).</p>
</div>
</div>
<div id="dataframes" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> Dataframes<a href="#dataframes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="http://www.r-tutor.com/r-introduction/data-frame" class="uri">http://www.r-tutor.com/r-introduction/data-frame</a></p>
<p>Mange af de ting, som vi laver i R tager udgangspunkten i dataframes (eller datarammer).</p>
<!-- height <-  c(140,187,154,132,165) -->
<!-- age <- c(34,31,25,43,29) -->
<!-- score <- c(56,82,48,75,79) -->
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>mydf <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">&quot;personID&quot;</span><span class="ot">=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">&quot;height&quot;</span><span class="ot">=</span><span class="fu">c</span>(<span class="dv">140</span>,<span class="dv">187</span>,<span class="dv">154</span>,<span class="dv">132</span>,<span class="dv">165</span>), <span class="st">&quot;age&quot;</span><span class="ot">=</span><span class="fu">c</span>(<span class="dv">34</span>,<span class="dv">31</span>,<span class="dv">25</span>,<span class="dv">43</span>,<span class="dv">29</span>))</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>mydf</span></code></pre></div>
<pre><code>##   personID height age
## 1        1    140  34
## 2        2    187  31
## 3        3    154  25
## 4        4    132  43
## 5        5    165  29</code></pre>
<p>Man kan fa adgang til variabler i en dataframe ved at bruge det dollar tegn <code>$</code>. For eksempel giver følgende variablen <code>personID</code> fra dataframen <code>mydf</code>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>mydf<span class="sc">$</span>personID</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<p>Husk, at vores dataframe, ligesom et matrix (i R: <code>matrix()</code>) har to dimensioner - række og kolonner Forskellen mellem en matrix og en dataramme er, at datarammer kan indeholde mange forskellige data typer (herunder numeriske, faktorer, karakterer osv.), men matrix indeholder kun numeriske data. For eksempel i tilfældet af ovenstående dataframen er alle variabler numeriske, men vi kan godt tilføje en variabel som er ikke-numeriske:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>mydf<span class="sc">$</span>colour <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>,<span class="st">&quot;blue&quot;</span>,<span class="st">&quot;green&quot;</span>,<span class="st">&quot;orange&quot;</span>,<span class="st">&quot;purple&quot;</span>) <span class="co">#make new variable which is non-numeric</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>mydf</span></code></pre></div>
<pre><code>##   personID height age colour
## 1        1    140  34    red
## 2        2    187  31   blue
## 3        3    154  25  green
## 4        4    132  43 orange
## 5        5    165  29 purple</code></pre>
<p>Nu er <code>mydf</code> er en dataframe, der blander forskellige datatyper, men følgende er en matrix</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">nrow=</span><span class="dv">3</span>,</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">ncol=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]    1    4
## [2,]    2    5
## [3,]    3    6</code></pre>
<p>og kan kun indeholde numeriske data, som kan bruges til at lave matematik operationer (matrix multiplikation osv.). I dette kursus beskæftiger os primært med dataframes (som bliver kaldt for tibbles i <strong>tidyverse</strong>).</p>
<div id="delmægder-af-dataframes" class="section level3 hasAnchor" number="1.7.1">
<h3><span class="header-section-number">1.7.1</span> Delmægder af dataframes<a href="#delmægder-af-dataframes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Selvom vi kommer til at redefinere hvordan man laver delmængde når vi kommer til at arbejde med pakken <strong>tidyverse</strong>, er det alligevel vigtigt at forstå, hvordan man laver en delmængde i base-R, og det er et område, der ofte skaber forvirring blandt de uerfarne.</p>
<p>Når man vil gerne har en bestemt delmængde af en vector, bruger man firkantet paranteser <code>[ ]</code>. Følgende kode giver mig de første to værdier fra vectoren <code>a</code>:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>a[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<p>Bemærk, at mens vectorer har kun en dimension, <strong>har dataframes to dimensioner</strong>. Når man skal lave en delmægde af en dataframe, skal man derfor fortælle R, hvilke række og hvilke kolonner skal være med.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>mydf[række indekser, kolonner indekser]  <span class="co">#not run</span></span></code></pre></div>
<p>For eksempel, hvis vi gerne vil have den første to observationer med, samt kun den anden variabel, skriver man følgende:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>mydf[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">2</span>]  <span class="co">#first two rows (observations), second column (variable) only</span></span></code></pre></div>
<pre><code>## [1] 140 187</code></pre>
<p>Hvis vi vil beholde den første to observationer og samtlige variabler, kan den anden plads være tom:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>mydf[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ]  <span class="co">#first two rows, all columns</span></span></code></pre></div>
<pre><code>##   personID height age colour
## 1        1    140  34    red
## 2        2    187  31   blue</code></pre>
<p>Jeg kan også angive et variabelnavn direkte:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>mydf[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="st">&quot;height&quot;</span>]</span></code></pre></div>
<pre><code>## [1] 140 187</code></pre>
<p>Man kan kigge på en subset af rækkerne i de data ved at</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>mydf[mydf<span class="sc">$</span>height<span class="sc">&gt;=</span><span class="dv">165</span>,] <span class="co">#alle rækker i datarammen med height = 165 eller over</span></span></code></pre></div>
<pre><code>##   personID height age colour
## 2        2    187  31   blue
## 5        5    165  29 purple</code></pre>
<p>Her er en tabel af comparitiver, og jeg gengiver samme tabel når I kommer til at lave delmængde i <strong>tidyverse</strong>:</p>
<table>
<thead>
<tr class="header">
<th>comparitiv</th>
<th>beskrivelse</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;</code></td>
<td>less than</td>
</tr>
<tr class="even">
<td><code>&gt;</code></td>
<td>greater than</td>
</tr>
<tr class="odd">
<td><code>&lt;=</code></td>
<td>less than or equal to</td>
</tr>
<tr class="even">
<td><code>&gt;=</code></td>
<td>greater than or equal to</td>
</tr>
<tr class="odd">
<td><code>==</code></td>
<td>equal to</td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>not equal to</td>
</tr>
<tr class="odd">
<td><code>&amp;</code></td>
<td>and</td>
</tr>
<tr class="even">
<td><code>%in%</code></td>
<td>in</td>
</tr>
<tr class="odd">
<td><code>|</code></td>
<td>or</td>
</tr>
<tr class="even">
<td><code>!</code></td>
<td>not</td>
</tr>
</tbody>
</table>
<p>Jeg mener, at <code>%in%</code> er særlig brugbart og er værd at lære:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>mydf[mydf<span class="sc">$</span>personID <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>),] <span class="co">#alle personer med personID 1,3 eller 5 </span></span></code></pre></div>
<pre><code>##   personID height age colour
## 1        1    140  34    red
## 3        3    154  25  green
## 5        5    165  29 purple</code></pre>
<p>Her er et eksempel på, hvordan man bruger udråbstegnet: personer med personID, der ikke er 1,3 eller 5:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>mydf[<span class="sc">!</span>(mydf<span class="sc">$</span>personID <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>)),] <span class="co">#alle personer med personID 2 eller 4</span></span></code></pre></div>
<pre><code>##   personID height age colour
## 2        2    187  31   blue
## 4        4    132  43 orange</code></pre>
</div>
</div>
<div id="descriptive-statistics" class="section level2 hasAnchor" number="1.8">
<h2><span class="header-section-number">1.8</span> Descriptive statistics<a href="#descriptive-statistics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="simulere-data-fra-den-normale-fordeling" class="section level3 hasAnchor" number="1.8.1">
<h3><span class="header-section-number">1.8.1</span> Simulere data fra den normale fordeling<a href="#simulere-data-fra-den-normale-fordeling" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Hvis du har bruge for at vide mere om den normale fordeling: <a href="http://www.r-tutor.com/elementary-statistics/probability-distributions/normal-distribution" class="uri">http://www.r-tutor.com/elementary-statistics/probability-distributions/normal-distribution</a></p>
<p>Man kan nemt lave sin egne ‘fake’ data ved at simulere det fra en fordeling, der vil typiske være den normale fordeling, idet den normale fordeling opstår mest hyppigt i den virkelige verden (husk den klassiske klokke-form). I R kan man bruge funktionen <code>rnorm</code> til at simulere data - først angiver man, hvor mange observationer man vil have, og dernæst den mean og standard deviation (sd), som er de to nødvendige parametre for at beskrive en normal fordeling</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">25</span>,<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>) <span class="co">#standard normal distribution</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>x <span class="co">#så har vi 25 værdier fra en normal distribution med mean=0 og standard deviation=1.</span></span></code></pre></div>
<pre><code>##  [1] -0.5915676 -0.4034873  1.9340335 -0.5659846  1.5624934 -0.1804336
##  [7]  1.0006718 -2.0531831 -0.2491142 -0.9479015  0.6501228 -0.5942702
## [13] -1.5354021 -0.3139113  0.3045057  0.3955000 -1.4245341  0.7695435
## [19]  0.5022789 -0.9117904  0.2700537 -1.2867310 -0.5737041 -0.5185487
## [25]  1.1475699</code></pre>
<p>I stedet for at kigge på alle værdier på én gang, vil vi måske hellere kigge kun på de første (eller sidste) værdier:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(x) <span class="co">#første 6</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] -0.5915676 -0.4034873  1.9340335 -0.5659846  1.5624934 -0.1804336</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(x) <span class="co">#sidste 6</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] -0.9117904  0.2700537 -1.2867310 -0.5737041 -0.5185487  1.1475699</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">1</span>] <span class="co">#første værdi</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] -0.5915676</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">length</span>(x)] <span class="co">#sidste data point</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1.14757</span></span></code></pre></div>
<p>Bemærk, at til forskellen af Python og mange andre programmering sprog, R bruger 1-baserende indicer - det betyder, at den første værdi er <code>x[1]</code> og <strong>ikke</strong> <code>x[0]</code> som i Python.</p>
</div>
<div id="measures-of-central-tendency" class="section level3 hasAnchor" number="1.8.2">
<h3><span class="header-section-number">1.8.2</span> Measures of central tendency<a href="#measures-of-central-tendency" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<thead>
<tr class="header">
<th>function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>mean()</code></td>
<td>mean <span class="math inline">\(\bar{x}_{i} = \frac{1}{n}\sum_{i=1}^{n} x_{i}\)</span></td>
</tr>
<tr class="even">
<td><code>median()</code></td>
<td>median value</td>
</tr>
<tr class="odd">
<td><code>max()</code></td>
<td>maximum value</td>
</tr>
<tr class="even">
<td><code>min()</code></td>
<td>minimum value</td>
</tr>
<tr class="odd">
<td><code>var()</code></td>
<td>variance <span class="math inline">\(s^2 = \frac{1}{n-1}\sum_{i=1}^{n} (x_{i} - \bar{x}_{i})^2\)</span></td>
</tr>
<tr class="even">
<td><code>sd()</code></td>
<td>standard deviation <span class="math inline">\(s\)</span></td>
</tr>
</tbody>
</table>
<p>Lad os afprøve dem på vores simulerede data:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>my_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(x)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>my_median <span class="ot">&lt;-</span> <span class="fu">median</span>(x)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>my_max <span class="ot">&lt;-</span> <span class="fu">max</span>(x)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>my_min <span class="ot">&lt;-</span> <span class="fu">min</span>(x)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>my_var <span class="ot">&lt;-</span> <span class="fu">var</span>(x)</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>my_sd <span class="ot">&lt;-</span> <span class="fu">sd</span>(x)</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(my_mean,my_median,my_max,my_min,my_var,my_sd) <span class="co">#print results</span></span></code></pre></div>
<pre><code>## [1] -0.1445516 -0.3139113  1.9340335 -2.0531831  0.9805114  0.9902078</code></pre>
<p>Man kan også lave et summary af dataen, som bestå af mange af de statistiker navnt ovenpå:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(x)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
## -2.0532 -0.5943 -0.3139 -0.1446  0.5023  1.9340</code></pre>
</div>
<div id="tapply" class="section level3 hasAnchor" number="1.8.3">
<h3><span class="header-section-number">1.8.3</span> <code>tapply()</code><a href="#tapply" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En meget brugbar funktion, som er værd at vide, er <code>tapply()</code>.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(iris<span class="sc">$</span>Sepal.Length,iris<span class="sc">$</span>Species,mean) <span class="co"># ovenstående i kun en linje</span></span></code></pre></div>
<pre><code>##     setosa versicolor  virginica 
##      5.006      5.936      6.588</code></pre>
<p>Her tager vi en variabel der hedder <code>Sepal.Length</code>, opdeler den efter <code>Species</code>, og beregner <code>mean</code> for enhver af de tre arter i <code>Species</code> (setosa, versicolor og virginica). Man kan opnå det samme resultat ved at beregne <code>mean</code> for de tre <code>Species</code> hver for sig (en tilgang, der ikke opskaleres særlig godt!):</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gennemsnit Sepal Length for Species setosa</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>mean_setosa <span class="ot">&lt;-</span> <span class="fu">mean</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species<span class="sc">==</span><span class="st">&quot;setosa&quot;</span>])</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># gennemsnit Sepal Length for Species versicolor</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>mean_versi <span class="ot">&lt;-</span> <span class="fu">mean</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species<span class="sc">==</span><span class="st">&quot;versicolor&quot;</span>]) </span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co"># gennemsnit Sepal Length for Species virginica</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>mean_virgin <span class="ot">&lt;-</span> <span class="fu">mean</span>(iris<span class="sc">$</span>Sepal.Length[iris<span class="sc">$</span>Species<span class="sc">==</span><span class="st">&quot;virginica&quot;</span>])</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(mean_setosa,mean_versi,mean_virgin)</span></code></pre></div>
<pre><code>## [1] 5.006 5.936 6.588</code></pre>
<p>Det er også værd at ved koncepten, fordi vi kommer til lære en lignende koncept i <strong>tidyverse</strong> (med <code>group_by</code> og <code>summarise</code>).</p>
</div>
</div>
<div id="statistike-tester" class="section level2 hasAnchor" number="1.9">
<h2><span class="header-section-number">1.9</span> Statistike tester<a href="#statistike-tester" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!-- Her er nogle koncepter der jeg forventer, at I har mere eller mindre set før begyndelsen af dette kursus. Jeg forventer ikke at I huske alle detaijler, derfor gå jeg hurtige igennem både koncepter og hvordan man bruger dem i R (vigtigt) undervejs, på de tidspunkter vi støder ind i dem. Hvis der er dog noget, at du som den enkelte studerende slet ikke har set før, anbefelder jeg, at du tjekker på Google hvad det gå ud på. -->
<!-- Jeg går ud fra at du har et kendskab til de meste grundlæggende statistiske koncepter såsom p-værdi, signifikansniveau, null/alternativ hypotese, 1- eller 2- sidet test og så videre. Se gerne jeres notater fra tidligere kurser (eller læse online) hvis du har bruge for at gennemgå de koncepter. -->
<p>Her giver jeg et oversigt over nogle af de baserende tests man kan lave på data i R - det giver noget, du kan referere til senere hvis der er brug for det. Jeg går ikke i detaljer eller teorien af testerne (se dit tidligere kursus), men jeg forventer at I er i stand til at bruge dem på en hensigtsmæssigt måde i R, og fortolker resultaterne. Vær ikke bekymret hvis du ikke har set de hele før, jeg giver masser a muligheder for at øve statistik gennem forløbet.</p>
<div id="korrelation" class="section level3 hasAnchor" number="1.9.1">
<h3><span class="header-section-number">1.9.1</span> Korrelation<a href="#korrelation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Måler sammenhængen mellem to normalfordelte variabler:</p>
<ul>
<li><span class="math inline">\(&gt;0\)</span> betyder, at der er en postiv sammenhæng</li>
<li><span class="math inline">\(&lt;0\)</span> betyder, at der er en negativ sammenhæng</li>
<li><span class="math inline">\(=0\)</span> betyder, at der er ingen sammenhængen mellem de to variabler</li>
</ul>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(cars)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(cars<span class="sc">$</span>speed, cars<span class="sc">$</span>dist) </span></code></pre></div>
<pre><code>## [1] 0.8068949</code></pre>
<p>Man kan teste om korrelationen er signifikant ved at bruge <code>cor.test()</code></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(cars<span class="sc">$</span>speed, cars<span class="sc">$</span>dist) </span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  cars$speed and cars$dist
## t = 9.464, df = 48, p-value = 1.49e-12
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.6816422 0.8862036
## sample estimates:
##       cor 
## 0.8068949</code></pre>
<p>Så kan man se, at p-værdien er 0, der er under 0.05, så konkludere man, at der er en signifikant korrelation mellem de to variabler.</p>
<!-- * Hypotesetest - hvad betyder 'nullhypotese' og 'alternativhypotese'? -->
<!-- * t-test - funktionen i R. Hvad er forudsætningerne til at lave en t-test? -->
<!-- * chi-sq test -->
<!-- * correlations (sammenhænge) -->
<!-- * linær regræssion, i den baserende omfang. -->
<!-- Vi arbejder lidt med koncepterne i vores første opgaver, hvor jeg gå igennem, især i de steder hvor I få mest problemmer. Dermed sikre vi, at i har et stærkt grundlag til resten af kurset. -->
</div>
<div id="test-for-uafhængighed-chi-sq-test" class="section level3 hasAnchor" number="1.9.2">
<h3><span class="header-section-number">1.9.2</span> Test for uafhængighed (chi-sq test)<a href="#test-for-uafhængighed-chi-sq-test" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Her undersøger man, om der er en sammenhæng mellem antal observationer i to forskellige kategorier. Se for eksempel følgende tabel, der viser antal kopi af en gen variant og to forskellige farver som phenotype (farve på en type blomst):</p>
<table>
<thead>
<tr class="header">
<th></th>
<th align="center">0</th>
<th align="center">1</th>
<th align="center">2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>red</td>
<td align="center">29</td>
<td align="center">31</td>
<td align="center">16</td>
</tr>
<tr class="even">
<td>pink</td>
<td align="center">11</td>
<td align="center">16</td>
<td align="center">24</td>
</tr>
</tbody>
</table>
<p>Vi vil gerne vide, om phenotype er afhængig af genotype:</p>
<ul>
<li><span class="math inline">\(H_{0}:\)</span> antal gen copi og phenotype er uafhængie af hinanden VS</li>
<li><span class="math inline">\(H_{1}:\)</span> antal gen copi og phenotype er afhængie af hinanden</li>
</ul>
<p>Testen går ud på, at man beregner forventede værdier (baserende på de totals under nullhypotesen af de er uafængige) og sammenligne forventede værdier med observerede værdier. Man laver testen i R ved at benytte funktionen <code>chisq.test</code>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(dat)</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s Chi-squared test
## 
## data:  dat
## X-squared = 9.9516, df = 2, p-value = 0.006903</code></pre>
<p>Her er p-værdien = 0.006903 &lt; 0.05, så vi forkaster nulhypotesen og konkluderer, at der er en afhængighed mellem de to variabler. Man kan også se fra rådatasættet, at der er langt flere røde blomster, der har ingen kopi af genet end der er røde blomster, der har to kopier af genet, og mønstret er omvendt i tilfældet af de lyserøde blomster.</p>
</div>
<div id="sample-t-test" class="section level3 hasAnchor" number="1.9.3">
<h3><span class="header-section-number">1.9.3</span> 1 sample t-test<a href="#sample-t-test" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For at vise en 1-sample t-test, simulerer jeg noget data fra den normal fordeling med <code>mean = 3</code>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">290223</span>) <span class="co"># bare for at få den samme resultat hver gang</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>,<span class="at">mean =</span> <span class="dv">3</span>,<span class="at">sd =</span> <span class="dv">1</span>)</span></code></pre></div>
<p>Forestil dig, at du ikke helt stoler på funktionen <code>rnorm()</code> og gerne vil teste, om <code>x</code> virkelig kommer fra en normal fordeling med et gennemsnit (<span class="math inline">\(\mu\)</span>) på tre. Nulhypotesen og alternativ hypotesen (2-sidet test) er således:</p>
<ul>
<li><span class="math inline">\(H_{0}: \mu = 3\)</span>, VS</li>
<li><span class="math inline">\(H_{1}: \mu \neq 3\)</span></li>
</ul>
<p>For at lave testen i R, bruger man funktionen <code>t.test()</code> og angiver <code>mu = 3</code> for at reflektere vores hypoteser:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(x,<span class="at">mu =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## 
##  One Sample t-test
## 
## data:  x
## t = -1.1448, df = 9, p-value = 0.2818
## alternative hypothesis: true mean is not equal to 3
## 95 percent confidence interval:
##  2.169968 3.272231
## sample estimates:
## mean of x 
##  2.721099</code></pre>
<p>Fra resultatet kan man se, at p-værdien er estimeret som 0.2818, og da den er &gt; 0.05 forkaster vi ikke nulhypotesen, og konkluderer at <span class="math inline">\(\mu = 3\)</span>.</p>
<p><strong>Bemærkning</strong>: da vi simulerede vores data fra en normal fordeling med et gennemsnit på tre, vidste vi i forvejen at det korrekte svar er, at beholde nullhypotesen. Havde vi forkastet nullhypotesen, havde vi lavet en <strong>type I fejl</strong> - det vil sige, at vi forkaster nullhypotesen når det faktisk er sandt.</p>
<!-- Hvis vi gentager testen mange gange (ved at første simulere tilfældige data og dernæst lave samme t-test) og tæller op, hvor mange gange vi lave en type I fejl ved at forkaste nulhypotesen, så vil der være omkring samme proportion som det fastlagt signifikans niveau (= 0.05 her). -->
</div>
<div id="sample-t-test-1" class="section level3 hasAnchor" number="1.9.4">
<h3><span class="header-section-number">1.9.4</span> 2-sample t-test<a href="#sample-t-test-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<!-- * Undersøge, om der er en forskellen i den gennemsnit Sepal.Length mellem de to arter * Kan de betragtes at være den samme, under den såkaldte null hypotese? -->
<p>Undersøger om der er en forskel i de gennemsnitlige værdier mellem to grupper - kan de to grupper betragtes til at stammer fra den samme normale fordeling? Hypoteserne er således (to-sidet):</p>
<ul>
<li><span class="math inline">\(H_{0}: \mu_{1} = \mu_{2}\)</span>, VS</li>
<li><span class="math inline">\(H_{1}: \mu_{1} \neq \mu_{2}\)</span></li>
</ul>
<p>I følgende kode simulere jeg to stikprøver, der kommer fra en normal fordeling med forskellige gennemsnitte og bruger funktionen <code>t.test</code>. Man kan angive at de to stikprøver har samme variance ved at skrive <code>var.equal = T</code> indenfor funktionen <code>t.test</code>:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>,<span class="dv">3</span>,<span class="dv">1</span>)</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>,<span class="dv">5</span>,<span class="dv">1</span>)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(x,y,<span class="at">var.equal =</span> T)</span></code></pre></div>
<pre><code>## 
##  Two Sample t-test
## 
## data:  x and y
## t = -5.4258, df = 18, p-value = 3.729e-05
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -2.700858 -1.193081
## sample estimates:
## mean of x mean of y 
##  2.783056  4.730025</code></pre>
<p>Hvis man til gengæld ikke kan antage, at variansen er den samme i de to grupper:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>,<span class="dv">3</span>,<span class="dv">1</span>)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>,<span class="dv">5</span>,<span class="dv">3</span>) <span class="co">#større variance</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(x,y,<span class="at">var.equal =</span> F) <span class="co">#var.equal=F er &#39;default&#39; så man behøver ikke at specifere</span></span></code></pre></div>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  x and y
## t = -2.0238, df = 11.77, p-value = 0.0663
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -3.9077927  0.1483728
## sample estimates:
## mean of x mean of y 
##  2.757436  4.637146</code></pre>
<p>Bemærk at hvis man kan antage at variancen er den samme, så har man mere <strong>power</strong> (kræft) til at kalde en virkelig forskel for signifikant.</p>
</div>
<div id="paired-t-test" class="section level3 hasAnchor" number="1.9.5">
<h3><span class="header-section-number">1.9.5</span> Paired t-test<a href="#paired-t-test" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>En paired t-test bruges når man for eksempel har målinger for den samme sæt personer i hver stikprøve, og man gerne vil teste om forskellen i værdier mellem de to stikprøver er signifikant. For eksempel hvis vi har “before” og “after” målinger for den samme 10 individer:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">320</span>)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>before <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>,<span class="dv">3</span>,<span class="dv">1</span>)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>after <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">10</span>,<span class="dv">6</span>,<span class="dv">2</span>)</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(before,after,<span class="at">paired=</span>T) <span class="co">#specificy paired data</span></span></code></pre></div>
<pre><code>## 
##  Paired t-test
## 
## data:  before and after
## t = -9.3296, df = 9, p-value = 6.356e-06
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -5.415186 -3.301613
## sample estimates:
## mean of the differences 
##               -4.358399</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(before<span class="sc">-</span>after,<span class="at">mu=</span><span class="dv">0</span>) <span class="co">#exactly the same result</span></span></code></pre></div>
<pre><code>## 
##  One Sample t-test
## 
## data:  before - after
## t = -9.3296, df = 9, p-value = 6.356e-06
## alternative hypothesis: true mean is not equal to 0
## 95 percent confidence interval:
##  -5.415186 -3.301613
## sample estimates:
## mean of x 
## -4.358399</code></pre>
</div>
<div id="anova-variansanalyse" class="section level3 hasAnchor" number="1.9.6">
<h3><span class="header-section-number">1.9.6</span> ANOVA (variansanalyse)<a href="#anova-variansanalyse" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Har man flere grupper i stedet for to, kan man bruge ANOVA (analysis of variance eller variansanalyse). For en kategorisk variabel med <span class="math inline">\(k\)</span> grupper, er nul/alternativhypotesen:</p>
<ul>
<li><span class="math inline">\(H_{0}: \mu_{1} = \mu_{2} = \ldots = \mu_{k}\)</span></li>
<li><span class="math inline">\(H_{1}:\)</span> ikke alle middelværdier er enes</li>
</ul>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">#simulere data til 3 forskellige grupper fra den normale fordeling med standard afvigelse af 3</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>group1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">50</span>,<span class="dv">10</span>,<span class="dv">3</span>)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>group2 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">55</span>,<span class="dv">10</span>,<span class="dv">3</span>)</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>group3 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">48</span>,<span class="dv">5</span>,<span class="dv">3</span>)</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="co">#data må være i en dataramme, med den ene kolon = vores værdier, og den anden kolon = grupper</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(group1,group2,group3)</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;G1&quot;</span>,<span class="dv">50</span>),<span class="fu">rep</span>(<span class="st">&quot;G2&quot;</span>,<span class="dv">55</span>),<span class="fu">rep</span>(<span class="st">&quot;G3&quot;</span>,<span class="dv">48</span>))</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>mydf <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">&quot;group&quot;</span><span class="ot">=</span>x,<span class="st">&quot;value&quot;</span><span class="ot">=</span>y)</span></code></pre></div>
<p>Til at udføre testen bruger man funktionen <code>lm</code>. Det er en forkortelse for “linear model” og kan bruges til at bygge op forskellige modeller. Her angiver vi en model, således at hver group (<code>G1</code>, <code>G2</code> og <code>G3</code> fra variablen <code>x</code>) har sin egen middelværdi (variablen <code>value</code>), hvilket er modellen under alternativhypotesen:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>mylm <span class="ot">&lt;-</span> <span class="fu">lm</span>(value<span class="sc">~</span>group,<span class="at">data=</span>mydf) <span class="co">#H1 model</span></span></code></pre></div>
<p>Under nullhypotesen har alle grupper den samme middelværdi og vi behøver derfor ikke at have variablen <code>group</code> en del af modellen. Vi betegner situationen i modellen ved at skrive <code>1</code>, der betyder at de forventede værdier for den afhængige variabel <code>value</code> er bare dens middelværdi:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>mylm_null <span class="ot">&lt;-</span> <span class="fu">lm</span>(value<span class="sc">~</span><span class="dv">1</span>,<span class="at">data=</span>mydf) <span class="co">#H0 model</span></span></code></pre></div>
<p>For at sammenligne de to modeller benytter vi funktionen <code>anova</code> (efter analysis of variance):</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(mylm_null,mylm)</span></code></pre></div>
<pre><code>## Analysis of Variance Table
## 
## Model 1: value ~ 1
## Model 2: value ~ group
##   Res.Df    RSS Df Sum of Sq      F    Pr(&gt;F)    
## 1    152 2215.4                                  
## 2    150 1509.9  2    705.55 35.047 3.245e-13 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>P-værdien er (&lt;0.05), så nulhypotesen er forkastet til fordel af alternativhypotesen, altså modellen, hvor hver gruppe har sin egen middelværdi. Bemærk at det er til trods af, at to af de tre grupper kommer fra en normal fordeling med præcis de samme middelværdier (det er nok, at den trejde gruppe har en ænderledes middelværdi).</p>
<!-- * Grupper må være normale fordelt -->
<!-- * Variancen må være de samme i alle grupper -->
</div>
<div id="lineær-regression" class="section level3 hasAnchor" number="1.9.7">
<h3><span class="header-section-number">1.9.7</span> Lineær regression<a href="#lineær-regression" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><em>OBS: se også video i forbindelse med Rmarkdown (næste emne), hvor jeg gennemgå lineær regression med R</em></p>
<p>Formål: måler (en retningsbestemt) relation mellem to kontinuerte variabler. I simpel lineær regression svarer det til, at man gerne vil finde den rette linje gennem punkterne, der bedste beskriver relationen.</p>
<p>Eksempel - datasættet <code>mtcars</code>, response (afgængig) variabel er <code>mpg</code> og predictor (uafhængig) variabel er <code>wt</code>.</p>
<p><img src="visualisering_22_files/figure-html/unnamed-chunk-45-1.png" width="480" /></p>
<p>Man skriver relationen i R som <code>mpg ~ wt</code> og benytter <code>lm()</code>(<code>lm(mpg~wt,data=mtcars)</code>):</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>mylm <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data=</span>mtcars)  <span class="co"># build linear regression model</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>mylm</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ wt, data = mtcars)
## 
## Coefficients:
## (Intercept)           wt  
##      37.285       -5.344</code></pre>
<p>Vores “Coefficients” beskriver den bedste rette linje:</p>
<ul>
<li>Skæringen (intercept): 37.285</li>
<li>Hældningskoefficient (slope): -5.344</li>
</ul>
<p>Det betyder, at hvis vægten <code>wt</code> af en bil stiger med 1, så stiger <code>mpg</code> ved -5.344 (det vil sige at <code>mpg</code> reduceres med 5.344).</p>
</div>
<div id="r-squared-coefficient-of-determination" class="section level3 hasAnchor" number="1.9.8">
<h3><span class="header-section-number">1.9.8</span> R-squared coefficient of determination<a href="#r-squared-coefficient-of-determination" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Den <span class="math inline">\(R^2\)</span> eller “forklaringsgraden” (coefficeint of determination) har til formål at forklare, hvor godt vores lineær model passer til de data. For eksempel hvor meget af variansen i <code>mpg</code> forklares af variablen <code>wt</code>?</p>
<ul>
<li>Hvis det er tæt på 1 - så er der en meget tæt relation (hvis man kender vægten, så vide man også <code>mpg</code> med stor sikkerhed)</li>
<li>Hvis det er tæt på 0 - så er relationen svag - høj sandsynlighed for, at der er andre variabler der bedre kan forklare variansen i <code>mpg</code>.</li>
</ul>
<p>I ovenstående model, kan man se den <span class="math inline">\(R^2\)</span> værdi med <code>summary(mylm)</code>.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mylm)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ wt, data = mtcars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.5432 -2.3647 -0.1252  1.4096  6.8727 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  37.2851     1.8776  19.858  &lt; 2e-16 ***
## wt           -5.3445     0.5591  -9.559 1.29e-10 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3.046 on 30 degrees of freedom
## Multiple R-squared:  0.7528, Adjusted R-squared:  0.7446 
## F-statistic: 91.38 on 1 and 30 DF,  p-value: 1.294e-10</code></pre>
<p>Det fortæller os, at <span class="math inline">\(R^2\)</span> = 0.7528.</p>
</div>
<div id="antagelser---lineær-regression" class="section level3 hasAnchor" number="1.9.9">
<h3><span class="header-section-number">1.9.9</span> Antagelser - lineær regression<a href="#antagelser---lineær-regression" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Normalfordelte residualer</li>
<li>Residualer har samme spredning (varianshomogenitet)</li>
<li>Uafhængighed</li>
<li>Fit er linæer</li>
</ul>
<p>Koden <code>plot(mylm,which=c(1))</code> angiver residualer vs predikterede (fitted) værdier - de skal være tilfældigt fordelt over plottet og prikkernes varians skal være nogenlunde konstant langt x-aksen (det giver, at den røde linje er flade).</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mylm,<span class="at">which=</span><span class="fu">c</span>(<span class="dv">1</span>))</span></code></pre></div>
<p><img src="visualisering_22_files/figure-html/unnamed-chunk-48-1.png" width="480" /></p>
<p>Med koden <code>plot(mylm,which=c(2))</code> kan man tjekke antagelsen på en normal fordeling. Punkterne skal være nogenlunde tæt på den diagonale linje.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mylm,<span class="at">which=</span><span class="fu">c</span>(<span class="dv">2</span>))</span></code></pre></div>
<p><img src="visualisering_22_files/figure-html/unnamed-chunk-49-1.png" width="480" /></p>
</div>
<div id="multiple-lineær-regression" class="section level3 hasAnchor" number="1.9.10">
<h3><span class="header-section-number">1.9.10</span> Multiple lineær regression<a href="#multiple-lineær-regression" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Her kan man tilføje flere variabler i vores model formel.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>mylm_disp <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> disp, <span class="at">data=</span>mtcars) <span class="co"># build linear regression model</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mylm_disp)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ wt + disp, data = mtcars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.4087 -2.3243 -0.7683  1.7721  6.3484 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 34.96055    2.16454  16.151 4.91e-16 ***
## wt          -3.35082    1.16413  -2.878  0.00743 ** 
## disp        -0.01773    0.00919  -1.929  0.06362 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 2.917 on 29 degrees of freedom
## Multiple R-squared:  0.7809, Adjusted R-squared:  0.7658 
## F-statistic: 51.69 on 2 and 29 DF,  p-value: 2.744e-10</code></pre>
<p>Her kan man se, at med tilføjelsen af variablen <code>disp</code>, er <span class="math inline">\(R^2\)</span> steget til 0.7809. Bemærk, at jo flere variabler man tilføjer til modellen, jo større bliver <span class="math inline">\(R^2\)</span>-værdien. Den adjusted <span class="math inline">\(R^2\)</span> værdi er lavere fordi den prøver at tage højde for kompleksiteten af modellen (hvor mange parametre der er).</p>
<p>Variablen <code>disp</code> er faktisk ikke selv signifikant når der er taget højde for variablen <code>wt</code> (p-værdien 0.0636 - tjek, at du selv kan finde værdien i resultatet).</p>
<p>Hvis en af de uafhængige variabler er kategorisk bruger man funktionen <code>anova</code> til at teste den overordnet effekt af den variabel. For eksempel har variablen <code>cyl</code> 3 mulige værdier (niveauer) - 4, 6 og 8. Vi kan inddrage variablen i vores model: –&gt;</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>mylm_cyl <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> <span class="fu">factor</span>(cyl), <span class="at">data=</span>mtcars) <span class="co"># build linear regression model</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mylm_cyl)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ wt + factor(cyl), data = mtcars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.5890 -1.2357 -0.5159  1.3845  5.7915 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   33.9908     1.8878  18.006  &lt; 2e-16 ***
## wt            -3.2056     0.7539  -4.252 0.000213 ***
## factor(cyl)6  -4.2556     1.3861  -3.070 0.004718 ** 
## factor(cyl)8  -6.0709     1.6523  -3.674 0.000999 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 2.557 on 28 degrees of freedom
## Multiple R-squared:  0.8374, Adjusted R-squared:   0.82 
## F-statistic: 48.08 on 3 and 28 DF,  p-value: 3.594e-11</code></pre>
<!-- Der er faktisk tre rette linjer her - en for hvert niveau af `cyl`, og de har samme hældning med forskellige skæringspunkter. -->
<!-- * Hvis `cyl = 4`: mpg $= 33.99 - 3.21$wt -->
<!-- * Hvis `cyl = 6`: mpg $= 33.99 - 3.21$wt $-4.26$ -->
<!-- * Hvis `cyl = 8`: mpg $= 33.99 - 3.21$wt $-6.07$ -->
<p>Man kan ikke se den overordnet effekt af <code>cyl</code> fra den ovenstående <code>summary</code> men man kan teste den med <code>anova</code>:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(mylm,mylm_cyl)</span></code></pre></div>
<pre><code>## Analysis of Variance Table
## 
## Model 1: mpg ~ wt
## Model 2: mpg ~ wt + factor(cyl)
##   Res.Df    RSS Df Sum of Sq      F   Pr(&gt;F)   
## 1     30 278.32                                
## 2     28 183.06  2    95.263 7.2856 0.002835 **
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>Så kan man se, at <code>cyl</code> er signifikant.</p>
</div>
</div>
<div id="problemstillinger" class="section level2 hasAnchor" number="1.10">
<h2><span class="header-section-number">1.10</span> Problemstillinger<a href="#problemstillinger" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Alle bør lave quizzen men ellers vælg øvelser efter egen erfaring:</p>
<ul>
<li>2-7 er meget grundlæggende og de fleste kan springer over hvis nogenlunde tryg med base-R</li>
<li>8-14 anbefaler jeg til alle som en god måde at tjekke viden på</li>
<li>15-18 øver hvordan man laver variansanalyse/regression i R - regression kommer jeg ind på igen senere men det hjælper hvis du er tryg med brugen af funktionen <code>lm</code> til at lave modeller i ANOVA/simpel lineær regression.</li>
</ul>
<div id="quiz---basics" class="section level3 hasAnchor" number="1.10.1">
<h3><span class="header-section-number">1.10.1</span> Quiz - Basics<a href="#quiz---basics" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Se quiz i Absalon, der hedder “Quiz - Basics.”</li>
</ol>
</div>
<div id="grundlæggende-r" class="section level3 hasAnchor" number="1.10.2">
<h3><span class="header-section-number">1.10.2</span> Grundlæggende R<a href="#grundlæggende-r" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol start="2" style="list-style-type: decimal">
<li>(<strong>helt baserende viden</strong>) Åbn en ny fil i Rstudio ved at trykke på “File” &gt; “New File” &gt; “R script.” Køre følgende kode en linje ad gangen og tjek, du kan forstå outputtet.</li>
</ol>
<p>Husk at den nemmeste måde at køre kode er ved at trykke CMD+ENTER (Mac) eller WIN-KEY+ENTER (Windows).</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">+</span><span class="dv">2</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="sc">*</span><span class="dv">2</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x<span class="sc">+</span><span class="dv">2</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(x)</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(x)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">10</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="fu">log10</span>(<span class="dv">100</span>)</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span>  <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">4</span>,<span class="dv">3</span>)</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(y)</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>,<span class="st">&quot;b&quot;</span>,<span class="st">&quot;c&quot;</span>))</span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(y)</span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(y)</span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">13</span>,<span class="at">by=</span><span class="dv">3</span>)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>(<strong>helt baserende viden</strong>) Køre følgende kode til at åbne nogle af de indbygget datasæt, som vi bruger i kurset.</li>
</ol>
<ul>
<li>Prøve <code>head()</code>, <code>nrow()</code>, <code>summary()</code> osv.</li>
<li>Prøve også fk. <code>?cars</code> for at se en beskrivelse.</li>
</ul>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(cars)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(ToothGrowth)</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(sleep)</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(chickwts)</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(trees)</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="co">#se her for andre:</span></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="at">help =</span> <span class="st">&quot;datasets&quot;</span>)</span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>(<strong>baserende plots</strong>) Jeg giver nogle muligheder for datasættet “iris.” Afprøve funktionerne for nogle af de andre ovenstående indbygget datasæt, som du indlæst.</li>
</ol>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(iris<span class="sc">$</span>Sepal.Length,iris<span class="sc">$</span>Sepal.Width)</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(iris<span class="sc">$</span>Sepal.Width)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(iris<span class="sc">$</span>Sepal.Length<span class="sc">~</span>iris<span class="sc">$</span>Species)</span></code></pre></div>
<p>Man kan også gøre plotterne lidt pænere ved at give dem en titel/aksen-navne osv. Prøve <code>?plot</code> for at se nogle muligheder, og tilføje <code>ylab</code>, <code>xlab</code>, <code>main</code> (titel) i én af plotterne. Leg også med <code>col</code> (farver). Bemærk dog, at vi kommer til at ændre måden at lave plotter på når vi starter <code>ggplot2</code>.</p>
<ol start="5" style="list-style-type: decimal">
<li>(<strong>dataframes</strong>) Brug datasættet <code>cars</code> (<code>data(cars)</code>) til at:</li>
</ol>
<ul>
<li>Lav et scatter plot med speed på x-aksen og dist på y-aksen</li>
<li>Tilføj en ny kolon med følgende kode:</li>
</ul>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>cars<span class="sc">$</span>fast <span class="ot">&lt;-</span> cars<span class="sc">$</span>speed<span class="sc">&gt;</span><span class="dv">15</span></span></code></pre></div>
<ul>
<li>Brug <code>mean</code> på den nye variabel til at finde ud af proportionen af biler, der er hurtige</li>
<li>Beregn gennemsnitsværdien af variablen <code>dist</code> for hurtige biler og ikke-hurtige biler hver for sig (brug funktionen <code>tapply</code>). Gem resultatet med <code>&lt;-</code>.</li>
<li>Brug <code>barplot</code> til at lave et plot af den gennemsnitlige <code>dist</code> for hurtige og ikke-hurtige biler.</li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>(<strong>dataframes</strong>) Lav en ny dataframe (funktionen <code>data.frame()</code>) med tre kolonner som hedder “navn,” “alder” og “yndlings_farve” (find bare selv på værdierne). Sørge for, at den har 4 rækker.</li>
</ol>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>mydf <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">&quot;navn&quot;</span><span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;alice&quot;</span>,<span class="st">&quot;freddy&quot;</span>, ... ), <span class="st">&quot;alder&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(...), ...) <span class="co">#not run, slette &quot;...&quot; og skrive videre</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(mydf) <span class="co"># fire række og tre kolonner</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>mydf</span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li>(<strong>dataframes</strong>) Tilføj en ny variabel <code>random</code> til ovenstående dataframe, hvor værdierne kommer fra en normal fordeling med et gennemsnit på 5 og sd på 1 (bruge funktionen <code>rnorm</code>).</li>
</ol>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>mydf<span class="sc">$</span>random <span class="ot">&lt;-</span> <span class="co">#??</span></span></code></pre></div>
<!-- 5) (**dataframes**) Lav en `data.frame` (dataframe) med to kolonner og 12 observationer. Den ene varible skal være tilfældige data fra en normal fordeling (bruge funktionen `rnorm`) med et gennemsnit på 5 og varians på 1, den anden variable skal veksle mellem "blue" og "red" (bruge `rep(c("blue","red","yellow"),4)`). -->
<!-- ```{r,eval=F} -->
<!-- set.seed(83902) #some seed so everyone's result is the same -->
<!-- mydf <- data.frame("value"= rnorm(12,5,1), "colour" = rep(c("blue","red","yellow"),4)) -->
<!-- dim(mydf) #otte rækker og tre kolonner -->
<!-- mydf -->
<!-- ``` -->
<ol start="7" style="list-style-type: decimal">
<li>(<strong>delmængder af dataframes</strong>) Åbn datasættet “ToothGrowth” med følgende kode:</li>
</ol>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;ToothGrowth&quot;</span>)</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>?ToothGrowth</span></code></pre></div>
<ul>
<li>Find delmængden af datasættet således at diet (variablen <code>supp</code>) er “OJ” og længden (variablen <code>len</code>) er større end 15.</li>
</ul>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>newdf <span class="ot">&lt;-</span> ToothGrowth[<span class="co">#skrive her til at lave subset af observationerne,]</span></span></code></pre></div>
<ul>
<li>Hvor mange rækker er der i den nye dataframe <code>newdf</code>?</li>
<li>Hvor mange unikke værdier er der i variablen <code>dose</code> (brug funktionen <code>unique</code>) ?</li>
<li>Find delmængden af datasættet <code>ToothGrowth</code>, hvor variablen <code>dose</code> er 0.5 eller 1.5 (hint: brug <code>%in%</code> eller <code>|</code>) og <code>supp</code> er “VC.”</li>
<li>Beregn den gennemsnitlige længde for observationerne i delmængden.</li>
</ul>
<!-- Tag dataframe fra sidste problem og kalde den for `mydf`. Hvor mange rækker har gule farve? Starter med at lave en subset af `mydf` og bruge `nrow` til at tælle rækkerne. -->
<!-- ```{r,eval=F} -->
<!-- nrow(mydf[mydf$colour == "yellow", ]) -->
<!-- ``` -->
<!-- Hvor mange rækker har enten gule farve eller blå farve, samt har en `value` på mere en 4? Prøve med både `%in%` og `|` tegner når du subset efter farve. -->
<!-- ```{r,eval=F} -->
<!-- nrow(mydf[mydf$colour %in% c("blue","yellow") & mydf$value > 4, ]) -->
<!-- ``` -->
</div>
<div id="kort-analyse-med-reaktionstider" class="section level3 hasAnchor" number="1.10.3">
<h3><span class="header-section-number">1.10.3</span> Kort analyse med reaktionstider<a href="#kort-analyse-med-reaktionstider" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol start="8" style="list-style-type: decimal">
<li>(<strong>indlæse data</strong>) Åbn en fil, der sidder i Absalon og hedder “reactions.txt” ved at bruge funktionen <code>read.table()</code> (giv objektet et navn, e.g. <code>data</code>). Husk at tjekke, om filen har en ‘header’ og bruge således <code>header=T</code> hvis nødvendigt.</li>
</ol>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> ... <span class="co">#replace ...</span></span></code></pre></div>
<ol start="9" style="list-style-type: decimal">
<li>(<strong>factor variabler</strong>) Variablerne <code>subject</code> og <code>time</code> indlæses som henholdvis data type ‘int’ (heltal) og “chr” (character) men de skal hellere være ‘factor’ variabler. Lav dem om til facktor variabler, fk.</li>
</ol>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>subject <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(data<span class="sc">$</span>subject) <span class="co">#gør subject til en faktor</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="do">## gør den samme her for time:</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>...</span></code></pre></div>
<ol start="10" style="list-style-type: decimal">
<li>(<strong>delmængde af dataframe</strong>)</li>
</ol>
<p>Lav to delmængder af ovenstående datasæt -</p>
<ul>
<li>én til alle observationer fra tidspunktet “before” (<code>time =="before"</code>) og</li>
<li>én til alle observationer fra tidspunktet “after.”</li>
</ul>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>RT_before <span class="ot">&lt;-</span> data[<span class="co">#skrive her , ]</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>RT_after <span class="ot">&lt;-</span> <span class="co">#skrive her</span></span></code></pre></div>
<ol start="11" style="list-style-type: decimal">
<li>(<strong>mean og tapply</strong>) Benyt funktionen <code>mean</code> til at beregne den gennemsnitlige reaktionstid (variablen <code>RT</code>) til “before” og “after” hver for sig (brug ovenstående delmængder).</li>
</ol>
<ul>
<li>Prøv også at anvende funktionen <code>tapply</code> på det oprindelige datasæt til at gøre den samme med mindre kode.</li>
</ul>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tapply</span>(<span class="co">#skrive her,#skrive her,#skrive her)</span></span></code></pre></div>
<ol start="12" style="list-style-type: decimal">
<li>(<strong>beregn forskellen og mean</strong>)</li>
</ol>
<p>Bemærk datasættet er ‘paired’ - målingerne er lavet på de samme personer både “before” og “after.” –&gt;</p>
<ul>
<li>Lav en vector <code>diff</code>, der er ændringen i reaktionstiderne mellem “before” og “after.”</li>
<li>Beregn den gennemsnitlige forskel i rekationstiderne over de 10 personer.</li>
</ul>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>diff <span class="ot">&lt;-</span> <span class="co">#change in reaction time between before and after</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(diff)</span></code></pre></div>
<ol start="13" style="list-style-type: decimal">
<li>(<strong>lav t-test i R</strong>) Lav en t-test (funktionen <code>t.test</code>) for at teste hypotesen at ændringen i reaktionstiderne mellem “before” og “after” er anderledes end 0.</li>
</ol>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(<span class="co">#skrive her..)</span></span></code></pre></div>
<p>Find følgende i outputtet fra R:</p>
<ul>
<li>Hvor er test-statistikken <code>t</code>?</li>
<li>Hvor er p-værdien?</li>
<li>Hvad er alternativhypotesen?</li>
</ul>
<ol start="14" style="list-style-type: decimal">
<li>Skriv en kort sætning med din konklusion.</li>
</ol>
</div>
<div id="øvelser-med-statistik-tests" class="section level3 hasAnchor" number="1.10.4">
<h3><span class="header-section-number">1.10.4</span> Øvelser med statistik tests<a href="#øvelser-med-statistik-tests" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol start="15" style="list-style-type: decimal">
<li>(<strong>Chi-sq</strong>) Kør følgende kode til at få en tabel (selve koden er ikke vigtigt):</li>
</ol>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>mytable <span class="ot">&lt;-</span> <span class="fu">structure</span>(<span class="fu">c</span>(80L, 97L, 372L, 136L, 87L, 119L), <span class="at">.Dim =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">.Dimnames =</span> <span class="fu">structure</span>(<span class="fu">list</span>(</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;First&quot;</span>, <span class="st">&quot;Second&quot;</span>, <span class="st">&quot;Third&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;Died&quot;</span>, <span class="st">&quot;Survived&quot;</span>)), <span class="at">.Names =</span> <span class="fu">c</span>(<span class="st">&quot;Class&quot;</span>, <span class="st">&quot;Survival&quot;</span>)), <span class="at">class =</span> <span class="st">&quot;table&quot;</span>)</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>mytable</span></code></pre></div>
<pre><code>##         Survival
## Class    Died Survived
##   First    80      136
##   Second   97       87
##   Third   372      119</code></pre>
<p>Tabellen omhandler personer ombord skibet ‘Titanic’ - den angiver hvor mange passagerer tilhørte de tre klass (førsteklass, andenklass, trejdeklass), delte efter overlevelse (døde eller overlevede tragedien).</p>
<ul>
<li>Benyt funktionen <code>chisq.test()</code> på tabellen.</li>
<li>Hvad er nulhypotesen?</li>
<li>Er testen signifikant?</li>
<li>Er passagerernes klass så uafhængige af deres chance for at overleve tragedien?</li>
<li>Hvilken klass havde den bedste chance for at overleve?</li>
</ul>
<ol start="17" style="list-style-type: decimal">
<li>(<strong>Korrelation analyse</strong>) Åbn datasættet <code>trees</code> og lav et scatter plot med variablen <code>Girth</code> på x-aksen og variablen <code>Volume</code> på y-aksen.</li>
</ol>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(trees)</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(trees)</span></code></pre></div>
<ul>
<li>Anvend funktionen <code>cor.test</code> for at teste, om der er en signifikant korrelation mellem de to variabler. Brug <code>method = "pearson"</code> (det er dog faktisk default)</li>
</ul>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(???, ???,<span class="at">method=</span><span class="st">&quot;pearson&quot;</span>)</span></code></pre></div>
<ul>
<li>Hvad er korrelationen mellem <code>Girth</code> og <code>Volume</code>?</li>
<li>Hvad er p-værdien? Er den signifikant?</li>
</ul>
<ol start="15" style="list-style-type: decimal">
<li>(<strong>ANOVA</strong>) OBS: hvis du føler dig utryg med funktionen <code>lm()</code> - der kommer en video om det i morgen (i forbindelse med emnet Rmarkdown).</li>
</ol>
<p>Kør følgende kode til at lave variansanalyse, der tester hulhypotesen hvor den gennemsnitlige værdi af variablen <code>Sepal.Width</code> er ens for hver af de tre arter (variablen <code>Species</code>) fra datasættet <code>iris</code>:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="co">#model under H0: no difference according to Species (1 just means &quot;fit overall mean&quot;)</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>model_h0 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Sepal.Width <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data=</span>iris) </span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="co">#model under H1: each level of Species has its own mean</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>model_h1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Sepal.Width <span class="sc">~</span> Species, <span class="at">data=</span>iris) </span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a><span class="co">#compare two models - significant p-value equates to choosing H1 model</span></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(model_h0,model_h1)</span></code></pre></div>
<p>Kig på outputtet:</p>
<ul>
<li>Hvilken model reflekterer nulhypotesen?</li>
<li>Hvilken model reflekterer alternativhypotesen?</li>
<li>Hvor er p-værdien?</li>
<li>Er der en signifikant forskel i den gennemsnitlige <code>Sepal.Width</code> efter de forskellige <code>Species</code>?</li>
</ul>
<p>Brug funktionen <code>tapply</code> for at finde ud af, hvad er den middelværdi <code>Sepal.Width</code> til hver af de tre arter.</p>
<ol start="16" style="list-style-type: decimal">
<li>(<strong>ANOVA</strong>) Lav en lignende analyse på datasættet <code>chickwts</code> for at svare på spørgsmålet:</li>
</ol>
<ul>
<li>Er der en forskel i den gennemsnitlige vægt (variablen <code>weight</code>) efter fodertypen (variablen <code>feed</code>)? Med andre ord er vægt afhængig af fodertypen?</li>
</ul>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(chickwts)</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="co">#skriv kode herfra</span></span></code></pre></div>
<ol start="18" style="list-style-type: decimal">
<li>(<strong>Lineær regression</strong>)</li>
</ol>
<ul>
<li>Brug <code>lm</code> til at lave en simpel lineær regression, således at respons variablen <code>Volume</code> er afhængig af variablen <code>Girth</code> (datasæstet <code>trees</code>).</li>
</ul>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>mylm <span class="ot">&lt;-</span> <span class="fu">lm</span>(???, <span class="at">data=</span>trees) </span></code></pre></div>
<p>Brug <code>summary</code> på din model for at finde følgende værdier:</p>
<ul>
<li>Hvad er r.squared? (multiple)</li>
<li>Er variablen <code>Girth</code> signifikant?</li>
<li>Hvad er ligningen på den bedste rette linje (husk formen y = ax + b)?</li>
</ul>
<ol start="18" style="list-style-type: decimal">
<li>(<strong>Kort intro til multiple lineær regression</strong>) Tag ovenstående model og tilføj variablen <code>Height</code> som en ekstra prediktær (uafhængig) variabel i modellen med en “+” tegn:</li>
</ol>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>mylm_height <span class="ot">&lt;-</span> <span class="fu">lm</span>(??? <span class="sc">~</span> ??? <span class="sc">+</span> ???, <span class="at">data=</span>trees) </span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mylm_height)</span></code></pre></div>
<p><em>Bemærk at det ikke betyder, at de to variabler skal lægges sammen, men at vi gerne vil have både variablerne i modellen som uafhængig variabler (med andre ord er <code>Volume</code> afhængig af både <code>Girth</code> og <code>Height</code>).</em></p>
<p>Benyt <code>summary</code> på modellen og prøv at finde følgende:</p>
<ul>
<li>Hvad er den den (multiple) r.squared værdi?</li>
<li>Hvor meget ændre den (multiple) r.squared værdi i forhold til modellen med kun variablen <code>Girth</code>?</li>
<li>Er <code>Volume</code> signifikant afhængig af <code>Height</code> (efter at man har taget højde for <code>Girth</code>)?</li>
</ul>
<p>Brug funktionen <code>anova</code> til at sammenligne modellen uden <code>Height</code> med modellen med <code>Height</code></p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(<span class="co">#model without height,#model with height)</span></span></code></pre></div>
<p>Bemærk, at i dette tilfælde er p-værdien fra ANOVA samme p-værdi fra <code>summary(mylm_height)</code>.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>


    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["visualisering_22.pdf", "visualisering_22.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
